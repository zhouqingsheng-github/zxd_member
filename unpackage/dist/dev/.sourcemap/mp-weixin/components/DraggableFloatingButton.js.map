{"version":3,"sources":["webpack:////Users/zqs/workSpace/zxd/zxd_member/components/DraggableFloatingButton.vue?575f","webpack:////Users/zqs/workSpace/zxd/zxd_member/components/DraggableFloatingButton.vue?6e8e","webpack:////Users/zqs/workSpace/zxd/zxd_member/components/DraggableFloatingButton.vue?394b","webpack:////Users/zqs/workSpace/zxd/zxd_member/components/DraggableFloatingButton.vue?fa09","uni-app:///components/DraggableFloatingButton.vue","webpack:////Users/zqs/workSpace/zxd/zxd_member/components/DraggableFloatingButton.vue?8f8d","webpack:////Users/zqs/workSpace/zxd/zxd_member/components/DraggableFloatingButton.vue?ee12"],"names":["name","props","buttonImage","type","required","targetPage","default","data","right","bottom","translateX","screenWidth","screenHeight","buttonSize","startPoint","isMoving","opacity","scrollTimer","isAtRightEdge","mounted","beforeDestroy","methods","addScrollListener","uni","removeScrollListener","handlePageScroll","clearTimeout","onTouchStart","x","y","onTouchMove","e","onTouchEnd","snapToEdge","handleClick","url"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgJ;AAChJ;AAC2E;AACL;AACqC;;;AAG3G;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,6FAAM;AACR,EAAE,8GAAM;AACR,EAAE,uHAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kHAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAs0B,CAAgB,qzBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCoB11B;EACAA;EACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAG;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;;IAEA;IACA;;IAEA;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MACA;MACAC;IACA;IAEAC;MACA;MACAD;IACA;IAEAE;MAAA;MACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;;MAEA;MACA;QACAC;MACA;;MAEA;MACA;QACA;MACA;IACA;IAEAC;MACA;MACA;QACAC;QACAC;QACArB;QACAC;MACA;MACA;;MAEA;MACA;IACA;IAEAqB;MACA;MAEA;MACA;MACA;;MAEA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MAEA;MACA;;MAEA;MACAC;MACAA;IACA;IAEAC;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;;MAEA;MACA;MACA;MACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;MACA;IACA;IAEAC;MACA;MACA;QACAX;UACAY;QACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC3KA;AAAA;AAAA;AAAA;AAAqsC,CAAgB,0oCAAG,EAAC,C;;;;;;;;;;;ACAztC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/DraggableFloatingButton.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./DraggableFloatingButton.vue?vue&type=template&id=1a6421ba&scoped=true&\"\nvar renderjs\nimport script from \"./DraggableFloatingButton.vue?vue&type=script&lang=js&\"\nexport * from \"./DraggableFloatingButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DraggableFloatingButton.vue?vue&type=style&index=0&id=1a6421ba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a6421ba\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/DraggableFloatingButton.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./DraggableFloatingButton.vue?vue&type=template&id=1a6421ba&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./DraggableFloatingButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./DraggableFloatingButton.vue?vue&type=script&lang=js&\"","<template>\n  <view\n      class=\"floating-button\"\n      :style=\"{\n      right: right + 'px',\n      bottom: bottom + 'px',\n      backgroundImage: `url(${buttonImage})`,\n      opacity: opacity,\n      transition: isMoving ? 'none' : 'all 0.3s ease',\n      transform: `translateX(${translateX}px)`\n    }\"\n      @touchstart=\"onTouchStart\"\n      @touchmove.stop.prevent=\"onTouchMove\"\n      @touchend=\"onTouchEnd\"\n      @click=\"handleClick\"\n  >\n  </view>\n</template>\n\n<script>\nexport default {\n  name: \"DraggableFloatingButton\",\n  props: {\n    buttonImage: {\n      type: String,\n      required: true\n    },\n    targetPage: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      right: 20,\n      bottom: 100,\n      translateX: 0,\n      screenWidth: 0,\n      screenHeight: 0,\n      buttonSize: 0,\n      startPoint: null,\n      isMoving: false,\n      opacity: 1,\n      scrollTimer: null,\n      isAtRightEdge: true // 默认在右边\n    };\n  },\n  mounted() {\n    // 获取屏幕尺寸\n    const systemInfo = uni.getSystemInfoSync();\n    this.screenWidth = systemInfo.windowWidth;\n    this.screenHeight = systemInfo.windowHeight;\n\n    // 计算按钮实际尺寸（rpx转px）\n    this.buttonSize = uni.upx2px(132);\n\n    // 监听页面滚动事件\n    this.addScrollListener();\n  },\n  beforeDestroy() {\n    // 移除滚动监听\n    this.removeScrollListener();\n  },\n  methods: {\n    addScrollListener() {\n      // 监听页面滚动\n      uni.$on('pageScroll', this.handlePageScroll);\n    },\n\n    removeScrollListener() {\n      // 移除滚动监听\n      uni.$off('pageScroll', this.handlePageScroll);\n    },\n\n    handlePageScroll() {\n      // 页面滚动时部分隐藏按钮（靠边消失但不完全消失）\n      // 根据吸附边决定隐藏方向\n      if (this.isAtRightEdge) {\n        // 如果在右边，向右偏移隐藏\n        this.translateX = this.buttonSize * 0.99;\n      } else {\n        // 如果在左边，向左偏移隐藏\n        this.translateX = -this.buttonSize * 0.99;\n      }\n\n      // 清除之前的定时器\n      if (this.scrollTimer) {\n        clearTimeout(this.scrollTimer);\n      }\n\n      // 滚动停止后显示按钮\n      this.scrollTimer = setTimeout(() => {\n        this.translateX = 0; // 回到原位\n      }, 150);\n    },\n\n    onTouchStart(e) {\n      const touch = e.touches[0];\n      this.startPoint = {\n        x: touch.clientX,\n        y: touch.clientY,\n        right: this.right,\n        bottom: this.bottom\n      };\n      this.isMoving = true;\n\n      // 触摸时立即显示按钮\n      this.translateX = 0;\n    },\n\n    onTouchMove(e) {\n      if (!this.startPoint) return;\n\n      const touch = e.touches[0];\n      const deltaX = touch.clientX - this.startPoint.x;\n      const deltaY = touch.clientY - this.startPoint.y;\n\n      // 计算新位置\n      let newRight = this.startPoint.right - deltaX;\n      let newBottom = this.startPoint.bottom - deltaY;\n\n      // 边界检测\n      const margin = 10;\n      if (newRight < margin) newRight = margin;\n      if (newRight > this.screenWidth - this.buttonSize - margin) newRight = this.screenWidth - this.buttonSize - margin;\n      if (newBottom < margin) newBottom = margin;\n      if (newBottom > this.screenHeight - this.buttonSize - margin) newBottom = this.screenHeight - this.buttonSize - margin;\n\n      this.right = newRight;\n      this.bottom = newBottom;\n\n      // 阻止默认行为和事件冒泡\n      e.preventDefault();\n      e.stopPropagation();\n    },\n\n    onTouchEnd() {\n      this.startPoint = null;\n      this.isMoving = false;\n      // 吸附到边缘\n      this.snapToEdge();\n    },\n\n    snapToEdge() {\n      const midpointX = this.screenWidth / 2;\n      const margin = 10;\n\n      // 水平方向吸附到左或右边缘\n      // 注意：由于使用right定位，判断逻辑需要相应调整\n      // right值越小表示越靠近屏幕右侧\n      if (this.right < (this.screenWidth - this.buttonSize) / 2) {\n        //吸附到右边缘（right值较小）\n        this.right = margin;\n        this.isAtRightEdge = true;\n      } else {\n        // 吸附到左边缘（right值较大）\n        this.right = this.screenWidth - this.buttonSize - margin;\n        this.isAtRightEdge = false;\n      }\n    },\n\n    handleClick() {\n      // 触发点击事件\n      if (this.targetPage) {\n        uni.navigateTo({\n          url: this.targetPage\n        });\n      }\n      this.$emit('click');\n    }\n  }\n};\n</script>\n\n<style scoped>\n.floating-button {\n  position: fixed;\n  width: 132rpx;\n  height: 132rpx;\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n  z-index: 9999;\n  /* 添加硬件加速优化性能 */\n  transform: translateZ(0);\n  will-change: right, bottom, transform;\n}\n</style>","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./DraggableFloatingButton.vue?vue&type=style&index=0&id=1a6421ba&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./DraggableFloatingButton.vue?vue&type=style&index=0&id=1a6421ba&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1769665550519\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}