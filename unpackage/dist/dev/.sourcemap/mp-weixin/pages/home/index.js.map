{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/home/index.vue?2418","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/home/index.vue?9bef","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/home/index.vue?96cb","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/home/index.vue?f911","uni-app:///pages/home/index.vue","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/home/index.vue?3f1a","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/home/index.vue?3a22"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","EmptyState","UniNavBar","UButton","USwiper","UIcon","CityPicker","CustomTabbar","HotelCalendar","BedCountPicker","HotelList","SearchCard","DraggableFloatingButton","data","showCard","filterOptions","showZeroToSixPrompt","iChoseEarlyMorning","showRedEnvelope","cutoffTime","navBarBgColor","navBarTitleColor","currentCity","currentDistrict","currentAddress","showDetailAddress","hotels","showNoHotelTip","showCalendar","checkInDate","checkOutDate","nightCount","showBedPicker","showCityPicker","bedCount","tempBedCount","isRefreshing","showBackToTop","longitude","latitude","advertisingCarousel","showPopupAd","popupAdData","page","pageSize","total","loading","noMoreData","isRequesting","timeInterval","hour","computed","onLoad","uni","frontColor","backgroundColor","onShow","onPageScroll","onReachBottom","onPullDownRefresh","city","district","checkIn","checkOut","nights","beforeDestroy","clearInterval","methods","cutoffTimeFun","fetchFilterTags","http","then","catch","checkTimeForPrompt","storedParams","recordVisit","provider","success","console","code","res","openId","fail","checkPopupAd","today","lastShownDate","handlePopupAdClick","closePopupAd","setTimeout","goToBusiness","parse","url","result","title","icon","duration","pageId","loadAdsCarousel","handleSwiperClick","formatYMD","formatDate","onDateChange","startDate","endDate","cutoffHour","cutoffMinute","cutoff","actualToday","newEndDate","getLocation","locationInfo","oldSearchParams","now","currentHour","isCurrentlyEarlyMorning","searchParams","handleLocationClick","handleBedPickerClose","onBedCountConfirm","jumpPage","handleSearch","haveYouReceivedAnyCoupons","params","status","initSearchParams","tomorrow","storedCheckIn","storedCheckOut","yesterday","nextDay","loadHotelList","loadMoreHotels","nextPage","goToMemberRights","goToCitySelect","events","citySelected","that","province","scrollToTop","scrollTop"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,aAAa,kRAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpEA;AAAA;AAAA;AAAA;AAAm0B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;AC2Iv1B;AAUA;AAIA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAIA;AAAA,eACA;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;IACA;EACA;EACAC;EACAC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACA;YAAA;cAAA;cACA;cACA;gBACA;cACA;cAAA;cAAA;cAAA,OAEA;YAAA;cACAC;gBACAC;gBACAC;cACA;cAAA;cAAA;YAAA;cAAA;cAAA;YAAA;cAGA;cAAA,wBACA;cACA;cACA;cACA;cACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EACAC;IACAH;MACAC;MACAC;IACA;IACA;IACA;IACA;IACA;EACA;EACAE;IACA;IACA;MACA;MACA;MACA;MACAJ;QACAC;QACAC;MACA;IACA;MACA;MACA;MACA;MACAF;QACAC;QACAC;MACA;IACA;IAEA;;IAEA;IACAF;EACA;EACA;EACAK;IACA;MACA;IACA;EACA;EACAC;IAAA;IACA;IACA;IACA;IACA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACA9B;IACA;MACA;MACAmB;MACA;IACA;EACA;EACAY;IACA;IACA;MACAC;MACA;IACA;EACA;EACAC;IACAC;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MACAC,0CACAC;QACA;MACA,GACAC,sBACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACAC;MACArB;IACA;IACAsB;MACA;MACAtB;QACAuB;QACAC;UAAA;YAAA;YAAA;cAAA;gBAAA;kBAAA;oBACAC;oBAAA;oBAAA,OACAzB;sBACA0B;oBACA;kBAAA;oBAFAC;oBAGA;sBAAAC;oBAAA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA,CACA;UAAA;YAAA;UAAA;UAAA;QAAA;QACAC;UACAJ;QACA;MACA;IACA;IACA;IACAK;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBACAC,wDACA;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAxE;gBACA;gBACA;kBACA;kBACA;kBACA;kBACA;kBACAwC;kBACA;kBACA;oBACAA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAiC;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACAC;UACA;UACA;UACA;UACA;YACAnC;UACA;YACAA;UACA;QACA;MACA;IACA;IACA;IACAoC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBAAA,eACAA;gBAAA,kCACA,yBAuBA;gBAAA;cAAA;gBAAA,IAtBA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACArC;kBACAsC;gBACA;cAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA,OAIA;cAAA;gBAAAC;gBACAvC;kBACAwC;kBACAC;gBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAzC;kBACAwC;kBACAC;kBACAC;gBACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;cAAA;gBAIA;gBACAC;gBAAA;gBAAA,OACA3C;kBACAsC;gBACA;cAAA;gBACA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IACAM;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAnB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAoB;MACA;MACA;MACA;MACA;QACA;UACA7C;YACAsC;UACA;QACA;QACA;QACA;UACA;UACA;UACAtC;YACAsC;UACA;QACA;QACA;UACAtC;YACAsC;UACA;QACA;QACA;UACA;;UAKAhG;YACAgG;UACA;QAEA;MACA;IACA;IACAQ;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;QACA;QACA;QACA;UAAAC;UAAAC;UAAAvC;QACA;QACAoB;QACA;QACAvD;QACA;QACA;QACA;QACA;UAAA;UAAA2E;UAAAC;QACAC;QACA;QACA;QACA;UACAC;QACA;QACA;QACA;UACA;UACA;UACAC;UACA;QACA;UACA;UACA;QACA;QACA;QACA;QACA;UACAhD;UACAC;UACAvB;UACAC;UACAuB;UACAC;UACAC;UACA9B;UACAlB;UACAC;QACA;QACAoC;QACA;QACA;MACA;IACA;IACAwD;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAAC;gBACA;gBACA;gBACA;gBACA;gBACA;gBACAC,sDAEA;gBACAC;gBACAC;gBACAC;gBACA;kBACA;gBACA;kBACA;gBACA;gBACA;;gBAEA;gBACAC;kBACAvD;kBACAC;kBACAvB;kBACAC;kBACAuB;kBACAC;kBACAC;kBACA9B;kBACAlB;kBACAC;gBACA;gBACAoC;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAyB;gBACAzB;kBACAwC;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAsB;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;QACA;MACA;QACA;MACA;MACA;MAEA;QACA1D;QACAC;QACAvB;QACAC;QACAuB;QACAC;QACAC;QACA9B;QACAlB;QACAC;MACA;MACA;MACAoC;IACA;IACAkE;MACAlE;QACAsC;MACA;IACA;IACA6B;MACA;MACA;QACA5D;QACAC;QACAvB;QACAC;QACAuB;QACAC;QACAC;QACA9B;QACAlB;QACAC;MACA;MACA;MACAoC;MACA;MACAA;QACAsC;MACA;IACA;IACA8B;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;kBACA/E;kBACAC;kBACA+E;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA3C;gBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA4C;MACA;MACA;MACA;MACAxC;MACA;MACAyC;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MAEA;QACA;QACA;QACAC;QACAC;QACA;UACA;UACAC;UACA;UACA;YACA;YACA;cACAnG;cACAC;YACA;cACA;cACAD;cACA;cACA;gBACAC;cACA;gBACAA;cACA;YACA;YACA;YACA;cACA;cACAmG;cACAnG;YACA;YACA;UACA;YACAD;YACAC;UACA;QACA;UACA;UACA;YACAD;YACAC;UACA;YACA;YACAD;YACA;YACA;cACAC;YACA;cACAA;YACA;UACA;UACA;UACA;YACA;YACAmG;YACAnG;UACA;QACA;MACA;MACA;MACA;QACA8B;QACAC;QACAvB;QACAC;QACAuB;QACAC;QACAC;QACA9B;QACAlB;QACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAoC;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IACA6E;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACA;gBACA;gBAAA;gBAEA;gBACAf,+CACAO;kBACA9D;kBACAC;kBACAvB;kBACAC;kBACAV;kBACAC;kBACAkC;kBACA9B;kBACAS;kBACAC;gBAAA;gBAAA;gBAAA,OAGA;cAAA;gBAAAoC;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACAF;gBACA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAE;gBAAA;gBAAA;cAAA;gBAEA;cAAA;gBAGA;gBACA;gBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA3B;kBAAAwC;kBAAAC;gBAAA;cAAA;gBAAA;gBAEA;gBACA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAqC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACA;gBACA;gBAAA;gBAGAC;gBACAjB;kBACAvD;kBACAC;kBACAvB;kBACAC;kBACAV;kBACAC;kBACAkC;kBACA9B;kBACAS;kBACAC;gBACA;gBAAA;gBAAA,OAEA;cAAA;gBAAAoC;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAA;cAAA;gBAGA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA3B;kBAAAwC;kBAAAC;gBAAA;cAAA;gBAAA;gBAEA;gBACA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAuC;MACAhF;QACAsC;MACA;IACA;IACA2C;MAAA;MACA;MACAjF;QACAsC;QACA4C;UACAC;YACA;cACAC;cACAA;cACAA;cACAA;cACAA;cACAA;cACA;cACA;;cAEA;cACA;cACA;cACA;cACA;gBACA;cACA;gBACA;cACA;cACA;cAEA;gBACAC;gBACA9E;gBACAC;gBACAvB;gBACAC;gBACAuB;gBACAC;gBACAC;gBACA9B;gBACAlB;gBACAC;cACA;cACA;cACAoC;cACA;cACA;YACA;UACA;QACA;;QACAwB;UACA;UACAG;QACA;MACA;IACA;IACA2D;MACAtF;QACAuF;QACA7C;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACh5BA;AAAA;AAAA;AAAA;AAA0jD,CAAgB,07CAAG,EAAC,C;;;;;;;;;;;ACA9kD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/home/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/home/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=71e217db&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=71e217db&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"71e217db\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/home/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=71e217db&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uniNavBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar\" */ \"@/uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.vue\"\n      )\n    },\n    uSwiper: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-swiper/u-swiper\" */ \"uview-ui/components/u-swiper/u-swiper.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.advertisingCarousel.length\n  var g1 = !_vm.hotels.length && !_vm.loading\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.showCalendar = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.tempBedCount = $event\n    }\n    _vm.e2 = function ($event) {\n      _vm.showCalendar = true\n    }\n    _vm.e3 = function ($event) {\n      _vm.showBedPicker = true\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<!--suppress JSUnresolvedReference -->\n<template>\n  <view class=\"container\">\n    <HotelCalendar\n        v-if=\"showCalendar\"\n        @change=\"onDateChange\"\n        @close=\"showCalendar = false\"\n        :value=\"[checkInDate, checkOutDate]\"\n        :cutoffTime=\"cutoffTime\"\n        :class=\"['calendar-page', showCalendar ? 'show' : '']\"\n    />\n    <BedCountPicker\n        v-if=\"showBedPicker\"\n        :value=\"tempBedCount\"\n        @input=\"tempBedCount = $event\"\n        @close=\"handleBedPickerClose\"\n        @confirm=\"onBedCountConfirm\"/>\n    <!-- 添加弹窗广告 -->\n    <view v-if=\"showPopupAd\" class=\"popup-ad-mask\" @touchmove.stop.prevent>\n      <view class=\"popup-ad-container\">\n        <image\n            class=\"popup-ad-image\"\n            :src=\"popupAdData.posterUrl\"\n            mode=\"aspectFit\"\n            @click=\"handlePopupAdClick\"\n        />\n        <view class=\"popup-ad-close\" @click=\"closePopupAd\">\n          <u-icon name=\"close\" color=\"#fff\" size=\"24\"></u-icon>\n        </view>\n        <view v-if=\"popupAdData.buttonName\" class=\"popup-ad-btn\" @click=\"goToBusiness\">{{\n            popupAdData.buttonName\n          }}\n        </view>\n      </view>\n    </view>\n    <view :class=\"{'page-hidden': showCalendar,'page-visible': !showCalendar}\">\n      <uni-nav-bar\n          :backgroundColor=\"navBarBgColor\"\n          :fixed=\"true\"\n          :shadow=\"false\"\n          :border=\"false\"\n          status-bar\n      >\n        <template #default>\n          <text :style=\"{color: navBarTitleColor}\" class=\"custom-navbar-title\">住小叮</text>\n        </template>\n      </uni-nav-bar>\n      <view class=\"home-banner\">\n        <!-- 顶部背景图区域 -->\n        <u-swiper\n            v-if=\"advertisingCarousel.length > 0\"\n            class=\"banner-swiper\"\n            :list=\"advertisingCarousel\"\n            :autoplay=\"true\"\n            :showTitle=\"true\"\n            :circular=\"true\"\n            :interval=\"5000\"\n            :duration=\"500\"\n            :height=\"694\"\n            :radius=\"0\"\n            indicatorMode=\"dot\"\n            imgMode=\"widthFix\"\n            keyName=\"imageUrl\"\n            @click=\"handleSwiperClick\"\n        >\n        </u-swiper>\n      </view>\n      <view class=\"main-content\">\n        <!-- 搜索卡片 -->\n        <SearchCard\n            v-if=\"showCard\"\n            :currentCity=\"currentCity\"\n            :currentDistrict=\"currentDistrict\"\n            :currentAddress=\"currentAddress\"\n            :showDetailAddress=\"showDetailAddress\"\n            :checkInDate=\"checkInDate\"\n            :checkOutDate=\"checkOutDate\"\n            :nightCount=\"nightCount\"\n            :bedCount=\"bedCount\"\n            :iChoseEarlyMorning=\"iChoseEarlyMorning\"\n            :showZeroToSixPrompt=\"showZeroToSixPrompt\"\n            :cutoffTime=\"cutoffTime\"\n            :rounded=\"true\"\n            :filterOptions=\"filterOptions\"\n            @locationClick=\"handleLocationClick\"\n            @dateClick=\"showCalendar = true\"\n            @bedClick=\"showBedPicker = true\"\n            @search=\"handleSearch\"\n            @jumpPage=\"jumpPage\"\n            @cityClick=\"goToCitySelect\"\n        />\n        <!-- 城市选择器弹窗已移除 -->\n        <view v-if=\"showNoHotelTip\">\n          <EmptyState\n              v-if=\"showNoHotelTip\"\n              text=\"当前城市暂无酒店，试试搜索其他区域\"\n              image=\"/static/base/placeholderMap.png\"\n          />\n          <view class=\"other-tinkerbells\">\n            <view class=\"other-tinkerbells-l\"></view>\n            <view class=\"other-tinkerbells-c\">其他城市住小叮</view>\n            <view class=\"other-tinkerbells-r\"></view>\n          </view>\n        </view>\n        <!-- 酒店列表 -->\n        <view v-if=\"!hotels.length && !loading\" class=\"empty-container\">\n          <view class=\"empty-state\">\n            <image class=\"empty-icon\" src=\"/static/base/placeholderMap.png\" mode=\"aspectFit\"/>\n          </view>\n          <view class=\"empty-text\">附近暂无酒店，试试搜索其他区域</view>\n        </view>\n        <HotelList\n            v-else\n            :hotels=\"hotels\"\n            :loading=\"loading\"\n            :noMoreData=\"noMoreData\"\n        />\n      </view>\n      <DraggableFloatingButton v-if=\"showRedEnvelope\"\n                               :buttonImage=\"'https://www.zxd-hotel.xin/zxdhotel/icon/levitate2.gif'\"\n                               :targetPage=\"'/pages/subPackages/coupon/receiving-center'\"\n      />\n      <CustomTabbar\n          :current=\"'home'\"\n          v-if=\"!showBedPicker\"\n          :showBackToTop=\"showBackToTop\"\n          @backToTop=\"scrollToTop\"\n      />\n    </view>\n  </view>\n</template>\n\n<script>\nimport CustomTabbar from \"@/components/CustomTabbar.vue\";\nimport HotelCalendar from \"@/components/HotelCalendar.vue\";\nimport BedCountPicker from \"@/components/BedCountPicker.vue\";\nimport HotelList from \"@/components/HotelList.vue\";\nimport SearchCard from \"@/components/SearchCard.vue\";\nimport DraggableFloatingButton from \"@/components/DraggableFloatingButton.vue\";\nimport {\n  channelRecordVisit,\n  fetchHotelListByPage,\n  getAdvertisingDecoration,\n  getCutoffTime,\n  getPopupDecoration,\n  receiveRedEnvelope,\n  receivingCenter\n} from '@/common/api.js';\nimport CityPicker from \"../../components/CityPicker.vue\";\nimport {getLocation} from '@/utils/location.js';\nimport UIcon from \"../../uni_modules/uview-ui/components/u-icon/u-icon.vue\";\nimport USwiper from \"../../uni_modules/uview-ui/components/u-swiper/u-swiper.vue\";\nimport UButton from \"../../uni_modules/uview-ui/components/u-button/u-button.vue\";\nimport {checkLogin} from \"../../store\";\nimport UniNavBar from \"../../uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.vue\";\nimport EmptyState from \"../../components/EmptyState.vue\";\n\nconst {http} = uni.$u\nexport default {\n  components: {\n    EmptyState,\n    UniNavBar,\n    UButton,\n    USwiper,\n    UIcon,\n    CityPicker,\n    CustomTabbar,\n    HotelCalendar,\n    BedCountPicker,\n    HotelList,\n    SearchCard,\n    DraggableFloatingButton\n  },\n  data() {\n    return {\n      showCard: false,\n      filterOptions: [],\n      showZeroToSixPrompt: false, // 决定着是否提示凌晨了\n      iChoseEarlyMorning: false,//决定了用户是否选择了凌晨如果选择了 则需要在显示上进行加1\n      showRedEnvelope: false,\n      cutoffTime: '06:00',\n      navBarBgColor: 'transparent',\n      navBarTitleColor: '#fff',\n      currentCity: '',\n      currentDistrict: '',\n      currentAddress: '',\n      showDetailAddress: false,\n      hotels: [],\n      showNoHotelTip: false,\n      showCalendar: false,\n      checkInDate: this.formatYMD(new Date()),\n      checkOutDate: this.formatYMD(new Date(new Date().setDate(new Date().getDate() + 1))),\n      nightCount: 1,\n      showBedPicker: false,\n      showCityPicker: false,\n      bedCount: 1,\n      tempBedCount: 1,\n      isRefreshing: false,\n      showBackToTop: false,\n      longitude: '',\n      latitude: '',\n      advertisingCarousel: [],\n      showPopupAd: false,\n      popupAdData: {},\n      // 分页相关数据\n      page: 1,\n      pageSize: 5,\n      total: 0,\n      loading: false,\n      noMoreData: false,\n      isRequesting: false,\n      timeInterval: null, // 定时器\n      hour: 6,\n    }\n  },\n  computed: {},\n  async onLoad(options) {\n    this.cutoffTime = await getCutoffTime();\n    this.showCard = true;\n    if (options.scene) {\n      this.recordVisit(options.scene);\n    }\n    try {\n      await this.getLocation();\n      uni.setNavigationBarColor({\n        frontColor: '#ffffff',\n        backgroundColor: 'transparent'\n      });\n    } catch (e) {\n    }\n    this.tempBedCount = this.bedCount;\n    const [hours] = this.cutoffTime.split(':').map(Number);\n    this.hour = Number(hours);\n    this.fetchFilterTags()\n    this.checkTimeForPrompt();\n    this.timeInterval = setInterval(() => {\n      this.checkTimeForPrompt();\n    }, 60000); // 每分钟检查一次\n  },\n  onShow() {\n    uni.setNavigationBarColor({\n      frontColor: '#ffffff',\n      backgroundColor: 'transparent'\n    });\n    this.initSearchParams();\n    this.loadAdsCarousel();\n    this.checkPopupAd();\n    this.haveYouReceivedAnyCoupons();\n  },\n  onPageScroll(e) {\n    //滚动时切换导航栏背景色\n    if (e.scrollTop > 0) {\n      // 滚动时设为白色背景\n      this.navBarBgColor = '#ffffff';\n      this.navBarTitleColor = '#222222';\n      uni.setNavigationBarColor({\n        frontColor: '#000000',\n        backgroundColor: '#ffffff'\n      });\n    } else {\n      // 顶部时设为透明背景\n      this.navBarBgColor = 'transparent';\n      this.navBarTitleColor = '#ffffff';\n      uni.setNavigationBarColor({\n        frontColor: '#ffffff',\n        backgroundColor: 'transparent'\n      });\n    }\n\n    this.showBackToTop = e.scrollTop > 300;\n\n    // 通知悬浮按钮组件页面滚动\n    uni.$emit('pageScroll');\n  },\n  // 上拉触底加载更多\n  onReachBottom() {\n    if (!this.noMoreData && !this.loading) {\n      this.loadMoreHotels();\n    }\n  },\n  onPullDownRefresh() {\n    // 设置刷新状态\n    this.isRefreshing = true;\n    // 重新加载酒店列表\n    this.loadAdsCarousel();\n    this.loadHotelList({\n      city: this.currentCity,\n      district: this.currentDistrict,\n      checkIn: this.checkInDate,\n      checkOut: this.checkOutDate,\n      nights: this.nightCount,\n      bedCount: this.bedCount\n    }).finally(() => {\n      // 停止下拉刷新动画\n      uni.stopPullDownRefresh();\n      this.isRefreshing = false;\n    });\n  },\n  beforeDestroy() {\n    // 清除定时器\n    if (this.timeInterval) {\n      clearInterval(this.timeInterval);\n      this.timeInterval = null;\n    }\n  },\n  methods: {\n    async cutoffTimeFun() {\n      return await getCutoffTime();\n    },\n    fetchFilterTags() {\n      http.get('/hotel-stores/hotel-tags/used')\n          .then(res => {\n            this.filterOptions = res;\n          })\n          .catch(err => {\n          })\n    },\n    checkTimeForPrompt() {\n      const now = new Date();\n      this.currentHour = now.getHours();\n      this.showZeroToSixPrompt = (this.currentHour >= 0 && this.currentHour < this.hour);\n      const storedParams = uni.getStorageSync('searchParams');\n      storedParams.showZeroToSixPrompt = this.showZeroToSixPrompt;\n      uni.setStorageSync('searchParams', storedParams);\n    },\n    recordVisit(channelId) {\n      // 在 App.vue 或页面onLoad 调用\n      uni.login({\n        provider: 'weixin',\n        success: async (loginRes) => {\n          console.log('获取到的code:', loginRes.code);\n          const res = await uni.$u.http.post('/hotel-auth/wx/openId', {\n            code: loginRes.code\n          });\n          channelRecordVisit(channelId, {openId: res});\n        },\n        fail: (err) => {\n          console.error('uni.login 失败:', err);\n        }\n      });\n    },\n    // 添加检查弹窗广告的方法（一天弹一次）\n    async checkPopupAd() {\n      const today = new Date().toDateString();\n      const lastShownDate = uni.getStorageSync('popupAdLastShown');\n      // 如果今天还没有显示过弹窗，则显示\n      if (lastShownDate !== today) {\n        const data = await getPopupDecoration();\n        //实现连续弹窗逻辑：关闭当前弹窗后显示下一个\n        if (data && data.length > 0) {\n          // 存储所有弹窗数据\n          this.popupAdData = data[0];\n          this.showPopupAd = true;\n          // 记录今天已显示\n          uni.setStorageSync('popupAdLastShown', today);\n          // 如果有多个弹窗，存储剩余的弹窗数据\n          if (data.length > 1) {\n            uni.setStorageSync('remainingPopupAds', data.slice(1));\n          }\n        }\n      }\n    },\n    // 处理弹窗广告点击事件\n    handlePopupAdClick() {\n      this.goToBusiness();\n    },\n    // 关闭弹窗广告\n    closePopupAd() {\n      this.showPopupAd = false;\n      // 检查是否还有其他弹窗需要显示\n      const remainingAds = uni.getStorageSync('remainingPopupAds');\n      if (remainingAds && remainingAds.length > 0) {\n        // 取出下一个弹窗数据\n        const nextAd = remainingAds[0];\n        // 更新剩余弹窗数据\n        const newRemainingAds = remainingAds.slice(1);\n        // 延迟显示下一个弹窗\n        setTimeout(() => {\n          this.popupAdData = nextAd;\n          this.showPopupAd = true;\n          // 更新存储的剩余弹窗数据\n          if (newRemainingAds.length > 0) {\n            uni.setStorageSync('remainingPopupAds', newRemainingAds);\n          } else {\n            uni.removeStorageSync('remainingPopupAds');\n          }\n        }, 300);\n      }\n    },\n    // 弹窗跳转\n    async goToBusiness() {\n      const parse = JSON.parse(this.popupAdData.renovationData);\n      switch (parse.type) {\n        case 1: // 红包领取\n          if (!checkLogin()) {\n            await uni.navigateTo({\n              url: '/pages/subPackages/user/login'\n            });\n            return;\n          }\n          try {\n            const result = await receiveRedEnvelope(parse.redPackId)\n            uni.showToast({\n              title: '领取成功',\n              icon: 'success'\n            });\n            this.closePopupAd()\n          } catch (error) {\n            uni.showToast({\n              title: error.error,\n              icon: 'none',\n              duration: 1500\n            });\n          } finally {\n          }\n          break;\n        case 2: //跳转的红包领取中心页面\n          const pageId = parse.pageId;\n          await uni.navigateTo({\n            url: pageId\n          });\n          this.closePopupAd();\n          break;\n      }\n    },\n    async loadAdsCarousel() {\n      try {\n        this.advertisingCarousel = await getAdvertisingDecoration()\n      } catch (error) {\n        console.error('获取广告轮播图失败:', error);\n      }\n    },\n    // 添加轮播图点击事件处理函数\n    handleSwiperClick(index) {\n      // 使用计算属性中的数据\n      const item = this.advertisingCarousel[index];\n      // 根据 eventType 处理不同的点击事件\n      if (item.eventType !== -1) {\n        if (item.eventType === 0) {\n          uni.navigateTo({\n            url: '/pages/subPackages/richText/richText?id=' + item.id + '&title=' + item.columnName,\n          });\n        }\n        // 可以根据 linkUrl 是否存在来判断是否需要跳转到链接页面\n        if (item.eventType === 1) {\n          // 跳转到酒店详细\n          const adData = JSON.parse(item.adData)\n          uni.navigateTo({\n            url: '/pages/subPackages/home/detail?id=' + adData.id,\n          });\n        }\n        if (item.eventType === 3) {\n          uni.navigateTo({\n            url: item.linkUrl\n          });\n        }\n        if (item.eventType === 2 && item.linkUrl) {\n          //外部链接\n          // #ifdef H5\n          window.open(item.url, '_blank');\n          // #endif\n          // #ifdef MP-WEIXIN\n          wx.navigateTo({\n            url: `/pages/webview/webview?url=${encodeURIComponent(item.linkUrl)}`\n          });\n          // #endif\n        }\n      }\n    },\n    formatYMD(date) {\n      if (!date) return '';\n      if (typeof date === 'string') return date;\n      const year = date.getFullYear();\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\n      const day = date.getDate().toString().padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    formatDate(dateStr) {\n      if (!dateStr) return '';\n      const date = new Date(dateStr);\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\n      const day = date.getDate().toString().padStart(2, '0');\n      return `${month}月${day}日`;\n    },\n    onDateChange(dates) {\n      if (dates && dates.detail && dates.detail.length === 3) {\n        this.showZeroToSixPrompt = dates.showZeroToSixPrompt;\n        this.iChoseEarlyMorning = dates.iChoseEarlyMorning;\n        const [startDate, endDate, nights] = dates.detail;\n        const today = new Date();\n        today.setHours(0, 0, 0, 0);\n        const checkInDate = new Date(startDate);\n        checkInDate.setHours(0, 0, 0, 0);\n        //判断是否在凌晨1点前，允许选择前一天\n        const now = new Date();\n        const cutoff = new Date();\n        const [cutoffHour, cutoffMinute] = this.cutoffTime.split(':').map(Number);\n        cutoff.setHours(cutoffHour, cutoffMinute, 0, 0);\n        //如果当前时间在截止时间前，允许选择前一天\n        let actualToday = new Date(today);\n        if (now < cutoff) {\n          actualToday.setDate(today.getDate() - 1);\n        }\n        // 如果选择的入住日期在允许的最早日期之前，则使用允许的最早日期\n        if (checkInDate < actualToday) {\n          this.checkInDate = this.formatYMD(actualToday);\n          const newEndDate = new Date(actualToday);\n          newEndDate.setDate(actualToday.getDate() + nights);\n          this.checkOutDate = this.formatYMD(newEndDate);\n        } else {\n          this.checkInDate = startDate;\n          this.checkOutDate = endDate;\n        }\n        this.nightCount = nights;\n        // 保存到本地存储\n        const searchParams = {\n          city: this.currentCity,\n          district: this.currentDistrict,\n          longitude: this.longitude,\n          latitude: this.latitude,\n          checkIn: this.checkInDate,\n          checkOut: this.checkOutDate,\n          nights: this.nightCount,\n          bedCount: this.bedCount,\n          showZeroToSixPrompt: this.showZeroToSixPrompt,\n          iChoseEarlyMorning: this.iChoseEarlyMorning,\n        };\n        uni.setStorageSync('searchParams', searchParams);\n        // 重新加载酒店列表\n        this.loadHotelList(searchParams);\n      }\n    },\n    async getLocation() {\n      try {\n        const locationInfo = await getLocation();\n        this.currentCity = locationInfo.city;\n        this.currentDistrict = locationInfo.district;\n        this.currentAddress = locationInfo.address;\n        this.longitude = locationInfo.longitude;\n        this.latitude = locationInfo.latitude;\n        const oldSearchParams = uni.getStorageSync('searchParams');\n\n        // 验证凌晨时间是否仍然有效\n        const now = new Date();\n        const currentHour = now.getHours();\n        const isCurrentlyEarlyMorning = currentHour >= 0 && currentHour < this.hour;\n        if (oldSearchParams.iChoseEarlyMorning && !isCurrentlyEarlyMorning) {\n          this.iChoseEarlyMorning = false;\n        } else {\n          this.iChoseEarlyMorning = oldSearchParams.iChoseEarlyMorning;\n        }\n        this.showZeroToSixPrompt = oldSearchParams.showZeroToSixPrompt;\n\n        // 更新搜索参数并保存\n        const searchParams = {\n          city: this.currentCity,\n          district: this.currentDistrict,\n          longitude: this.longitude,\n          latitude: this.latitude,\n          checkIn: this.checkInDate,\n          checkOut: this.checkOutDate,\n          nights: this.nightCount,\n          bedCount: this.bedCount,\n          showZeroToSixPrompt: this.showZeroToSixPrompt,\n          iChoseEarlyMorning: this.iChoseEarlyMorning,\n        }\n        uni.setStorageSync('searchParams', searchParams);\n        //只在获取位置成功后加载酒店列表\n        await this.loadHotelList(searchParams);\n      } catch (err) {\n        console.error('获取位置失败：', err);\n        uni.showToast({\n          title: '获取位置失败',\n          icon: 'none'\n        });\n      }\n    },\n    // 处理点击\"我的位置\"\n    handleLocationClick() {\n      this.showDetailAddress = true; // 切换显示状态\n      this.getLocation();\n    },\n    handleBedPickerClose() {\n      this.tempBedCount = this.bedCount;\n      this.showBedPicker = false;\n    },\n    onBedCountConfirm(value) {\n      this.bedCount = value;\n      this.tempBedCount = value;\n      this.showBedPicker = false;\n      const oldSearchParams = uni.getStorageSync('searchParams');\n\n      // 验证凌晨时间是否仍然有效\n      const now = new Date();\n      const currentHour = now.getHours();\n      const isCurrentlyEarlyMorning = currentHour >= 0 && currentHour < this.hour;\n      if (oldSearchParams.iChoseEarlyMorning && !isCurrentlyEarlyMorning) {\n        this.iChoseEarlyMorning = false;\n      } else {\n        this.iChoseEarlyMorning = oldSearchParams.iChoseEarlyMorning;\n      }\n      this.showZeroToSixPrompt = oldSearchParams.showZeroToSixPrompt;\n\n      const searchParams = {\n        city: this.currentCity,\n        district: this.currentDistrict,\n        longitude: this.longitude,\n        latitude: this.latitude,\n        checkIn: this.checkInDate,\n        checkOut: this.checkOutDate,\n        nights: this.nightCount,\n        bedCount: this.bedCount,\n        showZeroToSixPrompt: this.showZeroToSixPrompt,\n        iChoseEarlyMorning: this.iChoseEarlyMorning,\n      };\n      // 保存到本地存储\n      uni.setStorageSync('searchParams', searchParams);\n    },\n    jumpPage(tag) {\n      uni.navigateTo({\n        url: `/pages/subPackages/home/search/index?tagId=${tag.id}`\n      });\n    },\n    handleSearch() {\n      // 保存当前搜索参数到 storage\n      const searchParams = {\n        city: this.currentCity,\n        district: this.currentDistrict,\n        longitude: this.longitude,\n        latitude: this.latitude,\n        checkIn: this.checkInDate,\n        checkOut: this.checkOutDate,\n        nights: this.nightCount,\n        bedCount: this.bedCount,\n        showZeroToSixPrompt: this.showZeroToSixPrompt,\n        iChoseEarlyMorning: this.iChoseEarlyMorning,\n      };\n      // 保存到本地存储\n      uni.setStorageSync('searchParams', searchParams);\n      // 直接跳转到搜索页面\n      uni.navigateTo({\n        url: '/pages/subPackages/home/search/index'\n      });\n    },\n    async haveYouReceivedAnyCoupons() {\n      let params = {\n        page: 1,\n        pageSize: 1,\n        status: 1\n      }\n      const res = await receivingCenter(params);\n      if (res.total > 0) {\n        this.showRedEnvelope = true\n      }\n    },\n    initSearchParams() {\n      const now = new Date();\n      const currentHour = now.getHours();\n      const today = new Date();\n      today.setHours(0, 0, 0, 0);\n      const tomorrow = new Date(today);\n      tomorrow.setDate(today.getDate() + 1);\n      // 获取存储的搜索参数\n      const storedParams = uni.getStorageSync('searchParams');\n      this.showZeroToSixPrompt = storedParams.showZeroToSixPrompt\n      this.iChoseEarlyMorning = storedParams.iChoseEarlyMorning\n      let checkInDate = this.formatYMD(today);\n      let checkOutDate = this.formatYMD(tomorrow);\n\n      // 判断当前是否在凌晨时段\n      const isCurrentlyEarlyMorning = currentHour >= 0 && currentHour < this.hour;\n\n      if (storedParams) {\n        let storedCheckIn = new Date(storedParams.checkIn);\n        let storedCheckOut = new Date(storedParams.checkOut);\n        storedCheckIn.setHours(0, 0, 0, 0);\n        storedCheckOut.setHours(0, 0, 0, 0);\n        if (storedParams.iChoseEarlyMorning) {\n          const yesterday = new Date(today);\n          yesterday.setDate(today.getDate() - 1);\n          // 如果之前选择了凌晨，但现在已经不是凌晨时段了，需要重新初始化\n          if (!isCurrentlyEarlyMorning || storedCheckIn.getTime() !== yesterday.getTime()) {\n            // 选择了凌晨 但是时间校验不是凌晨 进行重新初始化\n            if (storedCheckIn >= today) {\n              checkInDate = storedParams.checkIn;\n              checkOutDate = storedParams.checkOut;\n            } else {\n              // 如果存储的入住日期在今天之前，则使用今天的日期作为入住日期\n              checkInDate = this.formatYMD(today);\n              // 离店日期小于等于入住日期时，自动顺延一天\n              if (storedCheckOut > today) {\n                checkOutDate = storedParams.checkOut;\n              } else {\n                checkOutDate = this.formatYMD(tomorrow);\n              }\n            }\n            // 离店日期小于等于入住日期时，自动顺延一天\n            if (new Date(checkOutDate) <= new Date(checkInDate)) {\n              const nextDay = new Date(checkInDate);\n              nextDay.setDate(nextDay.getDate() + 1);\n              checkOutDate = this.formatYMD(nextDay);\n            }\n            this.iChoseEarlyMorning = false;\n          } else {\n            checkInDate = storedParams.checkIn;\n            checkOutDate = storedParams.checkOut;\n          }\n        } else {\n          // 如果存储的入住日期在今天或之后，则使用存储的日期\n          if (storedCheckIn >= today) {\n            checkInDate = storedParams.checkIn;\n            checkOutDate = storedParams.checkOut;\n          } else {\n            // 如果存储的入住日期在今天之前，则使用今天的日期作为入住日期\n            checkInDate = this.formatYMD(today);\n            // 离店日期小于等于入住日期时，自动顺延一天\n            if (storedCheckOut > today) {\n              checkOutDate = storedParams.checkOut;\n            } else {\n              checkOutDate = this.formatYMD(tomorrow);\n            }\n          }\n          // 离店日期小于等于入住日期时，自动顺延一天\n          if (new Date(checkOutDate) <= new Date(checkInDate)) {\n            const nextDay = new Date(checkInDate);\n            nextDay.setDate(nextDay.getDate() + 1);\n            checkOutDate = this.formatYMD(nextDay);\n          }\n        }\n      }\n      // 更新搜索参数\n      const searchParams = {\n        city: storedParams?.city || this.currentCity,\n        district: storedParams?.district || this.currentDistrict,\n        longitude: storedParams?.longitude || this.longitude,\n        latitude: storedParams?.latitude || this.latitude,\n        checkIn: checkInDate,\n        checkOut: checkOutDate,\n        nights: storedParams?.nights || 1,\n        bedCount: storedParams?.bedCount || 1,\n        showZeroToSixPrompt: this.showZeroToSixPrompt,\n        iChoseEarlyMorning: this.iChoseEarlyMorning,\n      };\n      // 更新组件数据\n      this.currentCity = searchParams.city;\n      this.currentDistrict = searchParams.district;\n      this.checkInDate = searchParams.checkIn;\n      this.checkOutDate = searchParams.checkOut;\n      this.nightCount = storedParams?.nights || 1;\n      this.bedCount = searchParams.bedCount;\n      this.longitude = searchParams.longitude || '';\n      this.latitude = searchParams.latitude || '';\n      // 保存到本地存储\n      uni.setStorageSync('searchParams', searchParams);\n      // 如果没有城市信息，说明是首次加载，需要获取位置\n      if (!this.currentCity) {\n        this.getLocation();\n      } else {\n        this.loadHotelList(searchParams);\n      }\n    },\n    async loadHotelList(params) {\n      if (this.isRequesting) return;\n      this.isRequesting = true;\n      this.loading = true;\n      try {\n        // 确保传入完整的搜索参数\n        const searchParams = {\n          ...params,\n          city: this.currentCity,\n          district: this.currentDistrict,\n          longitude: this.longitude,\n          latitude: this.latitude,\n          checkInDate: this.checkInDate,\n          checkOutDate: this.checkOutDate,\n          nights: this.nightCount,\n          bedCount: this.bedCount,\n          page: 1,\n          pageSize: this.pageSize\n        };\n\n        let res = await fetchHotelListByPage(searchParams);\n        if (!res || !res.records || res.records.length < 1) {\n          console.log(\"该地区没有酒店！\")\n          this.showNoHotelTip = true;\n          delete searchParams.city;\n          delete searchParams.district;\n          res = await fetchHotelListByPage(searchParams);\n        } else {\n          this.showNoHotelTip = false;\n        }\n\n        this.hotels = res.records || [];\n        this.page = res.current || 1;\n        this.total = res.total || 0;\n        this.noMoreData = this.hotels.length >= this.total;\n      } catch (e) {\n        uni.showToast({title: '获取酒店列表失败', icon: 'none'});\n      } finally {\n        this.loading = false;\n        this.isRequesting = false;\n      }\n    },\n// 加载更多酒店数据\n    async loadMoreHotels() {\n      if (this.isRequesting || this.noMoreData) return;\n      this.isRequesting = true;\n      this.loading = true;\n\n      try {\n        const nextPage = this.page + 1;\n        let searchParams = {\n          city: this.currentCity,\n          district: this.currentDistrict,\n          longitude: this.longitude,\n          latitude: this.latitude,\n          checkInDate: this.checkInDate,\n          checkOutDate: this.checkOutDate,\n          nights: this.nightCount,\n          bedCount: this.bedCount,\n          page: nextPage,\n          pageSize: this.pageSize\n        };\n\n        let res = await fetchHotelListByPage(searchParams);\n        // 如果没有数据，尝试删除城市和区域参数再次请求（与loadHotelList保持一致）\n        if (!res || !res.records || res.records.length < 1) {\n          delete searchParams.city;\n          delete searchParams.district;\n          res = await fetchHotelListByPage(searchParams);\n        }\n\n        if (res && res.records) {\n          this.hotels = [...this.hotels, ...res.records];\n          // 修复页码更新逻辑，确保使用服务器返回的当前页码\n          this.page = res.current || nextPage;\n          this.total = res.total || this.total;\n          // 修复\"没有更多数据\"判断逻辑\n          this.noMoreData = this.hotels.length >= this.total;\n        }\n      } catch (e) {\n        uni.showToast({title: '加载更多失败', icon: 'none'});\n      } finally {\n        this.loading = false;\n        this.isRequesting = false;\n      }\n    },\n    goToMemberRights() {\n      uni.navigateTo({\n        url: '/pages/subPackages/user/member-right'\n      });\n    },\n    goToCitySelect() {\n      const that = this;\n      uni.navigateTo({\n        url: '/pages/subPackages/home/city-select/index',\n        events: {\n          citySelected: (city) => {\n            if (city && city.name) {\n              that.showDetailAddress = false;\n              that.currentProvince = city.province || ''; // 省份\n              that.currentCity = city.displayName || city.name;//城市\n              that.currentDistrict = city.district || '';  // 区\n              that.longitude = city.longitude || '';\n              that.latitude = city.latitude || '';\n              // 更新搜索参数\n              const oldSearchParams = uni.getStorageSync('searchParams');\n\n              // 验证凌晨时间是否仍然有效\n              const now = new Date();\n              const currentHour = now.getHours();\n              const isCurrentlyEarlyMorning = currentHour >= 0 && currentHour < this.hour;\n              if (oldSearchParams.iChoseEarlyMorning && !isCurrentlyEarlyMorning) {\n                this.iChoseEarlyMorning = false;\n              } else {\n                this.iChoseEarlyMorning = oldSearchParams.iChoseEarlyMorning;\n              }\n              this.showZeroToSixPrompt = oldSearchParams.showZeroToSixPrompt;\n\n              const searchParams = {\n                province: that.currentProvince,\n                city: that.currentCity,\n                district: that.currentDistrict,\n                longitude: that.longitude,\n                latitude: that.latitude,\n                checkIn: that.checkInDate,\n                checkOut: that.checkOutDate,\n                nights: that.nightCount,\n                bedCount: that.bedCount,\n                showZeroToSixPrompt: this.showZeroToSixPrompt,\n                iChoseEarlyMorning: this.iChoseEarlyMorning,\n              };\n              // 保存到本地存储\n              uni.setStorageSync('searchParams', searchParams);\n              // 重新加载酒店列表\n              // that.loadHotelList(searchParams);\n            }\n          }\n        },\n        success: (res) => {\n          // 传递当前位置信息\n          res.eventChannel.emit('getCurrentLocation', that.currentCity);\n        }\n      });\n    },\n    scrollToTop() {\n      uni.pageScrollTo({\n        scrollTop: 0,\n        duration: 300\n      });\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.other-tinkerbells {\n  margin-top: 80rpx;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 24rpx;\n\n  .other-tinkerbells-l {\n    width: 130rpx;\n    height: 2rpx;\n    border: 2rpx solid;\n    border-image: linear-gradient(270deg, rgba(151, 151, 151, 1), rgba(243, 244, 246, 0)) 2 2;\n  }\n\n  .other-tinkerbells-r {\n    width: 130rpx;\n    height: 2rpx;\n    border: 2rpx solid;\n    border-image: linear-gradient(270deg, rgba(243, 244, 246, 0), rgba(151, 151, 151, 1)) 2 2;\n  }\n\n  .other-tinkerbells-c {\n    font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n    font-weight: 400;\n    font-size: 28rpx;\n    color: #6D7278;\n    line-height: 28rpx;\n    text-align: center;\n    font-style: normal;\n  }\n\n  .other-tinkerbells-l {\n\n  }\n}\n\n::v-deep .empty-state {\n  margin-top: 50rpx !important;\n}\n\n.custom-title {\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0);\n  color: #FFF;\n  width: auto;\n  height: 190rpx;\n  top: 202rpx;\n  left: 56rpx;\n  right: 0;\n\n  .title-text {\n    font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n    font-weight: 600;\n    font-size: 60rpx;\n    color: #FFFFFF;\n    line-height: 60rpx;\n    text-align: left;\n    font-style: normal;\n  }\n\n  .subtitle {\n    margin-top: 20rpx;\n    font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n    font-weight: 500;\n    font-size: 48rpx;\n    color: #FFFFFF;\n    line-height: 48rpx;\n    text-align: left;\n    font-style: normal;\n  }\n\n  .btn {\n    width: 152rpx;\n    height: 40rpx;\n    background: #FFFFFF;\n    border-radius: 20rpx;\n    font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n    font-weight: 500;\n    font-size: 24rpx;\n    color: #FF3F1A;\n    line-height: 40rpx;\n    text-align: center;\n    font-style: normal;\n    margin-top: 22rpx;\n  }\n}\n\n.empty-state {\n  width: 370rpx;\n  height: 200rpx;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin-top: 100rpx;\n  margin-bottom: 40rpx;\n}\n\n.empty-icon {\n  width: 100%;\n  height: 100vh;\n}\n\n.empty-text {\n  margin: auto;\n  width: auto;\n  height: 24rpx;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 400;\n  font-size: 24rpx;\n  color: #A2A2A8;\n  line-height: 24rpx;\n  text-align: center;\n  font-style: normal;\n}\n\n.container {\n  position: relative;\n  min-height: 100vh;\n  background: #F3F4F6;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n.home-banner {\n  width: 100%;\n  background: transparent;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n::v-deep .uni-navbar {\n  background-color: transparent !important;\n  position: absolute;\n}\n\n.banner-swiper {\n  width: 100%;\n  overflow: hidden;\n}\n\n.banner-img {\n  width: 100%;\n  display: block;\n  border-bottom-left-radius: 32rpx;\n  border-bottom-right-radius: 32rpx;\n  overflow: hidden;\n  background: transparent;\n}\n\n.main-content {\n  position: relative;\n  top: -254rpx;\n  z-index: 1;\n  padding: 0 24rpx 0 24rpx;\n}\n\n/*搜索卡片样式 */\n::v-deep .search-card {\n  border-radius: 28rpx;\n  overflow: hidden;\n}\n\n.custom-navbar-title {\n  width: 100%;\n  height: 100rpx;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 32rpx;\n  color: #FFFFFF;\n  line-height: 100rpx;\n  text-align: center;\n  font-style: normal;\n}\n\n.calendar-page {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 999;\n  background-color: #fff;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch; /* iOS滚动优化 */\n  transform: translateY(100%);\n  transition: transform 0.3s ease-out;\n}\n\n.calendar-page.show {\n  transform: translateY(0);\n}\n\n.page-hidden {\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.3s ease-out;\n}\n\n.page-visible {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n.no-hotel-text {\n  margin-left: 8rpx;\n  font-size: 26rpx;\n}\n\n.no-hotel-tip::before,\n.no-hotel-tip::after {\n  content: '';\n  flex: 1;\n  height: 1px;\n  background-color: #ddd;\n}\n\n.no-hotel-tip::before {\n  margin-right: 10rpx;\n}\n\n.no-hotel-tip::after {\n  margin-left: 10rpx;\n}\n\n/*弹窗广告样式 */\n.popup-ad-mask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 10000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.popup-ad-container {\n  position: relative;\n  width: 90%;\n  height: 40%;\n}\n\n.popup-ad-image {\n  width: 100%;\n  height: 100%;\n  border-radius: 16rpx;\n}\n\n.popup-ad-close {\n  position: absolute;\n  bottom: -90rpx;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 60rpx;\n  height: 60rpx;\n  background-color: rgba(0, 0, 0, 0.6);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.popup-ad-btn {\n  width: 40%;\n  margin: auto;\n  height: 92rpx;\n  background: #EE781F;\n  border-radius: 50rpx;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 32rpx;\n  color: #FFFFFF;\n  line-height: 92rpx;\n  text-align: center;\n  font-style: normal;\n}\n</style>","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=71e217db&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=71e217db&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1769665553381\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}