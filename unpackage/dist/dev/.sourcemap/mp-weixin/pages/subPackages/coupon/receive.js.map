{"version":3,"sources":["webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/coupon/index.vue?1f0d","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/coupon/index.vue?e568","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/coupon/index.vue?3d7e","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/coupon/index.vue?8947","uni-app:///pages/coupon/index.vue","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/coupon/index.vue?8103","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/coupon/index.vue?3d12","uni-app:///main.js","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/coupon/receive.vue?6aa4","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/coupon/receive.vue?3311","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/coupon/receive.vue?e4ad","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/coupon/receive.vue?89a6","uni-app:///pages/subPackages/coupon/receive.vue","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/coupon/receive.vue?e13b","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/coupon/receive.vue?fbb3"],"names":["name","components","UniNavBar","EmptyState","CustomTabbar","onPullDownRefresh","uni","onLoad","frontColor","backgroundColor","withShareTicket","menus","onShow","pageConfig","enablePullDownRefresh","data","tabs","label","value","currentTab","coupons","currentPage","pageSize","total","hasMore","loading","tabLoading","refreshing","scrollViewHeight","computed","watch","handler","immediate","created","beforeDestroy","mounted","setTimeout","methods","calculateScrollViewHeight","query","goBack","goToReceiveCenter","url","onRefresh","formatDate","resetAndLoadData","listData","params","page","status","res","console","title","icon","loadMore","toggleRule","coupon","drawShareImage","ctx","amountText","canvasId","success","resolve","fail","reject","onShareTimeline","couponIndex","shareImagePath","desc","path","imageUrl","onShareAppMessage","wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","spread","receiving","isItAvailable","receiveStatus","back","exampleCouponInfo","userInfo","receiveCoupon","redirectUrl","business","doReceive","result","duration"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,kRAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClHA;AAAA;AAAA;AAAA;AAAm0B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACmNv1B;AAGA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAA;EACAC;IAAAC;IAAAC;IAAAC;EAAA;EACAC;IACAC;IACA;EACA;EACAC;IACAD;MACAE;MACAC;IACA;IACAH;MACAI;MACAC;IACA;EACA;EACAC;IACA;EACA;EACA;EACAC;IACAC;EACA;EACAC;IACA;MACAC,OACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;EACAC;IACAX;MACAY;QAAA;UAAA;YAAA;cAAA;gBAAA;kBACA;kBACA;kBACA;kBAAA;kBAAA,OACA;gBAAA;kBACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACA;QAAA;UAAA;QAAA;QAAA;MAAA;MACAC;IACA;EACA;EACAC;IACA;EAAA,CACA;EACAC;IACA;IACA5B;IACA;EACA;EACA6B;IAAA;IACA;IACA;IACA7B;MACA8B;QACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MAAA;MACA;MACA;MACAC;MACA;MACAA;MACA;MACAA;MAEAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACAnC;QACAoC;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA;;gBAEA;gBAAA;gBAGAC;kBACAC;kBACA1B;kBACA2B;gBACA;gBAAA;gBAAA,OAEA;cAAA;gBAAAC;gBAEA;kBACA;kBACA;gBACA;kBACA;kBACA;gBACA;;gBAEA;gBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAC;gBACA7C;kBACA8C;kBACAC;gBACA;cAAA;gBAAA;gBAEA;gBACA;gBACA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAC;MACA;QACA;MACA;MAEA;MACA;IACA;IACAC;MACAC;IACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,kCACA;kBACA;kBACA;kBACA;;kBAEA;kBACAC;;kBAEA;kBACAA;kBACAA;kBACAA;;kBAEA;kBACAA;kBACAA;;kBAEA;kBACAA;kBACAA;kBAEA;kBACA;oBACAC;kBACA;oBACAA;kBACA;kBACA;kBACAD;kBACAA;kBACAA;;kBAEA;kBACAA;kBACAA;kBACAA;;kBAEA;kBACAA;kBACAA;kBACA;kBACAA;kBACA;kBACA;kBACAA;kBACA;kBACAA;oBACApD;sBACAsD;sBACAC;wBACAC;sBACA;sBACAC;wBACAC;sBACA;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACAf;kBAAA;kBAAA;gBAAA;gBACAgB;gBACAV;gBAAA;gBAAA;gBAAA,OAGA;cAAA;gBAAAW;gBAAA,kCACA;kBACAf;kBACAgB;kBACAC;kBACAC;gBACA;cAAA;gBAAA;gBAAA;gBAEAnB;gBACA;gBAAA,kCACA;kBACAC;kBACAgB;kBACAC;kBACAC;gBACA;cAAA;gBAAA,kCAGA;kBACAlB;kBACAgB;kBACAC;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACArB;kBAAA;kBAAA;gBAAA;gBACAgB;gBACAV;gBAAA;gBAAA;gBAAA,OAGA;cAAA;gBAAAW;gBAAA,kCACA;kBACAf;kBACAgB;kBACAC;kBACAC;gBACA;cAAA;gBAAA;gBAAA;gBAEAnB;gBACA;gBAAA,kCACA;kBACAC;kBACAgB;kBACAC;kBACAC;gBACA;cAAA;gBAAA,kCAGA;kBACAlB;kBACAgB;kBACAC;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACxgBA;AAAA;AAAA;AAAA;AAA0jD,CAAgB,07CAAG,EAAC,C;;;;;;;;;;;ACA9kD;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAGA;AACA;AAHA;AACAE,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AAC2D;AACL;AACsC;;;AAG5F;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,kRAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5CA;AAAA;AAAA;AAAA;AAAo1B,CAAgB,qyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACiEx2B;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACA7D;IACA;MACAyC;MACAqB;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;EACAzE;IACAD;MACAE;MACAC;IACA;IACAH;MACAI;MACAC;IACA;IACA;MACA;MACA;IACA;EACA;EACAC;IAAA;IACA;IACA;IACA;IACA;MACAN;MACA;MACA8B;QACA;MACA;IACA;EACA;EACAC;IACA4C;MACA;IACA;IACArC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAsC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBACA;gBACAC;gBACA;kBACA;gBACA;gBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KAEA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA,IAIA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA9E;kBACAoC;kBACA2C;kBACAtC;oBACA8B;oBACAS;kBACA;gBACA;cAAA;gBAAA;cAAA;gBAAA;gBAAA,OAIA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA,IAIA;kBAAA;kBAAA;gBAAA;gBACAjF;kBACA8C;kBACAC;gBACA;gBAAA;cAAA;gBAIA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAAmC;gBACAlF;kBACA8C;kBACAC;kBACAoC;kBACA5B;oBACAzB;sBACA9B;wBACAoC;sBACA;oBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEApC;gBACAA;kBACA8C;kBACAC;gBACA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAI;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,kCACA;kBACA;kBACA;kBACA;;kBAEA;kBACAC;;kBAEA;kBACAA;kBACAA;kBACAA;;kBAEA;kBACAA;kBACAA;;kBAEA;kBACAA;kBACAA;kBAEA;kBACA;oBACAC;kBACA;oBACAA;kBACA;kBACA;kBACAD;kBACAA;kBACAA;;kBAEA;kBACAA;kBACAA;kBACAA;;kBAEA;kBACAA;kBACAA;kBACA;kBACAA;kBACA;kBACA;kBACAA;kBACA;kBACAA;oBACApD;sBACAsD;sBACAC;wBACAC;sBACA;sBACAC;wBACAC;sBACA;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACAf;kBAAA;kBAAA;gBAAA;gBACAM;gBAAA;gBAAA;gBAAA,OAGA;cAAA;gBAAAW;gBAAA,kCACA;kBACAf;kBACAgB;kBACAC;kBACAC;gBACA;cAAA;gBAAA;gBAAA;gBAEAnB;gBACA;gBAAA,kCACA;kBACAC;kBACAgB;kBACAC;kBACAC;gBACA;cAAA;gBAAA,kCAGA;kBACAlB;kBACAgB;kBACAC;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACArB;kBAAA;kBAAA;gBAAA;gBACAM;gBAAA;gBAAA;gBAAA,OAGA;cAAA;gBAAAW;gBAAA,kCACA;kBACAf;kBACAgB;kBACAC;kBACAC;gBACA;cAAA;gBAAA;gBAAA;gBAEAnB;gBACA;gBAAA,kCACA;kBACAC;kBACAgB;kBACAC;kBACAC;gBACA;cAAA;gBAAA,kCAGA;kBACAlB;kBACAgB;kBACAC;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC1TA;AAAA;AAAA;AAAA;AAAulD,CAAgB,47CAAG,EAAC,C;;;;;;;;;;;ACA3mD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/subPackages/coupon/receive.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=314aabbc&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=314aabbc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"314aabbc\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/coupon/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=314aabbc&scoped=true&\"","var components\ntry {\n  components = {\n    uniNavBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar\" */ \"@/uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.coupons, function (coupon, __i0__) {\n    var $orig = _vm.__get_orig(coupon)\n    var m0 =\n      coupon.businessType === 0 && (coupon.status === 2 || coupon.status === 3)\n        ? _vm.formatDate(coupon.redPacket.startTime)\n        : null\n    var m1 =\n      coupon.businessType === 0 && (coupon.status === 2 || coupon.status === 3)\n        ? _vm.formatDate(coupon.redPacket.endTime)\n        : null\n    var m2 =\n      coupon.businessType === 0 && !(coupon.status === 2 || coupon.status === 3)\n        ? _vm.formatDate(coupon.redPacket.startTime)\n        : null\n    var m3 =\n      coupon.businessType === 0 && !(coupon.status === 2 || coupon.status === 3)\n        ? _vm.formatDate(coupon.redPacket.endTime)\n        : null\n    var g0 =\n      coupon.businessType === 0 && coupon.status === 1\n        ? _vm.coupons.indexOf(coupon)\n        : null\n    var m4 =\n      coupon.businessType === 1 && (coupon.status === 1 || coupon.status === 2)\n        ? _vm.formatDate(coupon.redPacket.startTime)\n        : null\n    var m5 =\n      coupon.businessType === 1 && (coupon.status === 1 || coupon.status === 2)\n        ? _vm.formatDate(coupon.redPacket.endTime)\n        : null\n    var m6 =\n      coupon.businessType === 1 && !(coupon.status === 1 || coupon.status === 2)\n        ? _vm.formatDate(coupon.redPacket.startTime)\n        : null\n    var m7 =\n      coupon.businessType === 1 && !(coupon.status === 1 || coupon.status === 2)\n        ? _vm.formatDate(coupon.redPacket.endTime)\n        : null\n    return {\n      $orig: $orig,\n      m0: m0,\n      m1: m1,\n      m2: m2,\n      m3: m3,\n      g0: g0,\n      m4: m4,\n      m5: m5,\n      m6: m6,\n      m7: m7,\n    }\n  })\n  var g1 =\n    !_vm.tabLoading && !_vm.refreshing && !(_vm.loading && _vm.currentPage > 1)\n      ? !_vm.hasMore && _vm.coupons.length > 0\n      : null\n  var g2 =\n    !_vm.tabLoading &&\n    !_vm.refreshing &&\n    !(_vm.loading && _vm.currentPage > 1) &&\n    !g1\n      ? !_vm.loading && !_vm.coupons.length\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event, tab) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        tab = _temp2.tab\n      var _temp, _temp2\n      _vm.currentTab = tab.value\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g1: g1,\n        g2: g2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"page\">\n    <view class=\"fixed-header\">\n      <uni-nav-bar\n          backgroundColor=\"#FFFFFF\"\n          :shadow=\"false\"\n          :border=\"false\"\n          status-bar\n          left-icon=\"left\"\n          @clickLeft=\"goBack\"\n      >\n        <template #default>\n          <text class=\"nav-title\">我的红包</text>\n        </template>\n      </uni-nav-bar>\n      <view class=\"tabs\">\n        <text\n            v-for=\"(tab, idx) in tabs\"\n            :key=\"tab.value\"\n            :class=\"['tab', {active: currentTab === tab.value}]\"\n            @click=\"currentTab = tab.value\"\n        >{{ tab.label }}\n        </text>\n      </view>\n    </view>\n    <!-- 红包列表 begin -->\n    <!-- Tab切换时的加载遮罩 -->\n    <view v-if=\"tabLoading\" class=\"tab-loading-overlay\">\n      <view class=\"tab-loading-content\">\n        <view class=\"tab-loading-spinner\">\n          <view class=\"spinner-ring\"></view>\n          <view class=\"spinner-ring\"></view>\n          <view class=\"spinner-ring\"></view>\n        </view>\n        <text class=\"tab-loading-text\">正在切换...</text>\n      </view>\n    </view>\n    <view class=\"receive\" v-if=\"true\">\n      <view class=\"receive-banner\" @click=\"goToReceiveCenter\">\n        <view class=\"banner-content\">\n          <view class=\"banner-content-l\">\n            <view class=\"banner-icon\"/>\n            <text class=\"banner-text\">红包领取中心，下单更优惠</text>\n          </view>\n          <view class=\"banner-content-r\">\n            <view class=\"banner-arrow\">前去领取</view>\n            <view class=\"banner-arrow-icon\"/>\n          </view>\n        </view>\n      </view>\n      <view class=\"receive-banner-bottom\"/>\n    </view>\n    <scroll-view\n        class=\"coupon-list\"\n        scroll-y\n        @scrolltolower=\"loadMore\"\n        enable-back-to-top\n        refresher-enabled\n        :refresher-triggered=\"refreshing\"\n        @refresherrefresh=\"onRefresh\"\n        :style=\"{ height: scrollViewHeight + 'px' }\"\n    >\n      <view class=\"coupon-base-card\" v-for=\"coupon in coupons\" :key=\"coupon.id\">\n        <view class=\"coupon-card\">\n          <view class=\"coupon-item\" :class=\"{'lb-item': coupon.businessType === 1}\"\n                @click.stop=\"onCouponSelect(coupon.id)\">\n            <view class=\"coupon-info\" v-if=\"coupon.businessType === 0\">\n              <view class=\"coupon-info-l\" v-if=\"coupon.status ===2 || coupon.status ===3\">\n                <view class=\"coupon-info-l-title used-text\">\n                  {{ coupon.redPacket.name }}\n                </view>\n                <view class=\"coupon-info-l-time used-text\">\n                  有效期{{ formatDate(coupon.redPacket.startTime) }}-{{ formatDate(coupon.redPacket.endTime) }}\n                </view>\n                <view class=\"coupon-info-l-tag\">\n                  <text v-if=\"coupon.redPacket.minSpend > 0\" class=\"tag used-tag used-text used-tag\">满{{\n                      coupon.redPacket.minSpend\n                    }}元可用\n                  </text>\n                  <text v-else class=\"tag used-tag used-text\">无门槛立减</text>\n                  <text v-if=\"coupon.redPacket.scopeType === 1\"\n                        class=\"tag used-tag used-text\">适用于全部门店\n                  </text>\n                  <text v-else class=\"tag used-tag used-text\">适用于指定门店</text>\n                  <text v-if=\"coupon.redPacketRule.stayDays > 0\" class=\"tag\">\n                    适用于连续{{ coupon.redPacketRule.stayDays }}晚及以上订单\n                  </text>\n                </view>\n              </view>\n              <view class=\"coupon-info-l\" v-else>\n                <view class=\"coupon-info-l-title\">\n                  {{ coupon.redPacket.name }}\n                </view>\n                <view class=\"coupon-info-l-time\">\n                  有效期{{ formatDate(coupon.redPacket.startTime) }}-{{ formatDate(coupon.redPacket.endTime) }}\n                </view>\n                <view class=\"coupon-info-l-tag\">\n                  <text v-if=\"coupon.redPacket.minSpend > 0\" class=\"tag\">满{{\n                      coupon.redPacket.minSpend\n                    }}元可用\n                  </text>\n                  <text v-else class=\"tag\">无门槛立减</text>\n                  <text v-if=\"coupon.redPacket.scopeType === 1\"\n                        class=\"tag\">适用于全部门店\n                  </text>\n                  <text v-else class=\"tag\">适用于指定门店</text>\n                  <text v-if=\"coupon.redPacketRule.stayDays > 0\" class=\"tag\">\n                    适用于连续{{ coupon.redPacketRule.stayDays }}晚及以上订单\n                  </text>\n                </view>\n              </view>\n              <view class=\"coupon-info-r\">\n                <view class=\"coupon-info-r-amount-box-t\">\n                  <view class=\"coupon-info-r-amount-box\">\n                    <view class=\"coupon-info-r-amount\">{{ coupon.redPacket.amount }}</view>\n                    <view class=\"coupon-info-r-unit\">元</view>\n                  </view>\n                </view>\n                <button v-if=\"coupon.status === 1\" plain=\"true\" class=\"coupon-info-r-amount-box-b\" open-type=\"share\"\n                        :data-coupon-index=\"coupons.indexOf(coupon)\">赠送\n                </button>\n              </view>\n            </view>\n            <view class=\"coupon-info\" v-if=\"coupon.businessType === 1\">\n              <view class=\"coupon-info-l\" v-if=\"coupon.status ===1 || coupon.status ===2\">\n                <view class=\"coupon-info-l-l\">\n                  <image class=\"coupon-info-l-icon\" src=\"https://www.zxd-hotel.xin/zxdhotel/icon/lb2.png\"/>\n                </view>\n                <view class=\"coupon-info-l-r\">\n                  <view class=\"coupon-info-l-title used-text\" style=\"top: 60rpx\">\n                    {{ coupon.redPacket.name }}\n                  </view>\n                  <view class=\"coupon-info-l-time used-text\" style=\"top: 108rpx\">\n                    有效期{{ formatDate(coupon.redPacket.startTime) }}-{{ formatDate(coupon.redPacket.endTime) }}\n                  </view>\n                </view>\n              </view>\n              <view class=\"coupon-info-l\" v-else>\n                <view class=\"coupon-info-l-l\">\n                  <image class=\"coupon-info-l-icon\" src=\"https://www.zxd-hotel.xin/zxdhotel/icon/lb2.png\"/>\n                </view>\n                <view class=\"coupon-info-l-r\">\n                  <view class=\"coupon-info-l-title\" style=\"top: 60rpx\">\n                    {{ coupon.redPacket.name }}\n                  </view>\n                  <view class=\"coupon-info-l-time\" style=\"top: 108rpx\">\n                    有效期{{ formatDate(coupon.redPacket.startTime) }}-{{ formatDate(coupon.redPacket.endTime) }}\n                  </view>\n                </view>\n              </view>\n            </view>\n            <template v-if=\"coupon.businessType === 0\">\n              <view v-if=\"coupon.soonExpire\" class=\"coupon-tag-expired\"></view>\n              <view v-if=\"coupon.soonExpire\" class=\"coupon-tag-expired-text\">即将到期</view>\n            </template>\n            <template v-if=\"coupon.businessType === 1 && coupon.status ===0 \">\n              <template v-if=\"coupon.soonExpire\">\n                <view class=\"coupon-tag-expired\"></view>\n                <view class=\"coupon-tag-expired-text\">即将到期</view>\n              </template>\n              <template v-else>\n                <view class=\"coupon-tag-expired toBeUsed\"></view>\n                <view class=\"coupon-tag-expired-text\">待使用</view>\n              </template>\n            </template>\n            <view v-if=\"coupon.businessType === 0\">\n              <view v-if=\"coupon.status ===2\" class=\"coupon-tag-expired used\"/>\n              <view v-if=\"coupon.status ===3\" class=\"coupon-tag-expired expired\"/>\n            </view>\n            <view v-if=\"coupon.businessType === 1\">\n              <view v-if=\"coupon.status ===1\" class=\"coupon-tag-expired lb-used\"/>\n              <view v-if=\"coupon.status ===2\" class=\"coupon-tag-expired lb-expired\"/>\n            </view>\n          </view>\n        </view>\n        <view v-if=\"coupon.redPacketRule.rule\" class=\"coupon-item-rule-desc\">\n          {{ coupon.redPacketRule.rule }}\n        </view>\n        <view v-if=\"coupon.businessType === 1 && coupon.status === 0\" class=\"coupon-item-rule-desc\">\n          在酒店前台进行兑换\n        </view>\n      </view>\n      <!-- 加载状态提示 -->\n      <view v-if=\"!tabLoading && !refreshing\" class=\"load-more-status\">\n        <view v-if=\"loading && currentPage > 1\" class=\"loading\">\n          <view class=\"loading-icon\"></view>\n          <text class=\"loading-text\">加载中...</text>\n        </view>\n        <view v-else-if=\"!hasMore && coupons.length > 0\" class=\"no-more\">\n          <!--          <view class=\"no-more-line\"></view>-->\n          <text class=\"no-more-text\">已经到底啦</text>\n          <!--          <view class=\"no-more-line\"></view>-->\n        </view>\n        <EmptyState\n            v-else-if=\"!loading && !coupons.length\"\n            text=\"暂无红包\"\n        />\n      </view>\n      <view class=\"coupon-item-null\">\n      </view>\n    </scroll-view>\n    <!-- 红包列表 end -->\n\n    <CustomTabbar :current=\"'coupon'\"/>\n    <!-- 添加隐藏的canvas -->\n    <canvas canvas-id=\"shareCanvas\" class=\"share-canvas\"></canvas>\n  </view>\n</template>\n\n<script>\nimport CustomTabbar from \"@/components/CustomTabbar.vue\";\nimport {myRedEnvelope} from \"../../common/api\";\nimport EmptyState from \"../../components/EmptyState.vue\";\nimport UniNavBar from \"../../uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.vue\";\nimport {pageBack} from \"../../common/redirect\";\n\nexport default {\n  name: 'CouponPage',\n  components: {UniNavBar, EmptyState, CustomTabbar},\n  onPullDownRefresh() {\n    uni.stopPullDownRefresh();\n    return false;\n  },\n  onLoad() {\n    uni.setNavigationBarColor({\n      frontColor: '#000000',\n      backgroundColor: '#FFFFFF'\n    });\n    uni.showShareMenu({\n      withShareTicket: true,\n      menus: ['shareAppMessage', 'shareTimeline']\n    });\n  },\n  onShow() {\n    this.listData();\n  },\n  // 页面配置\n  pageConfig: {\n    enablePullDownRefresh: false\n  },\n  data() {\n    return {\n      tabs: [\n        {label: '可用', value: 1},\n        {label: '已使用', value: 2},\n        {label: '已过期', value: 3}\n      ],\n      currentTab: 1,\n      coupons: [],\n      // 分页相关\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      hasMore: true,\n      loading: false,\n      tabLoading: false, // 专门用于tab切换时的加载状态\n      refreshing: false, // 专门用于下拉刷新的状态\n      scrollViewHeight: 300 // 添加scroll-view高度变量\n    }\n  },\n  computed: {},\n  watch: {\n    currentTab: {\n      handler: async function () {\n        // 当切换tab时重新获取数据\n        this.tabLoading = true;\n        // 添加一个小延迟，让切换动画更自然\n        await this.$nextTick();\n        this.resetAndLoadData();\n      },\n      immediate: true // 立即执行，处理初始化\n    }\n  },\n  created() {\n    // 不再需要监听 tabbarChanged 事件\n  },\n  beforeDestroy() {\n    // 移除屏幕旋转监听\n    uni.offWindowResize();\n    // 不再需要移除事件监听\n  },\n  mounted() {\n    this.calculateScrollViewHeight();\n    // 监听屏幕旋转或窗口大小变化\n    uni.onWindowResize(() => {\n      setTimeout(() => {\n        this.calculateScrollViewHeight();\n      }, 100);\n    });\n  },\n  methods: {\n    // 计算scroll-view高度\n    calculateScrollViewHeight() {\n      const query = uni.createSelectorQuery().in(this);\n      // 查询固定头部高度\n      query.select('.fixed-header').boundingClientRect();\n      // 查询横幅区域高度\n      query.select('.receive').boundingClientRect();\n      // 查询tabbar高度\n      query.select('.tabbar').boundingClientRect();\n\n      query.exec((res) => {\n        const headerHeight = res[0] ? res[0].height : 0;\n        const bannerHeight = res[1] ? res[1].height : 0;\n        const tabbarHeight = res[2] ? res[2].height : 0;\n        // 获取屏幕可用高度\n        const systemInfo = uni.getSystemInfoSync();\n        const screenHeight = systemInfo.windowHeight;\n        // 计算scroll-view高度 = 屏幕高度 - 各固定区域高度\n        const scrollViewHeight = screenHeight - headerHeight - bannerHeight - tabbarHeight;\n        this.scrollViewHeight = scrollViewHeight > 100 ? scrollViewHeight : screenHeight - 100;\n      });\n    },\n    goBack() {\n      pageBack()\n    },\n    goToReceiveCenter() {\n      uni.navigateTo({\n        url: '/pages/subPackages/coupon/receiving-center'\n      });\n    },\n    // 下拉刷新\n    onRefresh() {\n      this.refreshing = true;\n      this.resetAndLoadData();\n    },\n    formatDate(dateStr) {\n      if (!dateStr) return '';\n      const date = new Date(dateStr);\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\n      const day = date.getDate().toString().padStart(2, '0');\n      const year = date.getFullYear().toString();\n      return `${year}.${month}.${day}`;\n    },\n    // 重置分页数据并加载第一页\n    resetAndLoadData() {\n      this.currentPage = 1;\n      this.hasMore = true;\n      this.total = 0;\n      // 不立即清空数据，等新数据到了再替换\n      this.listData();\n    },\n    async listData() {\n      if (this.loading) return; // 防止重复请求\n\n      this.loading = true;\n\n      try {\n        let params = {\n          page: this.currentPage,\n          pageSize: this.pageSize,\n          status: this.currentTab\n        }\n\n        const res = await myRedEnvelope(params);\n\n        if (this.currentPage === 1) {\n          // 第一页，直接赋值\n          this.coupons = res.records || [];\n        } else {\n          // 追加数据\n          this.coupons = [...this.coupons, ...(res.records || [])];\n        }\n\n        // 更新分页信息\n        this.total = res.total || 0;\n        this.hasMore = this.coupons.length < this.total;\n\n      } catch (error) {\n        console.error('加载数据失败:', error);\n        uni.showToast({\n          title: '加载失败，请重试',\n          icon: 'none'\n        });\n      } finally {\n        this.loading = false;\n        this.tabLoading = false; // 结束tab切换加载状态\n        this.refreshing = false; // 结束下拉刷新状态\n      }\n    },\n    // 加载更多数据\n    loadMore() {\n      if (!this.hasMore || this.loading) {\n        return;\n      }\n\n      this.currentPage++;\n      this.listData();\n    },\n    toggleRule(coupon) {\n      coupon.isRuleExpanded = !coupon.isRuleExpanded;\n    },\n    // 绘制分享图片\n    async drawShareImage(coupon) {\n      return new Promise((resolve, reject) => {\n        const ctx = uni.createCanvasContext('shareCanvas', this);\n        const canvasWidth = 500;\n        const canvasHeight = 400;\n\n        // 绘制背景图\n        ctx.drawImage('/static/share/coupon_share.png', 0, 0, canvasWidth, canvasHeight);\n\n        // 绘制金额\n        ctx.setFillStyle('#E81B2D');\n        ctx.setTextAlign('center');\n        ctx.setTextBaseline('middle');\n\n        // 绘制¥符号\n        ctx.setFontSize(30);\n        ctx.fillText('¥', canvasWidth / 2 - 40, 110);\n\n        // 绘制金额数字\n        ctx.setFontSize(52);\n        ctx.fillText(coupon.redPacket.amount, canvasWidth / 2 + 5, 102);\n\n        let amountText = \"\"\n        if (coupon.redPacket.minSpend > 0) {\n          amountText = \"满\" + coupon.redPacket.minSpend + \"元可用\";\n        } else {\n          amountText = \"无门槛立减\";\n        }\n        // 绘制使用条件\n        ctx.setFillStyle('#19191A');\n        ctx.setFontSize(24);\n        ctx.fillText(amountText, canvasWidth / 2, 148);\n\n        // 绘制标题\n        ctx.setFillStyle('#FFFFFF');\n        ctx.setFontSize(28);\n        ctx.fillText(coupon.redPacket.name, canvasWidth / 2, 240);\n\n        // 绘制有效期\n        ctx.setFontSize(20);\n        ctx.setFillStyle('#FFFFFF');\n        const time = this.formatDate(coupon.endTime)\n        ctx.fillText(`有效期至${time}`, canvasWidth / 2, 280);\n        // 绘制适用范围\n        const text = coupon.redPacket.scopeType === 1 ? '适用于全部门店' : '适用于指定门店';\n        ctx.fillText(text, canvasWidth / 2, 310);\n        // 执行绘制\n        ctx.draw(false, () => {\n          uni.canvasToTempFilePath({\n            canvasId: 'shareCanvas',\n            success: (res) => {\n              resolve(res.tempFilePath);\n            },\n            fail: (err) => {\n              reject(err);\n            }\n          }, this);\n        });\n      });\n    },\n\n    // 分享到朋友圈\n    async onShareTimeline(res) {\n      if (res.from === 'button') {\n        const couponIndex = res.target.dataset.couponIndex;\n        const coupon = this.coupons[couponIndex];\n        try {\n          // 生成分享图片\n          const shareImagePath = await this.drawShareImage(coupon);\n          return {\n            title: '您有一份来自好友的红包分享，请查收！',\n            desc: `您的好友分享了一个${coupon.redPacket.amount}元红包`,\n            path: `/pages/subPackages/coupon/receive?spread=${coupon.id}`,\n            imageUrl: shareImagePath\n          }\n        } catch (err) {\n          console.error('生成分享图片失败:', err);\n          // 使用默认图片\n          return {\n            title: '您有一份来自好友的红包分享，请查收！',\n            desc: `您的好友分享了一个${coupon.redPacket.amount}元红包`,\n            path: `/pages/subPackages/coupon/receive?spread=${coupon.id}`,\n            imageUrl: '/static/share/coupon_share.png'\n          }\n        }\n      }\n      return {\n        title: '您有一份来自好友的红包分享，请查收！',\n        desc: '您的好友给您发了一个红包',\n        path: '/pages/subPackages/coupon/receive',\n        imageUrl: '/static/share/coupon_share.png'\n      }\n    },\n\n    // 分享给好友\n    async onShareAppMessage(res) {\n      if (res.from === 'button') {\n        const couponIndex = res.target.dataset.couponIndex;\n        const coupon = this.coupons[couponIndex];\n        try {\n          // 生成分享图片\n          const shareImagePath = await this.drawShareImage(coupon);\n          return {\n            title: '您有一份来自好友的红包分享，请查收！',\n            desc: `您的好友分享了一个${coupon.redPacket.amount}元红包`,\n            path: `/pages/subPackages/coupon/receive?spread=${coupon.id}`,\n            imageUrl: shareImagePath\n          }\n        } catch (err) {\n          console.error('生成分享图片失败:', err);\n          // 使用默认图片\n          return {\n            title: '您有一份来自好友的红包分享，请查收！',\n            desc: `您的好友分享了一个${coupon.redPacket.amount}元红包`,\n            path: `/pages/subPackages/coupon/receive??spread=${coupon.id}`,\n            imageUrl: '/static/share/coupon_share.png'\n          }\n        }\n      }\n      return {\n        title: '您有一份来自好友的红包分享，请查收！',\n        desc: '您的好友给您发了一个红包',\n        path: '/pages/subPackages/coupon/receive',\n        imageUrl: '/static/share/coupon_share.png'\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n  background: #F3F4F6;\n  height: 100vh;\n  overflow: hidden;\n\n  .receive {\n    position: relative;\n    height: 136rpx;\n\n    .receive-banner {\n      height: 134rpx;\n      margin: 40rpx 15rpx 0 15rpx;\n      background-image: url('https://www.zxd-hotel.xin/zxdhotel/icon/lingqubej@2x.png');\n      background-size: 100% 100%;\n      background-position: center;\n      background-repeat: no-repeat;\n\n      .banner-content {\n        position: relative;\n        top: 30rpx;\n        margin: 0 34rpx;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n\n        .banner-content-l {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n\n          .banner-icon {\n            width: 26rpx;\n            height: 32rpx;\n            background-image: url('https://zxd-hotel.xin/zxdhotel/2025/06/03/red_20250603225415A004.png');\n            background-size: 100% 100%;\n            background-position: center;\n            background-repeat: no-repeat;\n            margin-right: 20rpx;\n          }\n\n          .banner-text {\n            font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n            font-weight: 600;\n            font-size: 28rpx;\n            color: #FFE1B6;\n            line-height: 28rpx;\n            text-align: left;\n            font-style: normal;\n          }\n        }\n\n        .banner-content-r {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n\n          .banner-arrow {\n            font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n            font-weight: 500;\n            font-size: 24rpx;\n            color: #FFFFFF;\n            line-height: 28rpx;\n            text-align: center;\n            font-style: normal;\n          }\n\n          .banner-arrow-icon {\n            width: 11rpx;\n            height: 18rpx;\n            background-image: url('https://www.zxd-hotel.xin/zxdhotel/icon/fjt2@2x.png');\n            background-size: cover;\n            background-position: center;\n            background-repeat: no-repeat;\n            margin-left: 14rpx;\n          }\n        }\n      }\n    }\n\n    .receive-banner-bottom {\n      background-image: url('https://www.zxd-hotel.xin/zxdhotel/icon/lingqubd@2x.png');\n      background-size: 100% 100%;\n      background-position: center;\n      background-repeat: no-repeat;\n      position: absolute;\n      bottom: 0;\n      width: 100%;\n      height: 54rpx;\n    }\n  }\n\n  .fixed-header {\n    background: #fff;\n    margin-bottom: 20rpx;\n  }\n\n  .nav-title {\n    width: 100%;\n    font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n    font-weight: 500;\n    font-size: 32rpx;\n    color: #19191A;\n    text-align: center;\n    font-style: normal;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 88rpx;\n  }\n\n  .tabs {\n    display: flex;\n    justify-content: space-around;\n    background: #FFF;\n    padding: 0 40rpx;\n    width: 100%;\n    box-sizing: border-box;\n\n    .tab {\n      padding: 20rpx 40rpx;\n      font-size: 28rpx;\n      color: #333;\n      position: relative;\n\n      &.active {\n        &::after {\n          content: '';\n          position: absolute;\n          bottom: 0;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 40rpx;\n          height: 4rpx;\n          background: #ff9900;\n          border-radius: 2rpx;\n        }\n      }\n    }\n  }\n\n  .coupon-list {\n    flex: 1;\n    overflow: hidden;\n    background: white;\n\n    .coupon-card {\n      display: flex;\n      align-items: center; /* 垂直居中 */\n      justify-content: space-between; /* 两边分布 */\n      position: relative;\n    }\n\n    .coupon-base-card {\n      display: revert;\n    }\n\n    .coupon-item-rule-desc {\n      margin: -40rpx 15rpx 20rpx 15rpx;\n      padding: 42rpx 32rpx 18rpx 32rpx;\n      border-radius: 0 0 28rpx 28rpx;\n      border: 1rpx solid #F7DFC1;\n      font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n      font-weight: 400;\n      font-size: 24rpx;\n      color: #B7560C;\n      line-height: 32rpx;\n      text-align: left;\n      font-style: normal;\n      background: linear-gradient(180deg, #FFEBD7 0%, #FDF6ED 100%);\n    }\n\n    .coupon-item {\n      flex: 1; /* 占满剩余空间 */\n      display: flex;\n      align-items: center;\n      height: 209rpx;\n      margin: 0 15rpx 20rpx 15rpx;\n      background-image: url('https://www.zxd-hotel.xin/zxdhotel/icon/list_red_pack@2x.png');\n      background-size: 100% 100%;\n      background-position: center;\n      background-repeat: no-repeat;\n      position: relative;\n      border-radius: 28rpx;\n\n      .coupon-tag-expired {\n        position: absolute;\n        right: 0;\n        top: 0;\n        width: 124rpx;\n        height: 124rpx;\n        background-image: url('https://www.zxd-hotel.xin/zxdhotel/icon/dq@2x.png');\n        background-size: cover;\n        background-position: center;\n      }\n\n      .toBeUsed {\n        background-image: url('https://www.zxd-hotel.xin/zxdhotel/icon/daishiyong.png');\n      }\n\n      .used {\n        top: 20rpx;\n        right: 20rpx;\n        width: 80rpx;\n        height: 80rpx;\n        background-image: url('/static/base/used.png') !important;\n      }\n\n      .expired {\n        top: 20rpx;\n        right: 20rpx;\n        width: 80rpx;\n        height: 80rpx;\n        background-image: url('/static/base/expired.png') !important;\n      }\n\n      .lb-used {\n        top: 20rpx;\n        right: 20rpx;\n        width: 80rpx;\n        height: 80rpx;\n        background-image: url('https://www.zxd-hotel.xin/zxdhotel/icon/lb-used.png') !important;\n      }\n\n      .lb-expired {\n        top: 20rpx;\n        right: 20rpx;\n        width: 80rpx;\n        height: 80rpx;\n        background-image: url('https://www.zxd-hotel.xin/zxdhotel/icon/lb-expired.png') !important;\n      }\n\n      .coupon-tag-expired-text {\n        position: absolute;\n        right: 5rpx;\n        top: 35rpx;\n        width: 124rpx;\n        height: 124rpx;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 400;\n        font-size: 24rpx;\n        color: #000000;\n        line-height: 17px;\n        text-align: left;\n        font-style: normal;\n        transform: rotate(45deg);\n      }\n    }\n\n    .lb-item {\n      background-image: url('https://www.zxd-hotel.xin/zxdhotel/icon/lbbj@2x.png');\n    }\n\n    .coupon-item-null {\n      flex: 1;\n      display: flex;\n      align-items: center;\n      height: 200rpx;\n      margin: 0 15rpx 20rpx 15rpx;\n      background-size: 100% 100%;\n      background-position: center;\n      background-repeat: no-repeat;\n      position: relative;\n      border-radius: 28rpx;\n    }\n\n    .coupon-info {\n      width: 630rpx;\n      height: 180rpx;\n      margin: 10rpx 20rpx;\n      position: relative;\n      display: flex;\n      align-content: center;\n      justify-content: space-between;\n\n      .coupon-info-l {\n        width: 500rpx;\n        height: 100%;\n        position: relative;\n        left: 25rpx;\n        display: flex;\n\n        .coupon-info-l-icon {\n          width: 74rpx;\n          height: 80rpx;\n        }\n\n        .coupon-info-l-title {\n          position: absolute;\n          top: 30rpx;\n          height: 32rpx;\n          font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n          font-weight: 500;\n          font-size: 32rpx;\n          color: #19191A;\n          line-height: 32rpx;\n          text-align: left;\n          font-style: normal;\n        }\n\n        .coupon-info-l-l {\n          display: flex;\n          align-items: center;\n        }\n\n        .coupon-info-l-r {\n          margin-left: 36rpx;\n        }\n\n        .used-text {\n          color: #A2A2A8 !important;\n        }\n\n        .coupon-info-l-time {\n          position: absolute;\n          top: 80rpx;\n          height: 24rpx;\n          font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n          font-weight: 400;\n          font-size: 24rpx;\n          color: #19191A;\n          line-height: 24rpx;\n          text-align: left;\n          font-style: normal;\n        }\n\n        .coupon-info-l-tag {\n          position: absolute;\n          top: 120rpx;\n\n          .tag {\n            position: relative;\n            height: 32rpx;\n            border-radius: 4rpx;\n            font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n            font-weight: 400;\n            font-size: 20rpx;\n            color: #EE781F;\n            text-align: left;\n            font-style: normal;\n            padding: 0 8rpx;\n            margin-right: 16rpx;\n            box-sizing: border-box;\n          }\n\n          .tag::before {\n            content: '';\n            position: absolute;\n            left: 0;\n            top: 0;\n            width: 200%;\n            height: 200%;\n            border: 1px solid rgba(255, 183, 161, 0.5);\n            border-radius: 8rpx;\n            transform: scale(0.5);\n            transform-origin: 0 0;\n            pointer-events: none;\n            box-sizing: border-box;\n          }\n\n          .used-tag::before {\n            border-color: #A2A2A8;\n          }\n        }\n      }\n\n      .coupon-info-r {\n        display: flex;\n        flex-direction: column; /* 垂直排列 */\n        align-items: center; /* 水平居中 */\n        justify-content: center; /* 垂直居中 */\n\n        .coupon-info-r-amount-box-t {\n          width: 168rpx;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n\n          .coupon-info-r-amount-box {\n            width: auto;\n            height: 68rpx;\n            display: flex;\n            align-items: baseline;\n            justify-content: center;\n\n            .coupon-info-r-amount {\n              height: 68rpx;\n              font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n              font-weight: 600;\n              font-size: 68rpx;\n              color: #FFFFFF;\n              text-align: center;\n              font-style: normal;\n              line-height: 1;\n            }\n\n            .coupon-info-r-unit {\n              font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n              font-weight: 500;\n              font-size: 28rpx;\n              color: #FFFFFF;\n              text-align: left;\n              font-style: normal;\n              line-height: 1; /* 避免多余间距 */\n              margin-left: 4rpx; /* 与数字略微分隔 */\n            }\n          }\n        }\n\n        .coupon-info-r-amount-box-b {\n          width: 140rpx;\n          height: 64rpx;\n          background: linear-gradient(90deg, #FFB053 0%, #FFF6DF 100%);\n          border-radius: 36rpx;\n          margin-top: 6rpx;\n          font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n          font-weight: 500;\n          font-size: 28rpx;\n          color: #920023;\n          line-height: 64rpx;\n          text-align: center;\n          font-style: normal;\n          border: none;\n        }\n      }\n    }\n  }\n}\n\n.share-canvas {\n  position: fixed;\n  left: -9999px;\n  width: 500px;\n  height: 400px;\n  visibility: hidden;\n}\n\n.load-more-status {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 20rpx 60rpx 20rpx;\n\n  .loading {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    .loading-icon {\n      width: 32rpx;\n      height: 32rpx;\n      border: 3rpx solid #ddd;\n      border-top: 3rpx solid #ff9900;\n      border-radius: 50%;\n      animation: spin 1s linear infinite;\n      margin-right: 16rpx;\n    }\n\n    .loading-text {\n      font-size: 28rpx;\n      color: #666;\n    }\n  }\n\n  .no-more {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n\n    .no-more-line {\n      flex: 1;\n      height: 1rpx;\n      background: linear-gradient(to right, transparent, #e0e0e0, transparent);\n    }\n\n    .no-more-text {\n      font-size: 24rpx;\n      color: #999;\n      padding: 0 30rpx;\n      position: relative;\n    }\n  }\n\n  .empty {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 60rpx 20rpx;\n\n    .empty-icon {\n      width: 120rpx;\n      height: 120rpx;\n      margin-bottom: 20rpx;\n      opacity: 0.6;\n    }\n\n    .empty-text {\n      font-size: 28rpx;\n      color: #999;\n    }\n  }\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n/* Tab切换加载遮罩 */\n.tab-loading-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(243, 244, 246, 0.9);\n  backdrop-filter: blur(8rpx);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10;\n\n  .tab-loading-content {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    background: rgba(255, 255, 255, 0.95);\n    padding: 60rpx 80rpx;\n    border-radius: 20rpx;\n    box-shadow: 0 10rpx 40rpx rgba(0, 0, 0, 0.1);\n\n    .tab-loading-spinner {\n      display: flex;\n      gap: 8rpx;\n      margin-bottom: 24rpx;\n\n      .spinner-ring {\n        width: 12rpx;\n        height: 12rpx;\n        border-radius: 50%;\n        background: linear-gradient(45deg, #ff9900, #ffcc00);\n        animation: spinner-bounce 1.2s infinite ease-in-out;\n\n        &:nth-child(1) {\n          animation-delay: -0.24s;\n        }\n\n        &:nth-child(2) {\n          animation-delay: -0.12s;\n        }\n\n        &:nth-child(3) {\n          animation-delay: 0s;\n        }\n      }\n    }\n\n    .tab-loading-text {\n      font-size: 28rpx;\n      color: #666;\n      font-weight: 500;\n    }\n  }\n}\n\n/* 加载时的模糊效果 */\n.loading-blur {\n  opacity: 0.6;\n  filter: blur(2rpx);\n  transition: all 0.3s ease;\n}\n\n/* 首次加载动画 */\n.first-loading {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 80rpx 20rpx;\n\n  .first-loading-spinner {\n    display: flex;\n    gap: 12rpx;\n    margin-bottom: 32rpx;\n\n    .bounce-dot {\n      width: 16rpx;\n      height: 16rpx;\n      background: linear-gradient(45deg, #ff9900, #ffcc00);\n      border-radius: 50%;\n      animation: bounce-loading 1.4s infinite ease-in-out both;\n\n      &:nth-child(1) {\n        animation-delay: -0.32s;\n      }\n\n      &:nth-child(2) {\n        animation-delay: -0.16s;\n      }\n\n      &:nth-child(3) {\n        animation-delay: 0s;\n      }\n    }\n  }\n\n  .first-loading-text {\n    font-size: 28rpx;\n    color: #666;\n    font-weight: 500;\n  }\n}\n\n@keyframes spinner-bounce {\n  0%, 80%, 100% {\n    transform: scale(0.8);\n    opacity: 0.5;\n  }\n  40% {\n    transform: scale(1.2);\n    opacity: 1;\n  }\n}\n\n@keyframes bounce-loading {\n  0%, 80%, 100% {\n    transform: scale(0.8) translateY(0);\n  }\n  40% {\n    transform: scale(1) translateY(-20rpx);\n  }\n}\n</style>","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=314aabbc&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=314aabbc&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1769665553548\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/subPackages/coupon/receive.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./receive.vue?vue&type=template&id=a97dbb96&scoped=true&\"\nvar renderjs\nimport script from \"./receive.vue?vue&type=script&lang=js&\"\nexport * from \"./receive.vue?vue&type=script&lang=js&\"\nimport style0 from \"./receive.vue?vue&type=style&index=0&id=a97dbb96&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a97dbb96\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/subPackages/coupon/receive.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./receive.vue?vue&type=template&id=a97dbb96&scoped=true&\"","var components\ntry {\n  components = {\n    uniNavBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar\" */ \"@/uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.coupon\n    ? _vm.formatDate(_vm.coupon.endTime ? _vm.coupon.endTime : \"\")\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./receive.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./receive.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"receive-page\">\n    <uni-nav-bar\n        :shadow=\"false\"\n        :border=\"false\"\n        status-bar\n        left-icon=\"left\"\n        @clickLeft=\"back\"\n    >\n      <template #default>\n        <text class=\"nav-title\">来自好友的分享</text>\n      </template>\n    </uni-nav-bar>\n\n    <view class=\"content\">\n      <view class=\"title\">住小叮红包</view>\n      <view class=\"subtitle\" v-if=\"coupon.redPacket.amount\">您的好友分享了一个{{ coupon.redPacket.amount }}元红包</view>\n      <view class=\"coupon-card\">\n        <image class=\"bg-image\" src=\"/static/share/coupon_share.png\" mode=\"aspectFit\"/>\n        <view class=\"site\">\n          <view class=\"amount\">\n            <text class=\"symbol\" v-if=\"coupon.redPacket.amount\">¥</text>\n            <text class=\"number\" v-if=\"coupon.redPacket.amount\">{{ coupon.redPacket.amount }}</text>\n          </view>\n          <text v-if=\"coupon.redPacket.minSpend > 0\" class=\"limit\">满{{ coupon.redPacket.minSpend }}元可用</text>\n          <text v-else class=\"limit\">无门槛立减</text>\n          <view class=\"name\">{{ coupon.redPacket.name }}</view>\n          <view class=\"expire\" v-if=\"coupon\">有效期至{{\n              formatDate(coupon.endTime ? coupon.endTime : \"\")\n            }}\n          </view>\n          <text v-if=\"coupon.redPacket.scopeType === 1\"\n                class=\"store\">适用于全部门店\n          </text>\n          <text v-else class=\"store\">适用于指定门店</text>\n\n        </view>\n      </view>\n      <!-- 按钮区域放在图片下方 -->\n      <view class=\"button-area\">\n        <view\n            class=\"receive-btn\"\n            :class=\"{ 'receiving': receiving, 'disabled': isSelfShare || receiveStatus }\"\n            :disabled=\"receiving || isSelfShare || receiveStatus\"\n            @click=\"receiveCoupon\"\n        >\n          {{\n            receiving ? '领取中...' : (receiveStatus ? '已被领取' : (isSelfShare ? '不能领取自己的红包' : '立即领取'))\n          }}\n        </view>\n        <button v-if=\"!receiveStatus\"\n                class=\"share-btn\"\n                plain=\"true\"\n                open-type=\"share\"\n                :data-coupon=\"coupon\"\n        >分享给好友\n        </button>\n      </view>\n    </view>\n    <!-- 添加隐藏的canvas -->\n    <canvas canvas-id=\"shareCanvas\" class=\"share-canvas\"></canvas>\n  </view>\n</template>\n\n<script>\nimport {exampleCouponInfo, receive} from \"../../../common/api\";\nimport {checkLogin, getUserInfo} from \"../../../store\";\nimport coupon from \"../../coupon/index.vue\";\nimport {pageBack} from \"../../../common/redirect\";\n\nexport default {\n  data() {\n    return {\n      coupon: {},\n      spread: '', // 保存传递的spread参数\n      receiving: false, // 防止重复点击\n      isItAvailable: false, // 是否是自己的分享\n      receiveStatus: false // 是否是自己的分享\n    }\n  },\n  onLoad(options) {\n    uni.setNavigationBarColor({\n      frontColor: '#000000',\n      backgroundColor: '#FFFFFF'\n    });\n    uni.showShareMenu({\n      withShareTicket: true,\n      menus: ['shareAppMessage', 'shareTimeline']\n    });\n    if (options.spread) {\n      this.spread = options.spread; // 保存spread参数\n      this.exampleCouponInfo(options.spread);\n    }\n  },\n  onShow() {\n    // 现在登录跳转逻辑已经改为：登录 → 首页 → 红包页面\n    // 如果是从首页跳转过来的，检查是否需要自动领取\n    const autoReceive = uni.getStorageSync('autoReceiveCoupon');\n    if (autoReceive && checkLogin() && this.spread) {\n      uni.removeStorageSync('autoReceiveCoupon');\n      // 稍微延迟执行领取，确保页面已经完全显示\n      setTimeout(() => {\n        this.doReceive();\n      }, 500);\n    }\n  },\n  methods: {\n    back() {\n      pageBack()\n    },\n    formatDate(dateStr) {\n      if (!dateStr) return '';\n      const date = new Date(dateStr);\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\n      const day = date.getDate().toString().padStart(2, '0');\n      const year = date.getFullYear().toString();\n      return `${year}.${month}.${day}`;\n    },\n    async exampleCouponInfo(spread) {\n      this.coupon = await exampleCouponInfo(spread)\n      // 判断是否是自己的分享\n      const userInfo = getUserInfo('userInfo')\n      if (userInfo && this.coupon.userId === userInfo.id) {\n        this.isSelfShare = true\n      }\n      if (this.coupon.deleted === 1) {\n        this.receiveStatus = true\n      }\n    },\n    async receiveCoupon() {\n      // 防止重复点击\n      if (this.receiving) {\n        return;\n      }\n      // 检查是否已登录\n      if (!checkLogin()) {\n        await uni.navigateTo({\n          url: '/pages/subPackages/user/login',\n          redirectUrl: `/pages/subPackages/coupon/receive?spread=${this.spread}`,\n          params: {\n            spread: this.spread,\n            business: 'coupon'\n          }\n        });\n        return;\n      }\n      // 已登录，直接领取\n      await this.doReceive();\n    },\n\n    async doReceive() {\n      if (this.receiving) {\n        return;\n      }\n\n      if (!this.spread) {\n        uni.showToast({\n          title: '参数错误',\n          icon: 'none'\n        });\n        return;\n      }\n\n      this.receiving = true;\n      try {\n        const result = await receive(this.spread);\n        uni.showToast({\n          title: '领取成功',\n          icon: 'success',\n          duration: 2000,\n          success: () => {\n            setTimeout(() => {\n              uni.navigateTo({\n                url: '/pages/subPackages/coupon/receive-success'\n              });\n            }, 2000);\n          }\n        });\n      } catch (error) {\n        uni.hideLoading();\n        uni.showToast({\n          title: error.error,\n          icon: 'none'\n        });\n      } finally {\n        this.receiving = false;\n      }\n    },\n    // 绘制分享图片\n    async drawShareImage(coupon) {\n      return new Promise((resolve, reject) => {\n        const ctx = uni.createCanvasContext('shareCanvas', this);\n        const canvasWidth = 500;\n        const canvasHeight = 400;\n\n        // 绘制背景图\n        ctx.drawImage('/static/share/coupon_share.png', 0, 0, canvasWidth, canvasHeight);\n\n        // 绘制金额\n        ctx.setFillStyle('#E81B2D');\n        ctx.setTextAlign('center');\n        ctx.setTextBaseline('middle');\n\n        // 绘制¥符号\n        ctx.setFontSize(30);\n        ctx.fillText('¥', canvasWidth / 2 - 40, 110);\n\n        // 绘制金额数字\n        ctx.setFontSize(52);\n        ctx.fillText(coupon.redPacket.amount, canvasWidth / 2 + 5, 102);\n\n        let amountText = \"\"\n        if (coupon.redPacket.minSpend > 0) {\n          amountText = \"满\" + coupon.redPacket.minSpend + \"元可用\";\n        } else {\n          amountText = \"无门槛立减\";\n        }\n        // 绘制使用条件\n        ctx.setFillStyle('#19191A');\n        ctx.setFontSize(24);\n        ctx.fillText(amountText, canvasWidth / 2, 148);\n\n        // 绘制标题\n        ctx.setFillStyle('#FFFFFF');\n        ctx.setFontSize(28);\n        ctx.fillText(coupon.redPacket.name, canvasWidth / 2, 240);\n\n        // 绘制有效期\n        ctx.setFontSize(20);\n        ctx.setFillStyle('#FFFFFF');\n        const time = this.formatDate(coupon.endTime)\n        ctx.fillText(`有效期至${time}`, canvasWidth / 2, 280);\n        // 绘制适用范围\n        const text = coupon.redPacket.scopeType === 1 ? '适用于全部门店' : '适用于指定门店';\n        ctx.fillText(text, canvasWidth / 2, 310);\n        // 执行绘制\n        ctx.draw(false, () => {\n          uni.canvasToTempFilePath({\n            canvasId: 'shareCanvas',\n            success: (res) => {\n              resolve(res.tempFilePath);\n            },\n            fail: (err) => {\n              reject(err);\n            }\n          }, this);\n        });\n      });\n    },\n\n    // 分享到朋友圈\n    async onShareTimeline(res) {\n      if (res.from === 'button') {\n        const coupon = res.target.dataset.coupon;\n        try {\n          // 生成分享图片\n          const shareImagePath = await this.drawShareImage(coupon);\n          return {\n            title: '您有一份来自好友的红包分享，请查收！',\n            desc: `您的好友分享了一个${coupon.redPacket.amount}元红包`,\n            path: `/pages/subPackages/coupon/receive?id=${coupon.redPacket.id}&amount=${coupon.redPacket.amount}&spread=${coupon.id}`,\n            imageUrl: shareImagePath\n          }\n        } catch (err) {\n          console.error('生成分享图片失败:', err);\n          // 使用默认图片\n          return {\n            title: '您有一份来自好友的红包分享，请查收！',\n            desc: `您的好友分享了一个${coupon.redPacket.amount}元红包`,\n            path: `/pages/subPackages/coupon/receive?id=${coupon.redPacket.id}&amount=${coupon.redPacket.amount}&spread=${coupon.id}`,\n            imageUrl: '/static/share/coupon_share.png'\n          }\n        }\n      }\n      return {\n        title: '您有一份来自好友的红包分享，请查收！',\n        desc: '您的好友给您发了一个红包',\n        path: '/pages/subPackages/coupon/receive',\n        imageUrl: '/static/share/coupon_share.png'\n      }\n    },\n\n    // 分享给好友\n    async onShareAppMessage(res) {\n      if (res.from === 'button') {\n        const coupon = res.target.dataset.coupon;\n        try {\n          // 生成分享图片\n          const shareImagePath = await this.drawShareImage(coupon);\n          return {\n            title: '您有一份来自好友的红包分享，请查收！',\n            desc: `您的好友分享了一个${coupon.redPacket.amount}元红包`,\n            path: `/pages/subPackages/coupon/receive?id=${coupon.redPacket.id}&amount=${coupon.redPacket.amount}&spread=${coupon.id}`,\n            imageUrl: shareImagePath\n          }\n        } catch (err) {\n          console.error('生成分享图片失败:', err);\n          // 使用默认图片\n          return {\n            title: '您有一份来自好友的红包分享，请查收！',\n            desc: `您的好友分享了一个${coupon.redPacket.amount}元红包`,\n            path: `/pages/subPackages/coupon/receive?id=${coupon.redPacket.id}&amount=${coupon.redPacket.amount}&spread=${coupon.id}`,\n            imageUrl: '/static/share/coupon_share.png'\n          }\n        }\n      }\n      return {\n        title: '您有一份来自好友的红包分享，请查收！',\n        desc: '您的好友给您发了一个红包',\n        path: '/pages/subPackages/coupon/receive',\n        imageUrl: '/static/share/coupon_share.png'\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.receive-page {\n  min-height: 100vh;\n  background: linear-gradient(180deg, #FFF6E7 0%, #FFF9F0 100%);\n  position: relative;\n  overflow: hidden;\n\n  .nav-title {\n    width: 100%;\n    font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n    font-weight: 500;\n    font-size: 32rpx;\n    color: #19191A;\n    text-align: center;\n    font-style: normal;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 88rpx;\n  }\n\n  .content {\n    text-align: center;\n\n    .title {\n      margin-top: 66rpx;\n      height: 64rpx;\n      font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n      font-weight: 600;\n      font-size: 64rpx;\n      color: #EE781F;\n      line-height: 64rpx;\n      text-align: center;\n      font-style: normal;\n    }\n\n    .subtitle {\n      margin-top: 28rpx;\n      height: 28rpx;\n      font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n      font-weight: 500;\n      font-size: 28rpx;\n      color: #EE781F;\n      line-height: 28rpx;\n      text-align: center;\n      font-style: normal;\n    }\n\n    .coupon-card {\n      position: relative;\n      margin-top: -40rpx;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      height: auto;\n\n      .bg-image {\n        position: absolute;\n        top: 0;\n        width: 100%;\n        height: 682rpx;\n        z-index: 0;\n      }\n\n      .site {\n        width: 100%;\n        height: 682rpx;\n        z-index: 1;\n      }\n\n      .amount {\n        z-index: 3;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 600;\n        font-size: 100rpx;\n        color: #E81B2D;\n        text-align: center;\n        font-style: normal;\n        margin: 100rpx 320rpx 0 320rpx;\n\n        .symbol {\n          font-size: 40rpx;\n        }\n\n        .number {\n          font-size: 80rpx;\n          font-weight: 600;\n        }\n      }\n\n      .limit {\n        z-index: 2;\n        height: 32rpx;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 500;\n        font-size: 32rpx;\n        color: #19191A;\n        line-height: 32rpx;\n        text-align: center;\n        font-style: normal;\n      }\n\n      .name {\n        z-index: 2;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 500;\n        font-size: 32rpx;\n        color: #FFFFFF;\n        line-height: 32rpx;\n        text-align: center;\n        font-style: normal;\n        margin-top: 94rpx;\n      }\n\n      .expire {\n        z-index: 2;\n        height: 28rpx;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 400;\n        font-size: 28rpx;\n        color: #FFFFFF;\n        line-height: 28rpx;\n        text-align: center;\n        font-style: normal;\n        margin-top: 48rpx;\n      }\n\n      .store {\n        z-index: 2;\n        height: 28rpx;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 400;\n        font-size: 28rpx;\n        color: #FFFFFF;\n        line-height: 28rpx;\n        text-align: center;\n        font-style: normal;\n        margin-top: 14rpx;\n      }\n    }\n\n    .button-area {\n      margin-top: 0rpx;\n      padding: 0 58rpx;\n\n      .receive-btn {\n        width: 100%;\n        height: 92rpx;\n        background: #EE781F;\n        border-radius: 50rpx;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 500;\n        font-size: 32rpx;\n        color: #FFFFFF;\n        line-height: 92rpx;\n        text-align: center;\n        font-style: normal;\n        margin-bottom: 28rpx;\n        transition: all 0.3s ease;\n        position: relative;\n        overflow: hidden;\n\n        &.receiving {\n          background: #CCCCCC;\n          opacity: 0.7;\n\n          &::after {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: -100%;\n            width: 100%;\n            height: 100%;\n            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n            animation: loading 1.5s infinite;\n          }\n        }\n\n        &.disabled {\n          background: #CCCCCC;\n          opacity: 0.7;\n          cursor: not-allowed;\n        }\n\n        &:disabled {\n          background: #CCCCCC;\n          opacity: 0.7;\n        }\n      }\n\n      @keyframes loading {\n        0% {\n          left: -100%;\n        }\n        100% {\n          left: 100%;\n        }\n      }\n\n      .share-btn {\n        width: 100%;\n        height: 92rpx;\n        background: #FFFFFF;\n        border-radius: 50rpx;\n        border: 1rpx solid #EE781F;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 500;\n        font-size: 32rpx;\n        color: #EE781F;\n        line-height: 92rpx;\n        text-align: center;\n        font-style: normal;\n        padding: 0;\n\n        /* 移除按钮默认样式 */\n        &::after {\n          border: none;\n        }\n      }\n    }\n  }\n\n  .coin-left {\n    position: absolute;\n    left: 0;\n    bottom: 200rpx;\n    width: 200rpx;\n    height: 200rpx;\n    opacity: 0.6;\n  }\n\n  .coin-right {\n    position: absolute;\n    right: 0;\n    bottom: 400rpx;\n    width: 200rpx;\n    height: 200rpx;\n    opacity: 0.6;\n  }\n\n  .share-canvas {\n    position: fixed;\n    left: -9999px;\n    width: 500px;\n    height: 400px;\n    visibility: hidden;\n  }\n}\n</style> ","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./receive.vue?vue&type=style&index=0&id=a97dbb96&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./receive.vue?vue&type=style&index=0&id=a97dbb96&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1769665553431\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}