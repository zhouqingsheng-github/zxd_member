{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/home/search/index.vue?3680","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/home/search/index.vue?b50e","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/home/search/index.vue?e5c0","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/home/search/index.vue?0305","uni-app:///pages/subPackages/home/search/index.vue","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/home/search/index.vue?1084","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/home/search/index.vue?51af"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","UPopup","HotelList","SearchCard","HotelCalendar","BedCountPicker","EmptyState","onPullDownRefresh","uni","onReachBottom","onLoad","frontColor","backgroundColor","searchParams","now","currentHour","isCurrentlyEarlyMorning","today","storedCheckIn","yesterday","city","field","sort","tagId","console","keyword","checkIn","checkOut","nights","bedCount","onUnload","onShow","enable","textStyle","watch","showSearchCard","data","timeInterval","hour","cutoffTime","showPopup","currentPopupType","scrollTimer","longitude","latitude","currentCity","locationMain","locationSub","checkInDate","checkOutDate","originCheckInDate","originCheckOutDate","nightCount","tempCheckInDate","tempCheckOutDate","tempNightCount","tempBedCount","tempBedCount_","tempShowZeroToSixPrompt","tempIChoseEarlyMorning","searchKeyword","showCalendar","showBedPicker","showDetailAddress","currentAddress","hotels","sortOptions","name","filterOptions","currentSort","currentFilter","currentDistrict","page","pageSize","total","loading","noMoreData","isRequesting","showZeroToSixPrompt","iChoseEarlyMorning","beforeDestroy","clearInterval","methods","checkTimeForPrompt","storedParams","toggleSortPopup","toggleFilterPopup","handleSortChange","handleFilterToggle","onContentScroll","clearTimeout","handleScroll","onScrollToLower","getLocation","success","scope","fail","title","content","doGetLocation","type","isHighAccuracy","key","url","location","extensions","output","icon","fetchFilterTags","http","then","catch","loadHotelList","params","res","loadMoreHotels","nextPage","back","handleSort","formatDateIn","date","formatDate","handleLocationClick","handleCardSearch","onDateChange","handleBedPickerClose","onBedCountConfirm","handleSearchClick","refreshLocation","goToCitySelect","events","citySelected"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACqC;;;AAGzF;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,kRAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9FA;AAAA;AAAA;AAAA;AAAi2B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;AC4Mr3B;AACA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAGA;AAAA,eAEA;EACAC;IAAAC;IAAAC;IAAAC;IAAAC;IAAAC;IAAAC;EAAA;EACAC;IACAC;EACA;EACAC;IACA;MACA;IACA;EACA;EACAC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACAF;gBACAG;gBACAC;cACA;cAAA;cAAA,OACA;YAAA;cAAA;cACA;gBACA;cACA;cAAA,wBACA;cACA;cACA;cACA;gBACA;cACA;cACA;gBACAC;gBACA;kBACA;kBACAC;kBACAC;kBACAC,wEAEA;kBACA;oBACA;oBACAC;oBACAA;oBACAC;oBACAA;oBACAC;oBACAA;;oBAEA;oBACA;sBACA;sBACA;sBACAN;sBACAL;oBACA;sBACA;sBACA;oBACA;kBACA;oBACA;oBACA;kBACA;kBAEA;kBACA;kBAEA;oBACA;kBACA;kBACA;oBACA;kBACA;kBACA;oBACA;oBACA;oBACA;kBACA;kBACA;oBACA;oBACA;oBACA;kBACA;kBACA;oBACA;oBACA;kBACA;kBACA;oBACA;oBACA;oBACA;kBACA;gBAEA;gBACA;kBACAY;kBACAC;kBACAC;kBACAC;gBACA;gBACA;gBACA;cACA;gBACAC;cACA;cACAhB;gBACA;gBACA;kBACAiB;kBACAC;kBACAC;kBACAC;kBACAC;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EACAC;IACAtB;EACA;EACAuB;IACAvB;IACA;MACAA;QACAwB;MACA;IACA,aACA;IACA;MACAxB;QACAyB;MACA;IACA;EACA;EACAC;IACAC;MACA;QACA3B;UACAwB;QACA;MACA;QACAxB;UACAwB;QACA;MACA;IACA;EACA;EACAI;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAvB;MACAwB;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAzB;MACA0B;MACAC;MACAC;MACAC;MACAC;MACAC,cACA;QACAC;QACA9C;QACAC;MACA,GACA;QACA6C;QACA9C;QACAC;MACA,GACA;QACA6C;QACA9C;QACAC;MACA,EACA;MACA8C;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;IACA;EACA;EACAC;IACA;IACA;MACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;MACA;MACAC;MACA5E;IACA;IACA;IACA6E;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QACA;MACA;QACA;MACA;;MAEA;MACA;QACAlE;QACAC;QACAC;MACA;;MAEA;MACA;IACA;IAEA;IACAiE;MACA;QACA;MACA;QACA;MACA;MACA;MACAhE;MACA;QACAH;QACAC;QACAC;MACA;MACA;MACA;IACA;IAEA;IACAkE;MAAA;MACA;MACAC;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;IAAA,CACA;IAEA;IACAC;MACA;QACA;MACA;IACA;IAEAC;MAAA;MACArF;QACAsF;UACA;YACAtF;cACAuF;cACAD;gBACA;cACA;cACAE;gBACAxE;gBACAhB;kBACAyF;kBACAC;kBACAJ;oBACA;sBACAtF;oBACA;kBACA;gBACA;cACA;YACA;UACA;YACA;UACA;QACA;QACAwF;UACAxE;QACA;MACA;IACA;IACA2E;MAAA;MACA3F;QACA4F;QACAC;QACAP;UAAA;YAAA;YAAA;cAAA;gBAAA;kBAAA;oBAAA;oBAAA,OAEA;kBAAA;oBAAAQ;oBACA9F;sBACA+F;sBACAnE;wBACAkE;wBACAE;wBACAC;wBACAC;sBACA;sBACAZ;wBACA;0BACA;0BACA;0BACA;0BACA;0BACA;0BACA;0BACA;4BACAtF;8BACAyF;8BACAU;4BACA;0BACA;wBACA;0BACAnG;4BACAyF;4BACAU;0BACA;wBACA;sBACA;sBACAX;wBACAxE;wBACAhB;0BACAyF;0BACAU;wBACA;sBACA;oBACA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA,CACA;UAAA;YAAA;UAAA;UAAA;QAAA;QACAX;UACAxE;UACAhB;YACAyF;YACAU;UACA;QACA;MACA;IACA;IACAC;MAAA;MACAC,0CACAC;QACA;MACA,GACAC,sBACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACA;gBACA;gBAAA;gBAEA;gBACA5B;gBACAzC;gBACAC;gBACA/B,+CACAoG;kBACA7F;kBACA4B;kBACAC;kBACArB;kBACAC;kBACAc;kBACAC;kBACA4B;kBACAC;gBAAA;gBAGA;kBAAA,wBACA;kBACA5D;kBACAA;gBACA;gBAAA;gBAAA,OAEA;cAAA;gBAAAqG;gBACA;gBACA;gBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA1G;kBAAAyF;kBAAAU;gBAAA;cAAA;gBAAA;gBAEA;gBACA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAQ;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACA;gBACA;gBAAA;gBAGAC;gBACAhC;gBACAzC;gBACAC;gBAEA/B;kBACAO;kBACA4B;kBACAC;kBACArB;kBACAC;kBACAc;kBACAC;kBACA4B;kBACAC;kBACAlD;gBACA;gBAEA;kBAAA,wBACA;kBACAV;kBACAA;gBACA;gBAAA;gBAAA,OAEA;cAAA;gBAAAqG;gBACA;kBACA;kBACA;kBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA1G;kBAAAyF;kBAAAU;gBAAA;cAAA;gBAAA;gBAEA;gBACA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAU;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;QACA;MACA;MACA;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;QACAC;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACAvG;QACAM;QACAC;QACAC;QACAC;QACAiD;QACAC;MACA;MACA;MACAvE;MACA;MACA;IACA;IACA;IACAoH;MACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACAvH;QACA+F;MACA;IACA;IACAyB;MACAxH;QAAAyF;QAAAU;MAAA;IACA;IACAsB;MAAA;MACA;MACAzH;QACA+F;QACA2B;UACAC;YACA;YACA;YACA;YACA;YACA;YACA;YACAtH;YACAA;YACAA;YACAA;YACAL;YACA;cACAY;YACA;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC3yBA;AAAA;AAAA;AAAA;AAAkvC,CAAgB,wnCAAG,EAAC,C;;;;;;;;;;;ACAtwC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/subPackages/home/search/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/subPackages/home/search/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=4fc48070&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4fc48070&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4fc48070\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/subPackages/home/search/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=4fc48070&scoped=true&\"","var components\ntry {\n  components = {\n    uniNavBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar\" */ \"@/uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    _vm.currentPopupType === \"sort\"\n      ? _vm.__map(_vm.sortOptions, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g0 = _vm.sortOptions.length\n          return {\n            $orig: $orig,\n            g0: g0,\n          }\n        })\n      : null\n  var l1 =\n    _vm.currentPopupType === \"filter\"\n      ? _vm.__map(_vm.filterOptions, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g1 = _vm.filterOptions.length\n          return {\n            $orig: $orig,\n            g1: g1,\n          }\n        })\n      : null\n  var g2 = !_vm.hotels.length && !_vm.loading\n  if (!_vm._isMounted) {\n    _vm.e0 = function () {\n      _vm.showSearchCard = !_vm.showSearchCard\n      _vm.showPopup = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.showCalendar = true\n    }\n    _vm.e2 = function ($event) {\n      _vm.showBedPicker = true\n    }\n    _vm.e3 = function ($event) {\n      _vm.showSearchCard = false\n    }\n    _vm.e4 = function ($event) {\n      _vm.showPopup = false\n    }\n    _vm.e5 = function ($event) {\n      _vm.showPopup = false\n      _vm.showSearchCard = false\n    }\n    _vm.e6 = function ($event) {\n      _vm.showCalendar = false\n    }\n    _vm.e7 = function ($event) {\n      _vm.tempBedCount_ = $event\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1,\n        g2: g2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"container\">\n    <uni-nav-bar\n        backgroundColor=\"#FFFFFF\"\n        :fixed=\"false\"\n        :shadow=\"false\"\n        :border=\"false\"\n        status-bar\n        left-icon=\"left\"\n        @clickLeft=\"back\"\n        style=\"z-index: 100;\"\n    >\n      <template #default>\n        <text class=\"nav-title\">{{ currentCity }}</text>\n      </template>\n      <template #right>\n      </template>\n    </uni-nav-bar>\n    <view class=\"search-header\">\n      <view class=\"search-content\">\n        <view class=\"city-section\" @click=\"goToCitySelect\">\n          <text class=\"city-text\">{{ currentCity }}</text>\n          <text class=\"city-arrow\" :class=\"{ 'arrow-up': showSearchCard }\"></text>\n        </view>\n        <view class=\"date-section\" @click=\"()=>{showSearchCard = !showSearchCard;showPopup = false;}\">\n          <view class=\"date-group\">\n            <text class=\"date-label\">入住</text>\n            <text class=\"date\">{{ checkInDate }}</text>\n          </view>\n          <view class=\"date-group\">\n            <text class=\"date-label\">离店</text>\n            <text class=\"date\">{{ checkOutDate }}</text>\n          </view>\n        </view>\n        <view class=\"divider\"></view>\n        <view class=\"search-section\">\n          <view class=\"search-bar\" @click=\"handleSearchClick\">\n            <image class=\"search-icon\" src=\"/static/base/search.png\" mode=\"aspectFit\"/>\n            <input\n                class=\"search-input\"\n                placeholder=\"搜索位置/酒店\"\n                placeholder-class=\"placeholder\"\n                v-model=\"searchKeyword\"\n                disabled\n            />\n          </view>\n        </view>\n      </view>\n\n      <!-- 搜索卡片组件 -->\n      <SearchCard\n          v-if=\"showSearchCard\"\n          :currentCity=\"currentCity\"\n          :currentDistrict=\"currentDistrict\"\n          :currentAddress=\"currentAddress\"\n          :showDetailAddress=\"showDetailAddress\"\n          :checkInDate=\"tempCheckInDate\"\n          :checkOutDate=\"tempCheckOutDate\"\n          :nightCount=\"tempNightCount\"\n          :bedCount=\"tempBedCount\"\n          :showClose=\"true\"\n          :fullWidth=\"true\"\n          :iChoseEarlyMorning=\"tempIChoseEarlyMorning\"\n          :showZeroToSixPrompt=\"tempShowZeroToSixPrompt\"\n          :cutoffTime=\"cutoffTime\"\n          buttonText=\"确认\"\n          @locationClick=\"handleLocationClick\"\n          @dateClick=\"showCalendar = true\"\n          @bedClick=\"showBedPicker = true\"\n          @search=\"handleCardSearch\"\n          @close=\"showSearchCard = false\"\n          @cityClick=\"goToCitySelect\"\n          class=\"search-card-popup\"\n          ref=\"searchCard\"\n      />\n    </view>\n    <!-- 新的下拉菜单区域 -->\n    <view class=\"filter-tabs-wrapper\">\n      <view class=\"filter-tabs\">\n        <view class=\"dropdown-group\">\n          <view class=\"dropdown-btn\" @click=\"toggleSortPopup\">\n            <text class=\"dropdown-text\" :class=\"{ 'select-text': showPopup && currentPopupType === 'sort'}\">排序</text>\n            <text class=\"arrow\"\n                  :class=\"{ 'up': showPopup && currentPopupType === 'sort','select-up': showPopup && currentPopupType === 'sort' }\"/>\n          </view>\n        </view>\n        <view class=\"dropdown-group\">\n          <view class=\"dropdown-btn\" @click=\"toggleFilterPopup\">\n            <text class=\"dropdown-text\" :class=\"{ 'select-text': showPopup && currentPopupType === 'filter'}\">筛选\n            </text>\n            <text class=\"arrow\"\n                  :class=\"{ 'up': showPopup && currentPopupType === 'filter','select-up': showPopup && currentPopupType === 'filter' }\"/>\n          </view>\n        </view>\n      </view>\n\n      <!-- 弹窗容器 -->\n      <view class=\"popup-container\" v-show=\"showPopup\">\n        <!-- 统一弹窗 -->\n        <view class=\"custom-popup\" @click=\"showPopup = false\">\n          <view class=\"popup-content\" @click.stop>\n            <!-- 排序内容 -->\n            <block v-if=\"currentPopupType === 'sort'\">\n              <view v-for=\"(item, index) in sortOptions\"\n                    :key=\"index\">\n                <view class=\"popup-item\">\n                  <text class=\"popup-text\">{{ item.name }}</text>\n                  <view class=\"coupon-radio\">\n                    <image\n                        @click=\"handleSortChange(item)\"\n                        :src=\"currentSort === (item.field + '-' + item.sort) ? '/static/base/radio_checked_da.png' : '/static/base/radio_unchecked_da.png'\"\n                        class=\"custom-radio\"\n                        mode=\"aspectFit\"\n                        @click.stop=\"\"\n                    />\n                  </view>\n                </view>\n                <view class=\"popup-item-line\" v-if=\"index !== (sortOptions.length-1)\"/>\n              </view>\n            </block>\n\n            <!-- 筛选内容 -->\n            <block v-if=\"currentPopupType === 'filter'\">\n              <view\n                  v-for=\"(item, index) in filterOptions\"\n                  :key=\"index\"\n              >\n                <view class=\"popup-item\">\n                  <view class=\"popup-item-l\">\n                    <text class=\"popup-text\">{{ item.name }}</text>\n                    <image v-if=\"item.searchIcon\" :src=\"item.searchIcon\" class=\"popup-item-icon\" mode=\"aspectFit\"/>\n                  </view>\n                  <view class=\"coupon-radio\">\n                    <image\n                        @click=\"handleFilterToggle(item)\"\n                        :src=\"currentFilter===item.id ? '/static/base/radio_checked_da.png' : '/static/base/radio_unchecked_da.png'\"\n                        class=\"custom-radio\"\n                        mode=\"aspectFit\"\n                        @click.stop=\"\"\n                    />\n                  </view>\n                </view>\n                <view class=\"popup-item-line\" v-if=\"index !== (filterOptions.length-1)\"/>\n              </view>\n            </block>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <scroll-view\n        class=\"content-wrapper\"\n        :class=\"{'enable-scroll': !showSearchCard}\"\n        @scroll=\"onContentScroll\"\n        @scrolltolower=\"onScrollToLower\"\n        :scroll-y=\"!showPopup || !showSearchCard\"\n        ref=\"hotelListContainer\"\n    >\n      <!-- 遮罩层 -->\n      <view v-if=\"showPopup || showSearchCard\" class=\"content-mask\" @click=\"showPopup = false;showSearchCard=false\">\n        <view class=\"mask-overlay\"></view>\n      </view>\n      <view style=\"padding: 0 28rpx 120rpx 28rpx\">\n        <EmptyState\n            v-if=\"!hotels.length && !loading\"\n            text=\"未找到符合条件的酒店\"\n            image=\"/static/base/placeholderMap.png\"\n        />\n        <HotelList\n            v-else\n            :hotels=\"hotels\"\n            :loading=\"loading\"\n            :noMoreData=\"noMoreData\"\n        />\n      </view>\n    </scroll-view>\n\n    <!-- 日期选择器 -->\n    <HotelCalendar\n        v-if=\"showCalendar\"\n        @change=\"onDateChange\"\n        @close=\"showCalendar = false\"\n        :value=\"[tempCheckInDate, tempCheckOutDate]\"\n        :class=\"['calendar-page', showCalendar ? 'show' : '']\"\n        :cutoffTime=\"cutoffTime\"\n    />\n\n    <!-- 床位数选择器 -->\n    <BedCountPicker\n        v-if=\"showBedPicker\"\n        :value=\"tempBedCount_\"\n        @input=\"tempBedCount_ = $event\"\n        @close=\"handleBedPickerClose\"\n        @confirm=\"onBedCountConfirm\"\n    />\n  </view>\n</template>\n\n<script>\nimport HotelList from '@/components/HotelList.vue'\nimport SearchCard from '@/components/SearchCard.vue'\nimport HotelCalendar from '@/components/HotelCalendar.vue'\nimport BedCountPicker from '@/components/BedCountPicker.vue'\nimport EmptyState from '@/components/EmptyState.vue'\nimport {fetchHotelListByPage, gaodeKey,getCutoffTime} from \"@/common/api.js\";\nimport {pageBack} from \"../../../../common/redirect\";\nimport UPopup from \"../../../../uni_modules/uview-ui/components/u-popup/u-popup.vue\";\n\nconst {http} = uni.$u\n\nexport default {\n  components: {UPopup, HotelList, SearchCard, HotelCalendar, BedCountPicker, EmptyState},\n  onPullDownRefresh() {\n    uni.stopPullDownRefresh(); // 立即停止下拉刷新\n  },\n  onReachBottom() {\n    if (!this.noMoreData && !this.loading) {\n      this.loadMoreHotels();\n    }\n  },\n  async onLoad(options) {\n    uni.setNavigationBarColor({\n      frontColor: '#000000',\n      backgroundColor: '#FFFFFF'\n    });\n    this.cutoffTime = await getCutoffTime();\n    if (options.tagId) {\n      this.currentFilter = Number(options.tagId);\n    }\n    const [hours] = this.cutoffTime.split(':').map(Number);\n    this.hour = Number(hours);\n    this.checkTimeForPrompt();\n    this.timeInterval = setInterval(() => {\n      this.checkTimeForPrompt();\n    }, 60000); // 每分钟检查一次\n    try {\n      const searchParams = uni.getStorageSync('searchParams');\n      if (searchParams) {\n        // 判断当前是否在凌晨时段\n        const now = new Date();\n        const currentHour = now.getHours();\n        const isCurrentlyEarlyMorning = currentHour >= 0 && currentHour < this.hour;\n        \n        // 如果之前选择了凌晨，但现在已经不是凌晨时段了，需要重置\n        if (searchParams.iChoseEarlyMorning && !isCurrentlyEarlyMorning) {\n          // 检查日期是否过期\n          const today = new Date();\n          today.setHours(0, 0, 0, 0);\n          const storedCheckIn = new Date(searchParams.checkIn);\n          storedCheckIn.setHours(0, 0, 0, 0);\n          const yesterday = new Date(today);\n          yesterday.setDate(today.getDate() - 1);\n          \n          // 如果入住日期不是昨天，说明已经过期，需要重置\n          if (storedCheckIn.getTime() !== yesterday.getTime()) {\n            this.iChoseEarlyMorning = false;\n            this.tempIChoseEarlyMorning = false;\n            searchParams.iChoseEarlyMorning = false;\n            uni.setStorageSync('searchParams', searchParams);\n          } else {\n            this.iChoseEarlyMorning = searchParams.iChoseEarlyMorning;\n            this.tempIChoseEarlyMorning = searchParams.iChoseEarlyMorning;\n          }\n        } else {\n          this.iChoseEarlyMorning = searchParams.iChoseEarlyMorning;\n          this.tempIChoseEarlyMorning = searchParams.iChoseEarlyMorning;\n        }\n        \n        this.showZeroToSixPrompt = searchParams.showZeroToSixPrompt;\n        this.tempShowZeroToSixPrompt = searchParams.showZeroToSixPrompt;\n        \n        if (searchParams.city) {\n          this.currentCity = searchParams.city;\n        }\n        if (searchParams.district) {\n          this.currentDistrict = searchParams.district;\n        }\n        if (searchParams.checkIn) {\n          this.originCheckInDate = searchParams.checkIn;\n          this.tempCheckInDate = searchParams.checkIn;\n          this.checkInDate = this.formatDateIn(searchParams.checkIn);\n        }\n        if (searchParams.checkOut) {\n          this.originCheckOutDate = searchParams.checkOut;\n          this.tempCheckOutDate = searchParams.checkOut;\n          this.checkOutDate = this.formatDate(searchParams.checkOut);\n        }\n        if (searchParams.nights) {\n          this.nightCount = parseInt(searchParams.nights);\n          this.tempNightCount = parseInt(searchParams.nights);\n        }\n        if (searchParams.bedCount) {\n          this.bedCount = parseInt(searchParams.bedCount);\n          this.tempBedCount = parseInt(searchParams.bedCount);\n          this.tempBedCount_ = this.tempBedCount;\n        }\n\n      }\n      this.loadHotelList({\n        city: this.currentCity,\n        field: this.currentSort ? this.currentSort.split('-')[0] : \"\",\n        sort: this.currentSort ? this.currentSort.split('-')[1] : \"\",\n        tagId: this.currentFilter\n      });\n      // 查询过滤标签\n      this.fetchFilterTags();\n    } catch (e) {\n      console.error('读取搜索参数失败：', e);\n    }\n    uni.$on('searchKeyword', (keyword) => {\n      this.searchKeyword = keyword;\n      this.loadHotelList({\n        keyword: keyword,\n        checkIn: this.originCheckInDate,\n        checkOut: this.originCheckOutDate,\n        nights: this.nightCount,\n        bedCount: this.bedCount\n      });\n    });\n  },\n  onUnload() {\n    uni.$off('searchKeyword');\n  },\n  onShow() {\n    uni.stopPullDownRefresh();\n    try {\n      uni.setEnableScroll({\n        enable: false\n      });\n    } catch (e) {\n    }\n    if (uni.setBackgroundTextStyle) {\n      uni.setBackgroundTextStyle({\n        textStyle: 'dark'\n      });\n    }\n  },\n  watch: {\n    showSearchCard(val) {\n      if (val) {\n        uni.setEnableScroll({\n          enable: false\n        });\n      } else {\n        uni.setEnableScroll({\n          enable: true\n        });\n      }\n    }\n  },\n  data() {\n    return {\n      timeInterval: null,\n      hour: 6,\n      cutoffTime: '06:00',\n      showPopup: false,\n      currentPopupType: 'sort', // 'sort' 或 'filter'\n      scrollTimer: null, // 添加滚动防抖定时器\n      longitude: '',\n      latitude: '',\n      currentCity: '北京',\n      locationMain: '合生汇购物中心',\n      locationSub: '朝阳区九龙山西路合生汇购物中心平乐园地铁站...',\n      checkInDate: '',\n      checkOutDate: '',\n      originCheckInDate: '',\n      originCheckOutDate: '',\n      nightCount: 0,\n      bedCount: 0,\n      tempCheckInDate: '',\n      tempCheckOutDate: '',\n      tempNightCount: 0,\n      tempBedCount: 0,\n      tempBedCount_: 0,\n      tempShowZeroToSixPrompt: false, // 决定着是否提示凌晨了\n      tempIChoseEarlyMorning: false,//决定了用户是否选择了凌晨如果选择了 则需要在显示上进行加1\n      searchKeyword: '',\n      showSearchCard: false,\n      showCalendar: false,\n      showBedPicker: false,\n      showDetailAddress: false,\n      currentAddress: '',\n      hotels: [],\n      sortOptions: [\n        {\n          name: '低价优先',\n          field: \"price\",\n          sort: \"ASC\"\n        },\n        {\n          name: '高价优先',\n          field: \"price\",\n          sort: \"DESC\"\n        },\n        {\n          name: '距离优先',\n          field: \"distance\",\n          sort: \"ASC\"\n        }\n      ],\n      filterOptions: [],\n      currentSort: '',\n      currentFilter: '',\n      currentDistrict: '',\n      // 分页相关数据\n      page: 1,\n      pageSize: 5,\n      total: 0,\n      loading: false,\n      noMoreData: false,\n      isRequesting: false,\n      showZeroToSixPrompt: false, // 决定着是否提示凌晨了\n      iChoseEarlyMorning: false,//决定了用户是否选择了凌晨如果选择了 则需要在显示上进行加1\n    }\n  },\n  beforeDestroy() {\n    // 清除定时器\n    if (this.timeInterval) {\n      clearInterval(this.timeInterval);\n      this.timeInterval = null;\n    }\n  },\n  methods: {\n    checkTimeForPrompt() {\n      const now = new Date();\n      this.currentHour = now.getHours();\n      this.showZeroToSixPrompt = (this.currentHour >= 0 && this.currentHour < this.hour);\n      const storedParams = uni.getStorageSync('searchParams');\n      storedParams.showZeroToSixPrompt = this.showZeroToSixPrompt;\n      uni.setStorageSync('searchParams', storedParams);\n    },\n    // 切换排序弹窗\n    toggleSortPopup() {\n      if (this.showPopup && this.currentPopupType === 'sort') {\n        this.showPopup = false;\n      } else {\n        this.currentPopupType = 'sort';\n        this.showPopup = true;\n      }\n    },\n\n    // 切换筛选弹窗\n    toggleFilterPopup() {\n      if (this.showPopup && this.currentPopupType === 'filter') {\n        this.showPopup = false;\n      } else {\n        this.currentPopupType = 'filter';\n        this.showPopup = true;\n      }\n    },\n\n    // 处理排序选择\n    handleSortChange(item) {\n      if (this.currentSort === item.field + '-' + item.sort) {\n        this.currentSort = null; // 取消选择\n      } else {\n        this.currentSort = item.field + '-' + item.sort;\n      }\n\n      // 执行排序\n      this.loadHotelList({\n        field: this.currentSort ? this.currentSort.split('-')[0] : \"\",\n        sort: this.currentSort ? this.currentSort.split('-')[1] : \"\",\n        tagId: this.currentFilter\n      });\n\n      // 关闭弹窗\n      this.showPopup = false;\n    },\n\n    // 处理筛选项切换\n    handleFilterToggle(item) {\n      if (this.currentFilter === item.id) {\n        this.currentFilter = null; // 取消选择\n      } else {\n        this.currentFilter = item.id;\n      }\n      // 可以在这里添加筛选逻辑\n      console.log('筛选项切换:', item);\n      this.loadHotelList({\n        field: this.currentSort ? this.currentSort.split('-')[0] : \"\",\n        sort: this.currentSort ? this.currentSort.split('-')[1] : \"\",\n        tagId: this.currentFilter\n      });\n      // 关闭弹窗\n      this.showPopup = false;\n    },\n\n    // 内容区域滚动事件处理\n    onContentScroll(e) {\n      // 防抖处理\n      clearTimeout(this.scrollTimer);\n      this.scrollTimer = setTimeout(() => {\n        this.handleScroll(e.detail);\n      }, 100);\n    },\n\n    // 处理滚动逻辑\n    handleScroll(scrollData) {\n      // 不再需要手动处理滚动逻辑，使用 scroll-view 的 scrolltolower 事件\n    },\n\n    // 滚动到底部事件处理\n    onScrollToLower() {\n      if (!this.noMoreData && !this.loading && !this.isRequesting) {\n        this.loadMoreHotels();\n      }\n    },\n\n    getLocation() {\n      uni.getSetting({\n        success: (res) => {\n          if (!res.authSetting['scope.userLocation']) {\n            uni.authorize({\n              scope: 'scope.userLocation',\n              success: () => {\n                this.doGetLocation();\n              },\n              fail: (err) => {\n                console.error('授权失败：', err);\n                uni.showModal({\n                  title: '提示',\n                  content: '需要获取您的位置权限，是否去设置？',\n                  success: (modalRes) => {\n                    if (modalRes.confirm) {\n                      uni.openSetting();\n                    }\n                  }\n                });\n              }\n            });\n          } else {\n            this.doGetLocation();\n          }\n        },\n        fail: (err) => {\n          console.error('获取设置失败：', err);\n        }\n      });\n    },\n    doGetLocation() {\n      uni.getLocation({\n        type: 'gcj02',\n        isHighAccuracy: true,\n        success: async (res) => {\n          // 使用高德地图逆地理编码服务\n          const key = await gaodeKey()\n          uni.request({\n            url: 'https://restapi.amap.com/v3/geocode/regeo',\n            data: {\n              key: key,\n              location: `${res.longitude},${res.latitude}`,\n              extensions: 'all',\n              output: 'json'\n            },\n            success: (result) => {\n              if (result.data.status === '1') {\n                const addressComponent = result.data.regeocode.addressComponent;\n                // 更新城市名称和地址\n                this.currentCity = addressComponent.province;\n                this.currentDistrict = addressComponent.district || '';\n                this.currentAddress = result.data.regeocode.formatted_address;\n                // 如果是点击触发的定位，则显示详细地址\n                if (this.showDetailAddress) {\n                  uni.showToast({\n                    title: '位置已更新',\n                    icon: 'success'\n                  });\n                }\n              } else {\n                uni.showToast({\n                  title: '获取地址信息失败',\n                  icon: 'none'\n                });\n              }\n            },\n            fail: (err) => {\n              console.error('逆地理编码失败：', err);\n              uni.showToast({\n                title: '获取地址信息失败',\n                icon: 'none'\n              });\n            }\n          });\n        },\n        fail: (err) => {\n          console.error('获取位置失败：', err);\n          uni.showToast({\n            title: '获取位置失败：' + err.errMsg,\n            icon: 'none'\n          });\n        }\n      });\n    },\n    fetchFilterTags() {\n      http.get('/hotel-stores/hotel-tags/used')\n          .then(res => {\n            this.filterOptions = res;\n          })\n          .catch(err => {\n          })\n    },\n    async loadHotelList(params) {\n      if (this.isRequesting) return;\n      this.isRequesting = true;\n      this.loading = true;\n      try {\n        // 从缓存中取 searchParams\n        const storedParams = uni.getStorageSync('searchParams') || {};\n        const longitude = storedParams.longitude || '';\n        const latitude = storedParams.latitude || '';\n        const searchParams = {\n          ...params,\n          city: this.currentCity,\n          checkInDate: this.originCheckInDate,\n          checkOutDate: this.originCheckOutDate,\n          nights: this.nightCount,\n          bedCount: this.bedCount,\n          longitude,\n          latitude,\n          page: 1,\n          pageSize: this.pageSize\n        };\n\n        if (this.currentSort) {\n          const [field, sort] = this.currentSort.split('-');\n          searchParams.field = field;\n          searchParams.sort = sort;\n        }\n\n        const res = await fetchHotelListByPage(searchParams);\n        this.hotels = res.records || [];\n        this.page = res.current || 1;\n        this.total = res.total || 0;\n        this.noMoreData = this.hotels.length >= this.total;\n      } catch (e) {\n        uni.showToast({title: '获取酒店列表失败', icon: 'none'});\n      } finally {\n        this.loading = false;\n        this.isRequesting = false;\n      }\n    },\n    // 加载更多酒店数据\n    async loadMoreHotels() {\n      if (this.isRequesting || this.noMoreData) return;\n      this.isRequesting = true;\n      this.loading = true;\n\n      try {\n        const nextPage = this.page + 1;\n        const storedParams = uni.getStorageSync('searchParams') || {};\n        const longitude = storedParams.longitude || '';\n        const latitude = storedParams.latitude || '';\n\n        const searchParams = {\n          city: this.currentCity,\n          checkInDate: this.originCheckInDate,\n          checkOutDate: this.originCheckOutDate,\n          nights: this.nightCount,\n          bedCount: this.bedCount,\n          longitude,\n          latitude,\n          page: nextPage,\n          pageSize: this.pageSize,\n          tagId: this.currentFilter\n        };\n\n        if (this.currentSort) {\n          const [field, sort] = this.currentSort.split('-');\n          searchParams.field = field;\n          searchParams.sort = sort;\n        }\n\n        const res = await fetchHotelListByPage(searchParams);\n        if (res && res.records) {\n          this.hotels = [...this.hotels, ...res.records];\n          this.page = res.current || nextPage;\n          this.total = res.total || this.total;\n          this.noMoreData = this.hotels.length >= this.total;\n        }\n      } catch (e) {\n        uni.showToast({title: '加载更多失败', icon: 'none'});\n      } finally {\n        this.loading = false;\n        this.isRequesting = false;\n      }\n    },\n    back() {\n      pageBack()\n    },\n    handleSort(item) {\n      // 如果点击的是当前已选中的选项，则取消选择\n      if (this.currentSort === item.field + \"-\" + item.sort) {\n        this.currentSort = null;\n      } else {\n        this.currentSort = item.field + \"-\" + item.sort;\n      }\n      // 如果是距离优先排序，使用搜索地址的位置信息\n      this.loadHotelList({\n        \"field\": this.currentSort ? this.currentSort.split('-')[0] : \"\",\n        \"sort\": this.currentSort ? this.currentSort.split('-')[1] : \"\",\n      });\n    },\n    formatDateIn(dateStr) {\n      const date = new Date(dateStr);\n      // 如果用户选择了凌晨时段，我们需要正确地增加一天\n      if (this.iChoseEarlyMorning) {\n        date.setDate(date.getDate() + 1);\n      }\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\n      const day = date.getDate().toString().padStart(2, '0');\n      return `${month}月${day}日`;\n    },\n    formatDate(dateStr) {\n      const date = new Date(dateStr);\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\n      const day = date.getDate().toString().padStart(2, '0');\n      return `${month}月${day}日`;\n    },\n    handleLocationClick() {\n      // 处理位置点击\n      if (!this.currentAddress) {\n        this.getLocation();\n      }\n      this.showDetailAddress = true;\n    },\n    handleCardSearch() {\n      // 更新显示的值\n      this.showZeroToSixPrompt = this.tempShowZeroToSixPrompt;\n      this.iChoseEarlyMorning = this.tempIChoseEarlyMorning;\n      this.checkInDate = this.formatDateIn(this.tempCheckInDate);\n      this.checkOutDate = this.formatDate(this.tempCheckOutDate);\n      this.originCheckInDate = this.tempCheckInDate;\n      this.originCheckOutDate = this.tempCheckOutDate;\n      this.nightCount = this.tempNightCount;\n      this.bedCount = this.tempBedCount;\n      // 保存到本地存储\n      const searchParams = {\n        city: this.currentCity,\n        checkIn: this.originCheckInDate,\n        checkOut: this.originCheckOutDate,\n        nights: this.nightCount,\n        bedCount: this.bedCount,\n        showZeroToSixPrompt: this.tempShowZeroToSixPrompt,\n        iChoseEarlyMorning: this.tempIChoseEarlyMorning\n      };\n      // 保存到本地存储\n      uni.setStorageSync('searchParams', searchParams);\n      // 关闭搜索卡片\n      this.showSearchCard = false;\n    },\n    // 日期选择改变\n    onDateChange(dates) {\n      if (dates && dates.detail.length === 3) {\n        this.tempCheckInDate = dates.detail[0];\n        this.tempCheckOutDate = dates.detail[1];\n        this.tempNightCount = dates.detail[2];\n        this.tempShowZeroToSixPrompt = dates.showZeroToSixPrompt\n        this.tempIChoseEarlyMorning = dates.iChoseEarlyMorning\n      }\n    },\n\n    // 床位数选择关闭\n    handleBedPickerClose() {\n      // 关闭时恢复原值\n      this.tempBedCount = this.bedCount;\n      this.showBedPicker = false;\n    },\n\n    // 床位数确认\n    onBedCountConfirm(value) {\n      // 只更新临时值，实际值等点击确认按钮时再更新\n      this.tempBedCount = value;\n      this.tempBedCount_ = value;\n      this.bedCount = value;\n      this.showBedPicker = false;\n    },\n    handleSearchClick() {\n      this.showPopup = false;\n      uni.navigateTo({\n        url: `/pages/subPackages/home/search-result/index?city=${encodeURIComponent(this.currentCity)}&keyword=${encodeURIComponent(this.searchKeyword)}`\n      });\n    },\n    refreshLocation() {\n      uni.showToast({title: '刷新定位', icon: 'none'});\n    },\n    goToCitySelect() {\n      this.showPopup = false;\n      uni.navigateTo({\n        url: '/pages/subPackages/home/city-select/index',\n        events: {\n          citySelected: (city) => {\n            this.currentCity = city.displayName || city.name;\n            this.currentDistrict = city.district || '';\n            this.longitude = city.longitude || '';\n            this.latitude = city.latitude || '';\n            // 更新搜索参数\n            const searchParams = uni.getStorageSync('searchParams') || {};\n            searchParams.city = city.displayName || city.name;\n            searchParams.district = city.district || '';\n            searchParams.longitude = city.longitude || '';\n            searchParams.latitude = city.latitude || '';\n            uni.setStorageSync('searchParams', searchParams);\n            this.loadHotelList({\n              city: searchParams.city\n            });\n          }\n        }\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  min-height: 100vh;\n  height: 100vh;\n  background: #F3F4F6;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n}\n\n/* 遮罩层样式 */\n.mask {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(25, 25, 26, 0.6);\n  backdrop-filter: blur(0px);\n  z-index: 999;\n}\n\n/* 搜索卡片弹窗样式 */\n.search-card-popup {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  z-index: 1001;\n  overflow: hidden;\n  background-color: #FFF;\n}\n\n.filter-tabs-wrapper {\n  width: 100%;\n  position: relative;\n  background: white;\n  z-index: 100;\n}\n\n.filter-tabs {\n  display: flex;\n  padding: 28rpx 160rpx 28rpx 160rpx;\n  gap: 50%;\n  align-items: center;\n  margin-top: 0;\n  background: white;\n}\n\n.popup-container {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  height: 400rpx;\n  overflow: hidden;\n  z-index: 100;\n}\n\n.custom-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  background: white;\n  z-index: 101;\n  animation: slideDown 0.2s ease-out;\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-10rpx);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.content-wrapper {\n  width: auto;\n  flex: 1;\n  height: calc(100vh - var(--status-bar-height) - 88rpx - 120rpx - 96rpx - 30rpx);\n  padding: 0;\n  position: relative;\n  margin-top: 0;\n}\n\n.content-wrapper.enable-scroll {\n  overflow-y: auto !important;\n  -webkit-overflow-scrolling: touch;\n}\n\n.nav-title {\n  width: 100%;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 32rpx;\n  color: #19191A;\n  text-align: center;\n  font-style: normal;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 88rpx;\n}\n\n.nav-more {\n  font-size: 36rpx;\n  color: #19191A;\n  padding: 0 20rpx;\n}\n\n.search-header {\n  background: #FFFFFF;\n  padding: 24rpx 28rpx;\n  position: relative;\n  z-index: 1000;\n  margin-bottom: 0;\n}\n\n.search-content {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 64rpx;\n  background: #F3F7FA !important;\n  border-radius: 46rpx;\n  padding: 14rpx 0;\n}\n\n.city-section {\n  display: flex;\n  align-items: center;\n  gap: 8rpx;\n  padding-left: 32rpx;\n  padding-right: 20rpx;\n  height: 100%;\n  min-width: 56rpx;\n  max-width: 112rpx;\n}\n\n.city-text {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-size: 24rpx;\n  color: #19191A;\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  flex: 1;\n}\n\n.city-arrow {\n  width: 14rpx;\n  height: 9rpx;\n  background-image: url(\"https://www.zxd-hotel.xin/zxdhotel/icon/down.png\");\n  background-size: 100% 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  flex-shrink: 0;\n  margin-left: 4rpx;\n  transition: transform 0.3s ease;\n}\n\n.select-text {\n  color: #EE781F !important;\n}\n\n.select-up {\n  background-image: url(\"https://www.zxd-hotel.xin/zxdhotel/icon/select-down.png\") !important;\n}\n\n.arrow {\n  width: 14rpx;\n  height: 9rpx;\n  background-image: url(\"https://www.zxd-hotel.xin/zxdhotel/icon/down.png\");\n  background-size: 100% 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n.city-arrow.arrow-up {\n  transform: rotate(180deg);\n}\n\n.date-section {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  height: 100%;\n  flex: 1;\n  padding-left: 20rpx;\n  gap: 8rpx;\n  position: relative;\n}\n\n.date-group {\n  display: flex;\n  align-items: center;\n  line-height: 1;\n}\n\n.date-label {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 400;\n  font-size: 24rpx;\n  color: #19191A;\n  text-align: left;\n  font-style: normal;\n}\n\n.date {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 24rpx;\n  color: #19191A;\n  line-height: 1;\n  text-align: left;\n  font-style: normal;\n  margin-left: 12rpx;\n  margin-right: 20rpx;\n}\n\n.date-arrow {\n  width: 14rpx;\n  height: 9rpx;\n  background-image: url(\"https://www.zxd-hotel.xin/zxdhotel/icon/down.png\");\n  background-size: 100% 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  position: absolute;\n  right: 20rpx;\n  top: 50%;\n  transform: translateY(-50%);\n  transition: transform 0.3s ease;\n}\n\n.date-arrow.arrow-up {\n  transform: translateY(-50%) rotate(180deg);\n}\n\n.divider {\n  width: 2rpx;\n  height: 54rpx;\n  background: #E8E9EB;\n  margin-right: 20rpx;\n}\n\n.search-section {\n  flex: 1.5;\n  height: 100%;\n  display: flex;\n  align-items: center;\n}\n\n.search-bar {\n  display: flex;\n  align-items: center;\n  width: 100%;\n  opacity: 0.6;\n}\n\n.search-icon {\n  width: 34rpx;\n  height: 34rpx;\n  margin-right: 12rpx;\n}\n\n.search-input {\n  flex: 1;\n  font-size: 28rpx;\n  color: #19191A !important;\n  background: transparent !important;\n  white-space: nowrap;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n  margin-right: 12rpx;\n}\n\n.check-icon {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  width: 24rpx;\n  height: 24rpx;\n  z-index: 2;\n}\n\n/* 添加日历页面样式 */\n.calendar-page {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1002;\n  background-color: #fff;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  transform: translateY(100%);\n  transition: transform 0.3s ease-out;\n}\n\n.calendar-page.show {\n  transform: translateY(0);\n}\n\n.dropdown-btn {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 56rpx;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 400;\n  font-size: 28rpx;\n  color: #19191A;\n  line-height: 28rpx;\n  text-align: center;\n  font-style: normal;\n}\n\n.arrow {\n  margin-left: 10rpx;\n  font-size: 24rpx;\n  transition: transform 0.3s ease;\n}\n\n.arrow.up {\n  transform: rotate(180deg);\n}\n\n.content-mask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 99;\n}\n\n.mask-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(25, 25, 26, 0.7);\n}\n\n.popup-content {\n  max-height: 400rpx;\n  overflow-y: auto;\n  z-index: 102;\n  background: white;\n  margin-top: 20rpx;\n}\n\n.popup-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  height: 100rpx;\n  margin: 0 28rpx;\n}\n\n.popup-item-l {\n  display: flex;\n}\n\n.popup-item-icon {\n  width: 26rpx;\n  height: 28rpx;\n  margin-left: 10rpx;\n}\n\n.popup-item-line {\n  width: 100%;\n  height: 2rpx;\n  background: #E8E9EB;\n}\n\n.popup-text {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-size: 28rpx;\n  color: #19191A;\n  line-height: 1;\n}\n\n.coupon-radio {\n  margin-right: 18rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.custom-radio {\n  width: 36rpx;\n  height: 36rpx;\n}\n</style>","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=4fc48070&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=4fc48070&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1769665549219\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}