{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/order/index.vue?dc95","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/order/index.vue?e5e7","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/order/index.vue?b44f","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/order/index.vue?7bbc","uni-app:///pages/subPackages/order/index.vue","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/order/index.vue?e436","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/order/index.vue?6320"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","HotelCalendar","data","showZeroToSixPrompt","iChoseEarlyMorning","type_order","cutoffTime","thirdOrderId","thirdRoomName","type","loading","orderData","hotelId","hotelName","hotelAddress","roomTypeId","roomTypeName","roomCount","checkInDate","checkOutDate","contactName","contactPhone","arrivalTime","guestList","roomFee","memberDiscount","redPacketDiscount","redPacketId","totalAmount","paymentMethod","avgNightPrice","deductOrderId","limitTimeDiscount","threePartyDeduction","dailyPrices","arriveTimes","arriveIndex","chineseNumbers","lateArriveChecked","agreeChecked","showCouponPopup","selectedCouponId","couponList","first","showCalendar","feeDetailExpand","computed","arriveTimesRows","rows","groupedFeeDetailsByDate","map","date","actualPrice","discountSharing","discountPrice","originalPrice","discountDescription","count","onLoad","uni","frontColor","backgroundColor","methods","formatDateIn","formatDate","formatDateRed","loadOrderDataFromParams","searchParams","hotelRoomDetailData","orderId","historyCheckInPerson","console","syncGuestList","guestName","goBack","changeBed","next","updateSearchParams","selectPayMethod","getWeekDay","calculateNights","recalculateTotal","params","result","sum","title","icon","fetchCouponList","roomId","amount","days","list","firstCoupon","onCouponConfirm","selected","onCalendarConfirm","dates","validatePhone","onSelectDate","onCouponClick","onCouponSelect","onCouponCancel","submitOrder","mask","orderParams","lateArrival","catch","orderResult","url","payResult","provider","success","fail","toggleAgree","goToBookingNotice","goToPaymentAgreement"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,kRAEN;AACP,KAAK;AACL;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3HA;AAAA;AAAA;AAAA;AAAk1B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;AC8Vt2B;AAUA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAC;IACAC;EACA;EACAC;IAAA;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MAAA,oEACA,oEACA,0DACA,eACA;MACAC;MAAA;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;;EACAC;IACA;IACAC;MACA;MACA;MACA;QACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;QACA;QACA;UACAC;YACAC;YACAC;YACAC;YACAC;YACAC;YACAC;YACAC;UACA;QACA;QACAP;QACAA;QACAA;QACAA;QACAA;QACAA;MACA;MACA;IACA;EACA;EACAQ;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;cACA;cACAC;gBACAC;gBACAC;cACA;cAAA;cAAA,OACA;YAAA;cAAA;cACA;cACA;cACA;cACA;cACA;cACA;cAAA;cAAA,OACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EACAC;IACAC;MACA;MACA;MACA;QACAZ;MACA;MACA;MACA;MACA;IACA;IACAa;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;gBACAC;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBACA;gBACAC;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBACA;kBACA;kBACA;kBACA;gBACA;gBACA;kBACA;gBACA;gBACA;gBACA;gBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAC;cAAA;gBAAA;gBAEA;gBACA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAC;MACA;MACA;MACA;QACA;QACA;UACA;YAAAC;UAAA;QACA;MACA;QACA;QACA;MACA;IACA;IAEAC;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACA;gBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MACA;QACA;QACA;UACAV;UACAA;UACAA;UACAA;UACAR;QACA;MACA;QACAY;MACA;IACA;IAEA;IACAO;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;IACA;IAGA;IACAC;MACA;MACA;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAC;kBACAzE;kBACAG;kBACAG;kBACAE;kBACAC;kBACAC;kBACAQ;gBACA;gBACA;kBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAwD;gBACA;kBACA;kBACA;kBACA;kBACA;kBACA;oBACA;oBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;oBACAC;sBAAA;oBAAA;oBACA;kBACA;oBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAb;gBACAZ;kBACA0B;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAL;kBACAtE;kBACA4E;kBACAC;kBACAC;kBACAxE;kBACAT;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAkF;gBACA;gBACA;gBACA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACA;gBACAC;gBACA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGA;gBACA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACAC;kBAAA;gBAAA;gBACA;kBACA;gBACA;kBACA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACAC;kBAAA;kBAAA;gBAAA;gBAAA,6CACAA;gBACA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA,OAEA;cAAA;gBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAC;MACA;MACA;QACAtC;UACA0B;UACAC;QACA;QACA;MACA;MACA;QACA3B;UACA0B;UACAC;QACA;QACA;MACA;MACA;IACA;IACAY;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,MAGA;kBAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBACA3C;kBAAA0B;kBAAAC;gBAAA;gBAAA;cAAA;gBAIA;gBACA3B;kBACA0B;kBACAkB;gBACA;;gBAEA;gBACAC,8CACA;kBACA/F;kBACAa;kBACAmF;gBAAA,IAGA;gBAAA;gBAAA,OACA,mCACAC;kBACA;gBACA;cAAA;gBAHAC;gBAAA,MAMAA;kBAAA;kBAAA;gBAAA;gBACAhD;gBACAA;kBACAiD;gBACA;gBAAA;cAAA;gBAAA;gBAAA,OAKA,kEACAF;kBACA;gBACA;cAAA;gBAHAG;gBAIA;gBACAlD;gBACA;gBACA;kBACA;kBACAA;oBACAmD;kBAAA,GACAD;oBACAE;sBACApD;wBACAiD;sBACA;oBACA;oBACAI;sBACArD;wBAAA0B;sBAAA;sBACA1B;wBAAAiD;sBAAA;oBACA;kBAAA,GACA;gBACA;kBACA;kBACAjD;oBACA0B;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGA3B;gBACAA;kBACA0B;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA2B;MACA;IACA;IACAC;MACAvD;QACAiD;MACA;IACA;IACAO;MACAxD;QACAiD;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC30BA;AAAA;AAAA;AAAA;AAAqlD,CAAgB,07CAAG,EAAC,C;;;;;;;;;;;ACAzmD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/subPackages/order/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/subPackages/order/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=a06635b4&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=a06635b4&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a06635b4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/subPackages/order/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=a06635b4&scoped=true&\"","var components\ntry {\n  components = {\n    uniNavBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar\" */ \"@/uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = !_vm.loading ? _vm.formatDateIn(_vm.orderData.checkInDate) : null\n  var m1 = !_vm.loading ? _vm.getWeekDay(_vm.orderData.checkInDate) : null\n  var m2 = !_vm.loading ? _vm.calculateNights() : null\n  var m3 = !_vm.loading ? _vm.formatDate(_vm.orderData.checkOutDate) : null\n  var m4 = !_vm.loading ? _vm.getWeekDay(_vm.orderData.checkOutDate) : null\n  var m5 = !_vm.loading && !_vm.type ? _vm.calculateNights() : null\n  var g0 =\n    !_vm.loading && !_vm.type\n      ? _vm.feeDetailExpand &&\n        _vm.orderData.roomFeeDetails &&\n        _vm.orderData.roomFeeDetails.length\n      : null\n  var l0 =\n    !_vm.loading && !_vm.type && g0\n      ? _vm.__map(_vm.groupedFeeDetailsByDate, function (item, __i0__) {\n          var $orig = _vm.__get_orig(item)\n          var g1 = item.actualPrice.toFixed(2)\n          var g2 =\n            item.discountSharing > 0 ||\n            item.originalPrice - item.discountPrice > 0\n              ? item.discountDescription.toFixed(2)\n              : null\n          return {\n            $orig: $orig,\n            g1: g1,\n            g2: g2,\n          }\n        })\n      : null\n  var g3 =\n    !_vm.loading && !_vm.type\n      ? _vm.couponList.length > 0 && _vm.orderData.redPacketDiscount >= 0\n      : null\n  var g4 = !_vm.loading && !_vm.type && !g3 ? _vm.couponList.length : null\n  var g5 = !_vm.loading && !_vm.type && !g3 ? _vm.couponList.length : null\n  var g6 = !_vm.loading && !_vm.type && !g3 ? _vm.couponList.length : null\n  var g7 = !_vm.loading ? _vm.orderData.totalAmount.toFixed(2) : null\n  var l1 =\n    _vm.showCouponPopup && !_vm.loading\n      ? _vm.__map(_vm.couponList, function (coupon, __i1__) {\n          var $orig = _vm.__get_orig(coupon)\n          var m6 = _vm.formatDateRed(coupon.redPacket.startTime)\n          var m7 = _vm.formatDateRed(coupon.redPacket.endTime)\n          return {\n            $orig: $orig,\n            m6: m6,\n            m7: m7,\n          }\n        })\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.feeDetailExpand = !_vm.feeDetailExpand\n    }\n    _vm.e1 = function ($event) {\n      _vm.couponList.length > 0 ? _vm.onCouponClick : null\n    }\n    _vm.e2 = function ($event) {\n      _vm.agreeChecked && _vm.submitOrder()\n    }\n    _vm.e3 = function ($event) {\n      _vm.showCalendar = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        m3: m3,\n        m4: m4,\n        m5: m5,\n        g0: g0,\n        l0: l0,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n        g6: g6,\n        g7: g7,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"order-container\">\n    <uni-nav-bar\n        :shadow=\"false\"\n        :border=\"false\"\n        :fixed=\"true\"\n        left-icon=\"left\"\n        status-bar\n        @clickLeft=\"goBack\">\n      <template #default>\n        <text class=\"nav-title\">填写订单</text>\n      </template>\n    </uni-nav-bar>\n\n    <!-- 添加加载状态 -->\n    <view v-if=\"loading\" class=\"loading-container\">\n      <view class=\"loading-content\">\n        <view class=\"loading-spinner\"></view>\n        <text class=\"loading-text\">加载中...</text>\n      </view>\n    </view>\n\n    <!-- 酒店与房型信息 -->\n    <view v-else class=\"order-hotel-box\">\n      <view class=\"hotel-title\">{{ orderData.hotelName }}</view>\n      <view class=\"hotel-desc\">\n        <view class=\"map-icon\"></view>\n        <text class=\"hotel-desc-text\">{{ orderData.hotelAddress }}</text>\n      </view>\n      <view class=\"line\"></view>\n      <view class=\"order-date-row\" @click=\"onSelectDate\">\n        <view class=\"date-left\">\n          <text class=\"date-main\">{{ formatDateIn(orderData.checkInDate) }}</text>\n          <text class=\"date-week\">{{ getWeekDay(orderData.checkInDate) }}</text>\n        </view>\n        <view class=\"nights-tag\">共{{ calculateNights() }}晚</view>\n        <view class=\"date-right\">\n          <text class=\"date-main\">{{ formatDate(orderData.checkOutDate) }}</text>\n          <text class=\"date-week\">{{ getWeekDay(orderData.checkOutDate) }}</text>\n        </view>\n      </view>\n      <view class=\"order-room-row\">\n        <text class=\"room-type\">{{ orderData.roomTypeName }}</text>\n        <view class=\"room-divider\"></view>\n        <text class=\"bed-count\">{{ orderData.saleMode === 1 ? '房间数' : '床位数' }}：{{ orderData.roomCount }}</text>\n      </view>\n    </view>\n    <view v-if=\"type_order==='1'\" class=\"early-morning-tip\">\n      <image src=\"https://www.zxd-hotel.xin/zxdhotel/icon/txicon@2x.png\" mode=\"widthFix\"\n             class=\"early-morning-tip-icon\"/>\n      <view class=\"early-morning-tip-text\">\n        <text>您预定的是连住套餐，不可提前取消，详情请咨询前台工作人员</text>\n      </view>\n    </view>\n\n    <!-- 订房信息 -->\n    <view v-if=\"!loading\" class=\"form-title\">订房信息</view>\n    <view v-if=\"!loading\" class=\"order-form-box\">\n      <view class=\"form-row\">\n        <text class=\"form-label\">所需{{ orderData.saleMode === 1 ? '房间数' : '床位数' }}\n          <text class=\"required\">*</text>\n        </text>\n        <view class=\"bed-count-ctrl\">\n          <view\n              :class=\"['bed-btn-img', orderData.roomCount <= 1 || type ? 'disabled' : '']\"\n              @click=\"changeBed(-1)\"\n          ></view>\n          <text class=\"bed-num\">{{ orderData.roomCount }}</text>\n          <view\n              :class=\"['bed-btn-img plus', orderData.roomCount >= 20 || type ? 'disabled' : '']\"\n              @click=\"changeBed(1)\"\n          ></view>\n        </view>\n      </view>\n      <view class=\"order-row-line\"></view>\n      <view class=\"line-group\" v-for=\"(guest, idx) in orderData.guestList\" :key=\"idx\">\n        <view class=\"form-row\">\n          <text class=\"form-label\">入住人{{ chineseNumbers[idx] }}\n            <text class=\"required\">*</text>\n          </text>\n          <input class=\"form-input\" v-model=\"orderData.guestList[idx].guestName\" :placeholder=\"`请输入入住人姓名`\"/>\n        </view>\n        <view class=\"order-row-line\"></view>\n      </view>\n      <view class=\"form-row\">\n        <text class=\"form-label\">手机号\n          <text class=\"required\">*</text>\n        </text>\n        <input class=\"form-input\" v-model=\"orderData.contactPhone\" placeholder=\"请输入手机号\"\n               @blur=\"validatePhone\" type=\"number\" maxlength=\"11\"/>\n      </view>\n      <!--      <view class=\"order-row-line\"></view>\n            <view class=\"form-row form-row-vertical\">\n              <view class=\"form-label-row\">\n                <text class=\"form-label\">\n                  <text class=\"info-text\">预计到店时间</text>\n                  <text class=\"info-icon\"></text>\n                </text>\n              </view>\n              <view class=\"arrive-time-group\">\n                <view class=\"arrive-time-row\" v-for=\"(row, rowIdx) in arriveTimesRows\" :key=\"rowIdx\">\n                  <view\n                      v-for=\"(item, idx) in row\"\n                      :key=\"item\"\n                      :class=\"['arrive-time-btn', { 'active': arriveIndex === (rowIdx * 3 + idx) }]\"\n                      @click=\"arriveIndex = rowIdx * 3 + idx\"\n                  >{{ item }}\n                  </view>\n                </view>\n                <view class=\"late-arrive-row\" @click=\"lateArriveChecked = !lateArriveChecked\">\n                  <radio :checked=\"lateArriveChecked\" color=\"#EE781F\" style=\"transform:scale(0.8);margin-right:10rpx;\"/>\n                  <text class=\"late-arrive-text\">到店时间可能晚于22:00，请酒店留房</text>\n                </view>\n              </view>\n            </view>-->\n    </view>\n\n    <!-- 费用明细 -->\n    <view v-if=\"!loading\" class=\"form-title\">费用明细</view>\n    <view v-if=\"!loading\" class=\"order-fee-box\">\n      <!-- 房费总览，可点击展开/收起 -->\n      <template v-if=\"!type\">\n        <view class=\"fee-row fee-room-toggle\" @click=\"feeDetailExpand = !feeDetailExpand\">\n          <text>房费（{{ calculateNights() }}晚）</text>\n          <view class=\"fee-room-right\">\n            <text class=\"price\">￥{{ orderData.totalOriginalPrice }}</text>\n            <image\n                src=\"/static/base/right.png\"\n                class=\"arrow-icon\"\n                :style=\"{ transform: feeDetailExpand ? 'rotate(-90deg)' : 'rotate(90deg)' }\"\n                mode=\"aspectFit\"\n                width=\"32rpx\"\n                height=\"32rpx\"\n            />\n          </view>\n        </view>\n        <view v-if=\"feeDetailExpand && orderData.roomFeeDetails && orderData.roomFeeDetails.length\"\n              class=\"fee-detail-list-simple\">\n          <!-- 新增：平均每晚 -->\n          <view class=\"fee-detail-avg-row\">\n            平均每晚￥{{ orderData.avgNightPrice }}\n          </view>\n          <view class=\"fee-detail-item-simple\" v-for=\"item in groupedFeeDetailsByDate\" :key=\"item.date\">\n            <text class=\"fee-detail-date-simple\">{{ item.date }}</text>\n            <text class=\"fee-detail-count-simple\" v-if=\"item.count > 1\">×{{ item.count }}</text>\n            <text class=\"fee-detail-amount-simple\">\n              ￥{{ item.actualPrice.toFixed(2) }}\n              <text v-if=\"item.discountSharing > 0 || (item.originalPrice-item.discountPrice)>0\">\n                (￥{{ item.discountDescription.toFixed(2) }})\n              </text>\n            </text>\n          </view>\n        </view>\n      </template>\n      <template v-else>\n        <view class=\"fee-row\">\n          <text>房费</text>\n          <text class=\"fee-discount\">￥{{ orderData.totalOriginalPrice }}</text>\n        </view>\n      </template>\n\n      <!-- 会员优惠、红包抵扣、应付总额等保留 -->\n      <view class=\"fee-row\" v-if=\"!type && orderData.limitTimeDiscount > 0\">\n        <text>限时优惠</text>\n        <text class=\"fee-discount\">减￥{{ orderData.limitTimeDiscount }}</text>\n      </view>\n      <view v-if=\"type\" class=\"fee-row\">\n        <text>第三方抵扣</text>\n        <text class=\"fee-discount\">减￥{{ orderData.threePartyDeduction }}</text>\n      </view>\n      <!--      <view v-if=\"!type\" class=\"fee-row\">-->\n      <!--        <text>会员优惠</text>-->\n      <!--        <text class=\"fee-discount\">减￥{{ orderData.memberDiscount }}</text>-->\n      <!--      </view>-->\n      <view v-if=\"!type\" class=\"fee-row\">\n        <view>红包抵扣</view>\n        <view class=\"free-coupon\" v-if=\"couponList.length > 0 && orderData.redPacketDiscount >= 0\"\n              @click=\"onCouponClick\">\n          <text class=\"fee-discount\">减￥{{ orderData.redPacketDiscount }}</text>\n          <view class=\"hotel-info-l\">\n            <uni-icons type=\"arrowright\" size=\"14\" color=\"#A2A2A8\"></uni-icons>\n          </view>\n        </view>\n        <view class=\"free-coupon\" v-else @click=\"couponList.length > 0 ? onCouponClick : null\"\n              :class=\"{'disabled': couponList.length === 0}\">\n          <text class=\"fee-discount\" v-if=\"couponList.length > 0\">减￥{{ couponList[0].redPacket.amount }}</text>\n          <text class=\"fee-disable\" v-else>暂无可用红包</text>\n          <view class=\"hotel-info-l\" v-if=\"couponList.length > 0\">\n            <uni-icons type=\"arrowright\" size=\"14\" color=\"#A2A2A8\"></uni-icons>\n          </view>\n        </view>\n      </view>\n      <view class=\"fee-row fee-total\">\n        <text>应付总额</text>\n        <text class=\"fee-total-num\">\n          <text class=\"currency\">￥</text>\n          {{ orderData.totalAmount }}\n        </text>\n      </view>\n    </view>\n\n    <!-- 支付方式 -->\n    <template v-if=\"!type && !loading\">\n      <view class=\"pay-title\">选择支付方式</view>\n      <view class=\"pay-method-section\">\n        <view class=\"pay-method\" @click=\"selectPayMethod(1)\">\n          <image class=\"icon\" src=\"/static/base/weixin.png\" mode=\"aspectFill\"/>\n          <view class=\"text\">微信支付</view>\n          <image\n              :src=\"orderData.paymentMethod === 1 ? '/static/base/radio_checked_da.png' : '/static/base/radio_unchecked_da.png'\"\n              class=\"custom-radio\"\n              mode=\"aspectFit\"\n              @click.stop=\"selectPayMethod(1)\"\n          />\n        </view>\n        <!--      <view class=\"line\"></view>\n              <view class=\"pay-method\" @click=\"selectPayMethod(2)\">\n                <image class=\"icon\" src=\"/static/base/alipay.png\"/>\n                <view class=\"text\">支付宝支付</view>\n                <image\n                  :src=\"orderData.paymentMethod === 2 ? '/static/base/radio_checked.png' : '/static/base/radio_unchecked.png'\"\n                  class=\"custom-radio\"\n                  @click.stop=\"selectPayMethod(2)\"\n                />\n              </view>-->\n      </view>\n      <view class=\"notice\">\n        预订须知：</br>\n        预订成功后，入住当日18点前可免费取消。18-21点取消需支付当天房费30%违约金，21点后不可取消，建议您提前做好出行规划。办理入住时需出示有效证件。\n      </view>\n    </template>\n    <template v-else-if=\"type && !loading\">\n      <view class=\"notice\">\n        预订须知：</br>\n        为保障您的预订权益，第三方平台订单自入住当天 零点起即不可取消或调整，敬请谅解\n      </view>\n    </template>\n\n    <!-- 新增底部固定区域 -->\n    <view v-if=\"!loading\" class=\"order-bottom-fixed\">\n      <view class=\"order-agree-bar\">\n        <image\n            :src=\"agreeChecked ? '/static/base/radio_checked.png' : '/static/base/radio_unchecked.png'\"\n            class=\"custom-radio custom-radio-min\"\n            mode=\"aspectFit\"\n            @click=\"toggleAgree\"\n        />\n        <view class=\"agree-text\" @click=\"toggleAgree\">\n          我已阅读并同意\n          <text class=\"agree-link\" @click.stop=\"goToBookingNotice\">《预订须知》</text>\n          和\n          <text class=\"agree-link\" @click.stop=\"goToPaymentAgreement\">《支付服务协议》</text>\n        </view>\n      </view>\n      <view class=\"order-bottom-bar-new\">\n        <view class=\"order-bottom-left\">\n          <text class=\"bottom-label\">应付总额</text>\n          <view class=\"bottom-amount\">\n            <text class=\"bottom-currency\">￥</text>\n            <text class=\"bottom-num\">{{ orderData.totalAmount.toFixed(2) }}</text>\n          </view>\n        </view>\n        <view\n            class=\"order-bottom-btn\"\n            :class=\"{ disabled: !agreeChecked }\"\n            @click=\"agreeChecked && submitOrder()\"\n        >提交订单并支付{{ orderData.totalAmount }}元\n        </view>\n      </view>\n    </view>\n\n    <!-- 优惠券选择弹窗 -->\n    <view v-if=\"showCouponPopup && !loading\" class=\"coupon-popup-mask\">\n      <view class=\"coupon-popup\">\n        <view class=\"bed-picker-header\">\n          <text class=\"coupon-popup-title\">选择红包</text>\n          <text class=\"close-icon\" @click=\"onCouponCancel\"/>\n        </view>\n        <view class=\"coupon-list\">\n          <view class=\"coupon-card\" v-for=\"coupon in couponList\" :key=\"coupon.id\">\n            <view class=\"coupon-item\"\n                  @click.stop=\"onCouponSelect(coupon.id)\">\n              <view class=\"coupon-info\">\n                <view class=\"coupon-info-l\">\n                  <view class=\"coupon-info-l-title\">\n                    {{ coupon.redPacket.name }}\n                  </view>\n                  <view class=\"coupon-info-l-time\">\n                    有效期{{ formatDateRed(coupon.redPacket.startTime) }}-{{ formatDateRed(coupon.redPacket.endTime) }}\n                  </view>\n                  <view class=\"coupon-info-l-tag\">\n                    <text v-if=\"coupon.redPacket.minSpend > 0\" class=\"tag\">满{{\n                        coupon.redPacket.minSpend\n                      }}元可用\n                    </text>\n                    <text v-else class=\"tag\">无门槛立减</text>\n                    <text v-if=\"coupon.redPacket.scopeType === 1\"\n                          class=\"tag\">适用于全部门店\n                    </text>\n                    <text v-else class=\"tag\">适用于指定门店</text>\n                    <text v-if=\"coupon.redPacketRule.stayDays > 0\" class=\"tag\">\n                      适用于连续{{ coupon.redPacketRule.stayDays }}晚及以上订单\n                    </text>\n                  </view>\n                </view>\n                <view class=\"coupon-info-r\">\n                  <view class=\"coupon-info-r-amount-box\">\n                    <view class=\"coupon-info-r-amount\">{{ coupon.redPacket.amount }}</view>\n                    <view class=\"coupon-info-r-unit\">元</view>\n                  </view>\n                </view>\n              </view>\n              <view v-if=\"coupon.soonExpire\" class=\"coupon-tag-expired\"></view>\n              <view v-if=\"coupon.soonExpire\" class=\"coupon-tag-expired-text\">即将到期</view>\n            </view>\n            <view class=\"coupon-radio\">\n              <image\n                  :src=\"selectedCouponId === coupon.id ? '/static/base/radio_checked_da.png' : '/static/base/radio_unchecked_da.png'\"\n                  class=\"custom-radio\"\n                  mode=\"aspectFit\"\n                  @click.stop=\"onCouponSelect(coupon.id)\"\n              />\n            </view>\n          </view>\n        </view>\n        <view class=\"coupon-popup-actions-new\">\n          <view class=\"no-coupon-row\" @click.stop>\n            <radio :checked=\"selectedCouponId === null\" color=\"#EE781F\" style=\"transform:scale(0.8);margin-right:12rpx;\"\n                   @click.stop=\"onCouponSelect(null)\"/>\n            <text class=\"no-coupon-text\">不使用红包</text>\n          </view>\n          <view class=\"coupon-btn-main\" @click=\"onCouponConfirm\">确定</view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 添加日历组件 -->\n    <HotelCalendar\n        v-if=\"showCalendar && !loading\"\n        @change=\"onCalendarConfirm\"\n        @close=\"showCalendar = false\"\n        :value=\"[orderData.checkInDate, orderData.checkOutDate]\"\n        :isItOptionalToday=!type\n        :class=\"['calendar-page', showCalendar ? 'show' : '']\"\n        :cutoffTime=\"cutoffTime\"\n    />\n  </view>\n</template>\n\n<script>\nimport {\n  calculateThePrice,\n  createOrder,\n  getAvailableRedEnvelopeList,\n  getHistoryCheckInPerson,\n  getRoomInfo,\n  placeAnOrder,\n  getCutoffTime\n} from \"../../../common/api\";\nimport HotelCalendar from '@/components/HotelCalendar.vue';\nimport {pageBack} from \"../../../common/redirect\";\n\nexport default {\n  components: {\n    HotelCalendar\n  },\n  data() {\n    return {\n      showZeroToSixPrompt: false, // 决定着是否提示凌晨了\n      iChoseEarlyMorning: false,//决定了用户是否选择了凌晨如果选择了 则需要在显示上进行加1\n      type_order: 0,\n      cutoffTime: '06:00',\n      thirdOrderId: null,\n      thirdRoomName: null,\n      type: false,\n      loading: true, // 添加加载状态\n      // 订单数据\n      orderData: {\n        hotelId: 1,\n        hotelName: \"\",\n        hotelAddress: \"\",\n        roomTypeId: 1,\n        roomTypeName: \"\",\n        roomCount: 2,\n        checkInDate: \"\",\n        checkOutDate: \"\",\n        contactName: \"\",\n        contactPhone: \"\",\n        arrivalTime: \"\",\n        guestList: [],\n        roomFee: 0,\n        memberDiscount: 0,\n        redPacketDiscount: 0,\n        redPacketId: null,\n        totalAmount: 0,\n        paymentMethod: 1,\n        avgNightPrice: '0.00',\n        deductOrderId: null,\n        limitTimeDiscount: 0,\n        threePartyDeduction: 0,\n        threePartyDeduction: 0,\n        totalOriginalPrice: 0,\n        saleMode: 0,\n      },\n      dailyPrices: [], // 添加存储每天价格的数组\n      // UI控制数据\n      arriveTimes: ['14:00-16:00', '16:00-18:00', '18:00-20:00', '20:00-22:00', '次日00:00-06:00'],\n      arriveIndex: 0,\n      chineseNumbers: ['①', '②', '③', '④', '⑤', '⑥', '⑦', '⑧', '⑨', '⑩'],\n      lateArriveChecked: false,\n      agreeChecked: false,\n      showCouponPopup: false, // 控制优惠券弹窗显示\n      selectedCouponId: null, // 临时选中的优惠券id\n      couponList: [],\n      first: false,\n      showCalendar: false,\n      feeDetailExpand: false, // 新增：控制费用明细展开/收起\n    }\n  },\n  computed: {\n    // 到店时间行数组\n    arriveTimesRows() {\n      const rowLength = 3;\n      const rows = [];\n      for (let i = 0; i < this.arriveTimes.length; i += rowLength) {\n        rows.push(this.arriveTimes.slice(i, i + rowLength));\n      }\n      return rows;\n    },\n    groupedFeeDetailsByDate() {\n      if (!Array.isArray(this.orderData.roomFeeDetails)) return [];\n      const map = {};\n      this.orderData.roomFeeDetails.forEach(item => {\n        const key = item.date;\n        if (!map[key]) {\n          map[key] = {\n            date: item.date,\n            actualPrice: 0,\n            discountSharing: 0,\n            discountPrice: 0,\n            originalPrice: 0,\n            discountDescription: 0,\n            count: 0\n          };\n        }\n        map[key].actualPrice += Number(item.actualPrice || 0);\n        map[key].discountSharing += Number(item.discountSharing || 0);\n        map[key].discountPrice += Number(item.discountPrice || 0);\n        map[key].originalPrice += Number(item.originalPrice || 0);\n        map[key].discountDescription += (Number(item.discountSharing || 0) + (item.originalPrice - item.discountPrice));\n        map[key].count += 1;\n      });\n      return Object.values(map);\n    },\n  },\n  async onLoad(options) {\n    // 设置状态栏为黑色\n    uni.setNavigationBarColor({\n      frontColor: '#000000',\n      backgroundColor: '#FFFFFF'\n    });\n    this.cutoffTime = await getCutoffTime();\n    this.first = true;\n    // 记录第三方订单ID\n    this.type_order = options.type;\n    this.thirdOrderId = options.thirdOrderId;\n    this.thirdRoomName = options.thirdRoomName;\n    this.type = Boolean(this.thirdOrderId);\n    await this.loadOrderDataFromParams(options);\n  },\n  methods: {\n    formatDateIn(dateStr) {\n      if (!dateStr) return '';\n      const date = new Date(dateStr);\n      if (this.iChoseEarlyMorning) {\n        date.setDate(date.getDate() + 1);\n      }\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\n      const day = date.getDate().toString().padStart(2, '0');\n      return `${month}月${day}日`;\n    },\n    formatDate(dateStr) {\n      if (!dateStr) return '';\n      const date = new Date(dateStr);\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\n      const day = date.getDate().toString().padStart(2, '0');\n      return `${month}月${day}日`;\n    },\n    formatDateRed(dateStr) {\n      if (!dateStr) return '';\n      const date = new Date(dateStr);\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\n      const day = date.getDate().toString().padStart(2, '0');\n      const year = date.getFullYear().toString();\n      return `${year}.${month}.${day}`;\n    },\n    // 从页面参数和缓存中加载订单数据\n    async loadOrderDataFromParams(options) {\n      try {\n        // 从缓存中获取搜索参数（首页选择的时间和床位数）\n        const searchParams = uni.getStorageSync('searchParams');\n        this.showZeroToSixPrompt = searchParams.showZeroToSixPrompt\n        this.iChoseEarlyMorning = searchParams.iChoseEarlyMorning\n        const hotelRoomDetailData = await getRoomInfo(options.id);\n        // 根据订单信息获取历史入住用户信息\n        const orderId = options.orderId;\n        const historyCheckInPerson = await getHistoryCheckInPerson(orderId);\n        if (searchParams) {\n          this.orderData.checkInDate = searchParams.checkIn;\n          this.orderData.checkOutDate = searchParams.checkOut;\n          this.orderData.roomCount = searchParams.bedCount || 1;\n        }\n        if (orderId) {\n          this.orderData.roomCount = historyCheckInPerson.length;\n        }\n        this.orderData.guestList = historyCheckInPerson;\n        this.orderData.contactPhone = historyCheckInPerson[0].phone;\n        if (hotelRoomDetailData) {\n          this.orderData.hotelId = hotelRoomDetailData.hotelId;\n          this.orderData.hotelName = hotelRoomDetailData.hotelName;\n          this.orderData.hotelAddress = hotelRoomDetailData.hotelAddress;\n          this.orderData.roomTypeId = hotelRoomDetailData.id;\n          this.orderData.roomTypeName = this.type ? this.thirdRoomName : hotelRoomDetailData.name;\n          this.orderData.roomFee = hotelRoomDetailData.currentPrice;\n          this.orderData.saleMode = hotelRoomDetailData.saleMode;\n        }\n        // 重新计算总金额\n        await this.recalculateTotal();\n        // 确保入住人列表与床位数量同步\n        this.syncGuestList();\n        await this.fetchCouponList();\n      } catch (e) {\n        console.error('获取订单数据失败:', e);\n      } finally {\n        // 数据加载完成后，隐藏加载状态\n        this.loading = false;\n      }\n    },\n    // 同步入住人列表与床位数量\n    syncGuestList() {\n      const roomCount = this.orderData.roomCount;\n      const currentGuestCount = this.orderData.guestList.length;\n      if (currentGuestCount < roomCount) {\n        // 如果入住人数少于床位数，补充空的入住人\n        for (let i = currentGuestCount; i < roomCount; i++) {\n          this.orderData.guestList.push({guestName: ''});\n        }\n      } else if (currentGuestCount > roomCount) {\n        // 如果入住人数多于床位数，删除多余的入住人\n        this.orderData.guestList = this.orderData.guestList.slice(0, roomCount);\n      }\n    },\n\n    goBack() {\n      pageBack()\n    },\n    async changeBed(val) {\n      let next = this.orderData.roomCount + val;\n      if (this.type || (next < 1 || next > 10)) return;\n      this.orderData.roomCount = next;\n      // 重新计算价格\n      await this.recalculateTotal();\n      // 联动更新入住人列表\n      this.syncGuestList();\n      // 同步更新searchParams缓存，保证返回首页时床位数一致\n      this.updateSearchParams();\n    },\n    // 同步更新searchParams缓存\n    updateSearchParams() {\n      try {\n        const searchParams = uni.getStorageSync('searchParams');\n        if (searchParams) {\n          searchParams.bedCount = this.orderData.roomCount;\n          searchParams.checkIn = this.orderData.checkInDate;\n          searchParams.checkOut = this.orderData.checkOutDate;\n          searchParams.nights = this.calculateNights();\n          uni.setStorageSync('searchParams', searchParams);\n        }\n      } catch (e) {\n        console.error('更新searchParams失败:', e);\n      }\n    },\n\n    // 选择支付方式\n    selectPayMethod(method) {\n      this.orderData.paymentMethod = method;\n    },\n\n    // 获取星期几\n    getWeekDay(dateStr) {\n      if (!dateStr) return '';\n      const date = new Date(dateStr);\n      const weekDays = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\n      return weekDays[date.getDay()];\n    },\n\n\n    // 计算住宿天数\n    calculateNights() {\n      if (!this.orderData.checkInDate || !this.orderData.checkOutDate) return 0;\n      const checkIn = new Date(this.orderData.checkInDate);\n      const checkOut = new Date(this.orderData.checkOutDate);\n      return Math.ceil((checkOut - checkIn) / (1000 * 60 * 60 * 24));\n    },\n\n    // 重新计算总金额\n    async recalculateTotal() {\n      try {\n        const params = {\n          type: this.type_order,\n          hotelId: this.orderData.hotelId,\n          roomTypeId: this.orderData.roomTypeId,\n          roomCount: this.orderData.roomCount,\n          checkInDate: this.orderData.checkInDate,\n          checkOutDate: this.orderData.checkOutDate,\n          redPacketId: this.orderData.redPacketId\n        };\n        if (this.type) {\n          delete params.redPacketId;\n        }\n        const result = await calculateThePrice(params);\n        if (result) {\n          this.orderData.roomFee = result.totalAmount;\n          this.orderData.totalOriginalPrice = result.totalOriginalPrice;\n          this.orderData.limitTimeDiscount = result.limitTimeDiscount || 0;\n          this.orderData.totalAmount = result.payableAmount;\n          if (this.type) {\n            this.orderData.totalAmount = 0;\n            this.orderData.deductOrderId = this.thirdOrderId;\n          }\n          this.orderData.threePartyDeduction = result.totalOriginalPrice;\n          this.orderData.memberDiscount = result.memberDiscount;\n          this.orderData.redPacketDiscount = result.redPacketDiscount;\n          this.$set(this.orderData, 'roomFeeDetails', result.roomFeeDetails || []);\n          // 直接计算平均每晚\n          if (Array.isArray(result.roomFeeDetails) && result.roomFeeDetails.length) {\n            const sum = result.roomFeeDetails.reduce((acc, cur) => acc + Number(cur.actualPrice || 0), 0);\n            this.orderData.avgNightPrice = (sum / result.roomFeeDetails.length).toFixed(2);\n          } else {\n            this.orderData.avgNightPrice = '0.00';\n          }\n        }\n      } catch (e) {\n        console.error('计算价格失败:', e);\n        uni.showToast({\n          title: '计算价格失败',\n          icon: 'none'\n        });\n      }\n    },\n    async fetchCouponList() {\n      try {\n        const params = {\n          hotelId: this.orderData.hotelId,\n          roomId: this.orderData.roomTypeId,\n          amount: this.orderData.roomFee,\n          days: this.calculateNights(),\n          checkInDate: this.orderData.checkInDate,\n          type: this.type_order\n        };\n        const list = await getAvailableRedEnvelopeList(params);\n        // 不再过滤红包金额\n        this.couponList = Array.isArray(list) ? list : [];\n        // 如果第一次加载且未选中红包，自动选中第一个\n        if (this.couponList.length > 0 && this.first) {\n          this.first = false;\n          const firstCoupon = this.couponList[0];\n          this.orderData.redPacketId = firstCoupon.id;\n          this.selectedCouponId = firstCoupon.id;\n          // 重新计算价格\n          await this.recalculateTotal();\n        } else if (this.couponList.length === 0) {\n          // 如果没有可用红包，清除红包信息\n          this.orderData.redPacketId = null;\n          this.selectedCouponId = null;\n          // 重新计算价格\n          await this.recalculateTotal();\n        }\n      } catch (e) {\n        this.couponList = [];\n        // 发生错误时清除红包信息\n        this.orderData.redPacketId = null;\n        this.selectedCouponId = null;\n        await this.recalculateTotal();\n      }\n    },\n\n    // 修改红包确认方法\n    async onCouponConfirm() {\n      // 只有点击确定才真正应用\n      const selected = this.couponList.find(c => c.id === this.selectedCouponId);\n      if (selected) {\n        this.orderData.redPacketId = selected.id;\n      } else {\n        this.orderData.redPacketId = null;\n      }\n      // 重新计算价格\n      await this.recalculateTotal();\n      this.showCouponPopup = false;\n    },\n\n    // 修改日期选择确认方法\n    async onCalendarConfirm(dates) {\n      if (dates && dates.detail && dates.detail.length === 3) {\n        const [checkIn, checkOut, nights] = dates.detail;\n        this.orderData.checkInDate = checkIn;\n        this.orderData.checkOutDate = checkOut;\n        // 重新计算价格\n        await this.recalculateTotal();\n        // 重新获取可用红包\n        await this.fetchCouponList();\n        this.showCalendar = false;\n        // 同步更新searchParams缓存，保证返回首页时床位数一致\n        this.updateSearchParams();\n      }\n    },\n\n    validatePhone() {\n      const phoneRegex = /^1[3-9]\\d{9}$/;\n      if (!this.orderData.contactPhone) {\n        uni.showToast({\n          title: '请输入手机号',\n          icon: 'none'\n        });\n        return false;\n      }\n      if (!phoneRegex.test(this.orderData.contactPhone)) {\n        uni.showToast({\n          title: '请输入正确的手机号',\n          icon: 'none'\n        });\n        return false;\n      }\n      return true;\n    },\n    onSelectDate() {\n      this.showCalendar = true;\n    },\n    onCouponClick() {\n      // 打开弹窗时，临时选中当前已用红包\n      this.selectedCouponId = this.orderData.redPacketId;\n      this.showCouponPopup = true;\n    },\n    // 选择优惠券\n    onCouponSelect(id) {\n      this.selectedCouponId = id;\n    },\n    // 取消选择优惠券\n    onCouponCancel() {\n      // 恢复之前的选择\n      this.selectedCouponId = this.orderData.redPacketId;\n      this.showCouponPopup = false;\n    },\n    async submitOrder() {\n      try {\n        // 校验\n        if (this.orderData.guestList.some(guest => !guest.guestName) || !this.orderData.contactPhone) {\n          uni.showToast({title: '请填写完整入住人信息', icon: 'none'});\n          return;\n        }\n\n        // 显示加载提示\n        uni.showLoading({\n          title: '正在创建订单...',\n          mask: true\n        });\n\n        // 准备订单数据\n        const orderParams = {\n          ...this.orderData,\n          type: this.type_order,\n          arrivalTime: this.arriveTimes[this.arriveIndex],\n          lateArrival: this.lateArriveChecked ? 1 : 0\n        };\n\n        // 创建订单\n        const orderResult = await createOrder(orderParams)\n            .catch((error) => {\n              throw new Error(error.error || error.msg || '创建订单失败');\n            });\n\n        // 如果是零元订单，直接跳转到支付成功页面\n        if (orderResult.totalAmount === 0) {\n          uni.hideLoading();\n          uni.redirectTo({\n            url: `/pages/subPackages/order/paySuccess?id=${orderResult.id}`\n          });\n          return;\n        }\n\n        // 调用支付接口\n        const payResult = await placeAnOrder(orderResult.id, orderParams.paymentMethod)\n            .catch((error) => {\n              throw new Error(error.error || error.msg || '支付失败');\n            });\n        // 隐藏加载提示\n        uni.hideLoading();\n        // 根据支付方式拉起对应的支付\n        if (orderParams.paymentMethod === 1) {\n          // 微信支付\n          uni.requestPayment({\n            provider: 'wxpay',\n            ...(payResult.payParams),\n            success: (res) => {\n              uni.redirectTo({\n                url: `/pages/subPackages/order/paySuccess?id=${orderResult.id}`\n              });\n            },\n            fail: (err) => {\n              uni.showLoading({title: '正在跳转...'});\n              uni.switchTab({url: '/pages/order/index'});\n            }\n          });\n        } else {\n          // 支付宝支付\n          uni.showToast({\n            title: '该支付方式暂不支持！',\n            icon: 'none'\n          });\n        }\n\n      } catch (error) {\n        uni.hideLoading();\n        uni.showToast({\n          title: error.message || '订单创建失败',\n          icon: 'none'\n        });\n      }\n    },\n    toggleAgree() {\n      this.agreeChecked = !this.agreeChecked;\n    },\n    goToBookingNotice() {\n      uni.navigateTo({\n        url: '/pages/subPackages/agreement/bookingNotice'\n      });\n    },\n    goToPaymentAgreement() {\n      uni.navigateTo({\n        url: '/pages/subPackages/agreement/paymentAgreement'\n      });\n    },\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.nav-title {\n  width: 100%;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 32rpx;\n  text-align: center;\n  height: 88rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.order-container {\n  background: #f3f4f6;\n  min-height: 100vh;\n  padding-bottom: calc(240rpx + env(safe-area-inset-bottom));\n\n  .loading-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 60vh;\n\n    .loading-content {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n\n      .loading-spinner {\n        width: 40rpx;\n        height: 40rpx;\n        border: 3rpx solid #f3f4f6;\n        border-top: 3rpx solid #EE781F;\n        border-radius: 50%;\n        animation: spin 1s linear infinite;\n        margin-bottom: 20rpx;\n      }\n\n      @keyframes spin {\n        0% {\n          transform: rotate(0deg);\n        }\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n\n      .loading-text {\n        font-size: 28rpx;\n        color: #6D7278;\n      }\n    }\n  }\n\n  .notice {\n    margin-top: 66rpx;\n    padding: 0 24rpx 126rpx;\n    font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n    font-weight: 400;\n    font-size: 24rpx;\n    color: #6D7278;\n    line-height: 34rpx;\n    text-align: left;\n    font-style: normal;\n  }\n\n  .order-hotel-box {\n    background: #FFFFFF;\n    border-radius: 28rpx;\n    margin: 28rpx 28rpx 0;\n    padding-bottom: 42rpx;\n    position: relative;\n    z-index: 2;\n\n    .hotel-title {\n      font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n      font-weight: 500;\n      font-size: 32rpx;\n      line-height: 1.5; /* 相对单位更安全，避免文字裁切 */\n      color: #19191A;\n      text-align: left;\n      font-style: normal;\n      padding: 34rpx 28rpx 22rpx 28rpx;\n\n      display: -webkit-box;\n      -webkit-line-clamp: 2; /* 限制两行 */\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n      text-overflow: ellipsis;\n\n      word-break: break-word; /* 避免中文字被硬拆 */\n      white-space: normal; /* 保证多行换行生效 */\n    }\n\n\n    .hotel-desc {\n      font-size: 24rpx;\n      color: #aeb2b8;\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      margin-left: 28rpx;\n\n      .map-icon {\n        width: 36rpx;\n        height: 36rpx;\n        background: url('/static/base/map.png') no-repeat center;\n        background-size: 100% 100%;\n        margin-right: 10rpx;\n        flex-shrink: 0;\n      }\n\n      .hotel-desc-text {\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 400;\n        font-size: 28rpx;\n        color: #6D7278;\n        line-height: 28rpx;\n        text-align: left;\n        font-style: normal;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        flex: 1;\n        padding-right: 20rpx;\n      }\n    }\n\n    .line {\n      height: 1rpx;\n      background: #E8E9EB;\n      margin: 38rpx 28rpx;\n    }\n\n    .order-date-row {\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      padding: 0 28rpx;\n\n      .date-left, .date-right {\n        display: flex;\n        flex-direction: row;\n        align-items: baseline;\n\n        .date-main {\n          font-size: 32rpx;\n          color: #19191A;\n          font-weight: 600;\n        }\n\n        .date-week {\n          font-size: 22rpx;\n          color: #6D7278;\n          margin-left: 8rpx;\n          font-weight: 400;\n        }\n      }\n\n      .nights-tag {\n        position: relative;\n        border-radius: 28rpx;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 400;\n        font-size: 20rpx;\n        text-align: center;\n        font-style: normal;\n        color: #6D7278;\n        padding: 6rpx 10rpx;\n        margin: 0 40rpx;\n        box-sizing: border-box;\n      }\n\n      .nights-tag::after {\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        border-radius: 28rpx;\n        border: 1rpx solid #A2A2A8;\n        pointer-events: none;\n        box-sizing: border-box;\n        transform: scale(1);\n        transform-origin: center;\n      }\n\n      @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) {\n        .nights-tag::after {\n          border-width: 0.5px;\n        }\n      }\n    }\n\n    .order-room-row {\n      display: flex;\n      align-items: center;\n      margin-top: 24rpx;\n      padding: 0 28rpx;\n\n      .room-type {\n        font-size: 28rpx;\n        color: #19191A;\n        font-weight: 500;\n      }\n\n      .room-divider {\n        width: 2rpx;\n        height: 28rpx;\n        background: #E8E9EB;\n        margin: 0 18rpx;\n      }\n\n      .bed-count {\n        font-size: 28rpx;\n        color: #19191A;\n        font-weight: 500;\n      }\n    }\n  }\n\n  .early-morning-tip {\n    margin-top: -20rpx;\n    margin-left: 28rpx;\n    margin-right: 28rpx;\n    padding: 42rpx 18rpx 16rpx 20rpx;\n    border-radius: 0 0 28rpx 28rpx;\n    border: 1rpx solid #F7DFC1;\n    background: linear-gradient(180deg, #FFEBD7 0%, #FDF6ED 100%);\n    position: relative;\n    z-index: 1;\n    display: flex;\n    align-items: flex-start;\n    justify-content: flex-start;\n    position: relative;\n    z-index: 1;\n\n    .early-morning-tip-icon {\n      width: 24rpx;\n      height: 24rpx;\n      margin-right: 10rpx;\n      position: relative;\n      top: 6rpx;\n    }\n\n    .early-morning-tip-text {\n      font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n      font-weight: 400;\n      font-size: 24rpx;\n      color: #B7560C;\n      line-height: 34rpx;\n      text-align: left;\n      font-style: normal;\n    }\n\n  }\n\n  .form-title {\n    font-size: 32rpx;\n    color: #19191a;\n    font-weight: 600;\n    margin: 32rpx 24rpx 0 24rpx;\n    text-align: left;\n  }\n\n  .order-form-box {\n    background: #fff;\n    border-radius: 24rpx;\n    margin: 24rpx 24rpx 0 24rpx;\n    padding: 32rpx 24rpx;\n\n    .form-row {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      min-height: 56rpx;\n      position: relative;\n    }\n\n    .line-group {\n      .form-row {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        min-height: 56rpx;\n        position: relative;\n      }\n\n      .order-row-line {\n        height: 1rpx;\n        background: #E8E9EB;\n        margin: 36rpx 0 32rpx 0;\n      }\n    }\n\n    .order-row-line {\n      height: 1rpx;\n      background: #E8E9EB;\n      margin: 36rpx 0 32rpx 0;\n    }\n\n    .form-label {\n      display: flex;\n      align-items: center;\n      font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n      font-weight: 400;\n      font-size: 28rpx;\n      color: #19191A;\n      text-align: left;\n      font-style: normal;\n\n      .required {\n        color: #ee781f;\n        margin-left: 4rpx;\n        font-size: 24rpx;\n      }\n\n      .info-text {\n        font-size: 28rpx;\n        color: #19191A;\n        font-weight: 400;\n      }\n\n      .info-icon {\n        width: 28rpx;\n        height: 28rpx;\n        margin-left: 8rpx;\n        background: url('/static/base/info_gray.png') no-repeat center;\n        background-size: 100% 100%;\n        display: inline-block;\n        position: relative;\n        top: 4rpx;\n      }\n    }\n\n    .form-input {\n      flex: 1;\n      text-align: right;\n      border: none;\n      background: transparent;\n      font-size: 28rpx;\n      color: #19191a;\n\n      &::placeholder {\n        color: #aeb2b8;\n        font-size: 28rpx;\n      }\n    }\n\n    .bed-count-ctrl {\n      display: flex;\n      align-items: center;\n\n      .bed-btn-img {\n        width: 48rpx;\n        height: 48rpx;\n        background-image: url('/static/base/popup_icon_minus.png');\n        background-size: cover;\n        background-position: center;\n        margin: 0 12rpx;\n\n        &.plus {\n          background-image: url('/static/base/popup_icon_plus.png');\n        }\n\n        &.disabled {\n          background-image: url('/static/base/popup_icon_minus_disabled.png');\n          pointer-events: none;\n          opacity: 0.5;\n        }\n\n        &.plus.disabled {\n          background-image: url('/static/base/popup_icon_plus_disabled.png');\n        }\n      }\n\n      .bed-num {\n        font-size: 28rpx;\n        color: #19191a;\n        width: 48rpx;\n        text-align: center;\n      }\n    }\n\n    .arrive-time-group {\n      display: flex;\n      flex-direction: column;\n      gap: 28rpx;\n      margin-left: 0;\n      margin-top: 40rpx;\n\n      .arrive-time-row {\n        display: flex;\n        gap: 24rpx;\n        margin-bottom: 0;\n      }\n\n      .arrive-time-btn {\n        border-radius: 8rpx;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 400;\n        font-size: 24rpx;\n        color: #19191A;\n        line-height: 24rpx;\n        text-align: left;\n        font-style: normal;\n        border: none;\n        transition: background 0.2s, color 0.2s;\n        background: #F3F7FA;\n        padding: 16rpx 22rpx;\n\n        &.active {\n          background: #EE781F;\n          color: #fff;\n        }\n      }\n    }\n\n    .form-row-vertical {\n      flex-direction: column;\n      align-items: flex-start;\n\n      .form-label-row {\n        width: 100%;\n        display: flex;\n        align-items: center;\n      }\n    }\n  }\n\n  .order-fee-box {\n    background: #fff;\n    border-radius: 24rpx;\n    margin: 28rpx 24rpx 0;\n    padding: 34rpx 24rpx 38rpx;\n\n\n    .fee-row {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      font-size: 28rpx;\n      margin-bottom: 40rpx;\n\n      .free-coupon {\n        display: flex;\n        align-items: center;\n        gap: 16rpx;\n      }\n\n      text {\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 400;\n        font-size: 28rpx;\n        color: #19191A;\n        line-height: 28rpx;\n        text-align: left;\n        font-style: normal;\n      }\n\n      .price {\n        font-weight: 500;\n        font-size: 28rpx;\n        color: #19191A;\n        line-height: 28rpx;\n        text-align: right;\n        font-style: normal;\n      }\n\n      .fee-discount {\n        font-weight: 500;\n        font-size: 28rpx;\n        color: #EE781F;\n        line-height: 28rpx;\n        text-align: right;\n        font-style: normal;\n      }\n\n      .fee-disable {\n        font-weight: 500;\n        font-size: 28rpx;\n        color: #A2A2A8;\n        line-height: 28rpx;\n        text-align: right;\n        font-style: normal;\n      }\n\n      &.fee-total {\n        font-weight: 600;\n        font-size: 32rpx;\n\n        text {\n          font-weight: 500;\n          font-size: 28rpx;\n          color: #19191A;\n          text-align: left;\n          font-style: normal;\n        }\n\n        .currency {\n          font-size: 24rpx;\n        }\n\n        .fee-total-num {\n          color: #19191A;\n          font-size: 40rpx;\n        }\n      }\n    }\n\n    .fee-row:last-child {\n      margin-bottom: 0;\n    }\n\n    /* 新增每日明细表格样式 */\n    .fee-detail-table {\n      margin-bottom: 40rpx;\n      background: #F3F4F6;\n      border-radius: 24rpx;\n      padding: 24rpx 28rpx;\n\n      .fee-detail-header {\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\n        gap: 20rpx;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 500;\n        font-size: 28rpx;\n        color: #19191A;\n        line-height: 28rpx;\n        text-align: left;\n        font-style: normal;\n        padding-bottom: 24rpx;\n        border-bottom: 1rpx solid #E8E9EB;\n      }\n\n      .fee-detail-row {\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\n        gap: 20rpx;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 400;\n        font-size: 28rpx;\n        color: #19191A;\n        line-height: 28rpx;\n        text-align: left;\n        font-style: normal;\n        padding: 16rpx 0;\n        border-bottom: 1rpx solid #E8E9EB;\n\n        &:last-child {\n          border-bottom: none;\n        }\n      }\n    }\n  }\n\n  .pay-title {\n    width: 192rpx;\n    height: 32rpx;\n    font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n    font-weight: 500;\n    font-size: 32rpx;\n    color: #19191A;\n    line-height: 32rpx;\n    text-align: left;\n    font-style: normal;\n    margin: 40rpx 28rpx 0 28rpx;\n  }\n\n  .pay-method-section {\n    background: #FFFFFF;\n    border-radius: 28rpx;\n    margin: 28rpx 24rpx 0;\n    padding: 28rpx 28rpx 32rpx 28rpx;\n\n    .pay-method {\n      display: flex;\n      align-items: center;\n\n      &:last-child {\n        border-bottom: none;\n      }\n\n      .icon {\n        width: 40rpx;\n        height: 40rpx;\n        margin-right: 20rpx;\n      }\n\n      .text {\n        flex: 1;\n        height: 28rpx;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 500;\n        font-size: 28rpx;\n        color: #19191A;\n        line-height: 28rpx;\n        text-align: left;\n        font-style: normal;\n      }\n    }\n\n    .line {\n      height: 1rpx;\n      background: #E8E9EB;\n      margin-top: 30rpx;\n      margin-bottom: 26rpx;\n    }\n  }\n\n  .order-bottom-fixed {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 999;\n    width: 100vw;\n    padding-bottom: 66rpx;\n    background: #fff;\n\n    .order-agree-bar {\n      display: flex;\n      align-items: center;\n      background: linear-gradient(266deg, #FFFFFF 0%, #FFFFFF 20%, #FBE9DD 100%);\n      padding: 20rpx 42rpx;\n\n      .agree-text {\n        flex: 1;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 400;\n        font-size: 24rpx;\n        color: #969799;\n        text-align: left;\n        font-style: normal;\n        line-height: 40rpx;\n        white-space: normal;\n        word-break: break-all;\n\n        .agree-link {\n          color: #EE781F;\n        }\n      }\n    }\n\n    .order-bottom-bar-new {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      background: #fff;\n      border-radius: 0 0 16rpx 16rpx;\n      padding: 40rpx 32rpx 48rpx 32rpx;\n\n      .order-bottom-left {\n        display: flex;\n        flex-direction: column;\n\n        .bottom-label {\n          font-size: 26rpx;\n          color: #19191A;\n          margin-bottom: 8rpx;\n        }\n\n        .bottom-amount {\n          display: flex;\n          align-items: flex-end;\n\n          .bottom-currency {\n            font-size: 24rpx;\n            color: #EE781F;\n            margin-right: 2rpx;\n          }\n\n          .bottom-num {\n            font-size: 40rpx;\n            color: #EE781F;\n            font-weight: 600;\n            line-height: 1;\n          }\n        }\n      }\n\n      .order-bottom-btn {\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 500;\n        font-size: 32rpx;\n        color: #FFFFFF;\n        line-height: 32rpx;\n        text-align: center;\n        font-style: normal;\n        background: #EE781F;\n        border: none;\n        border-radius: 50rpx;\n        padding: 30rpx 46rpx;\n\n        &.disabled {\n          background: #EE781F;\n          opacity: 0.3;\n          color: #fff;\n        }\n      }\n    }\n  }\n}\n\n.late-arrive-row {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n\n.late-arrive-radio {\n  width: 32rpx;\n  height: 32rpx;\n  border-radius: 50%;\n  border: 2rpx solid #ee781f;\n  margin-right: 12rpx;\n  background: #fff;\n  position: relative;\n\n  &.checked {\n    background: #ee781f;\n    border-color: #ee781f;\n\n    &:after {\n      content: '';\n      display: block;\n      width: 16rpx;\n      height: 16rpx;\n      border-radius: 50%;\n      background: #fff;\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n    }\n  }\n}\n\n.late-arrive-text {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 400;\n  font-size: 24rpx;\n  color: #19191A;\n  text-align: left;\n  font-style: normal;\n}\n\n.coupon-popup-mask {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(25, 25, 26, 0.6);\n  z-index: 2000;\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n}\n\n.coupon-popup {\n  width: 100vw;\n  background: #F3F4F6;\n  border-radius: 28rpx 28rpx 0 0;\n}\n\n.bed-picker-header {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  padding: 42rpx 22rpx 40rpx;\n}\n\n.coupon-popup-title {\n  flex: 1;\n  text-align: center;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 40rpx;\n  color: #19191A;\n  line-height: 40rpx;\n  font-style: normal;\n}\n\n.close-icon {\n  position: absolute;\n  right: 22rpx;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 34rpx;\n  height: 32rpx;\n  background-image: url('@/static/base/popup_icon_close.png');\n  background-size: cover;\n  background-position: center;\n  align-items: flex-end;\n  cursor: pointer;\n}\n\n.coupon-list {\n  max-height: 750rpx;\n  overflow-y: auto;\n}\n\n.coupon-card {\n  display: flex;\n  align-items: center; /* 垂直居中 */\n  justify-content: space-between; /* 两边分布 */\n  position: relative;\n  margin: 0 24rpx 20rpx 24rpx;\n}\n\n.coupon-item {\n  flex: 1; /* 占满剩余空间 */\n  display: flex;\n  align-items: center;\n  height: 200rpx;\n  margin: 0 12rpx 0 12rpx;\n  background-image: url('https://www.zxd-hotel.xin/zxdhotel/icon/select-pack@2x.png');\n  background-size: 100% 100%;\n  background-position: center;\n  background-repeat: no-repeat;\n  position: relative;\n  border-radius: 28rpx;\n\n  .coupon-tag-expired {\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: 124rpx;\n    height: 124rpx;\n    background-image: url('https://www.zxd-hotel.xin/zxdhotel/icon/dq@2x.png');\n    background-size: cover;\n    background-position: center;\n  }\n\n  .coupon-tag-expired-text {\n    position: absolute;\n    right: 5rpx;\n    top: 35rpx;\n    width: 124rpx;\n    height: 124rpx;\n    font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n    font-weight: 400;\n    font-size: 24rpx;\n    color: #000000;\n    line-height: 17px;\n    text-align: left;\n    font-style: normal;\n    transform: rotate(45deg);\n  }\n}\n\n.coupon-radio {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.custom-radio {\n  width: 36rpx;\n  height: 36rpx;\n}\n\n.custom-radio-min {\n  width: 24rpx !important;\n  height: 24rpx !important;\n}\n\n.coupon-amount-box {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-width: 120rpx;\n  position: absolute;\n  left: 38rpx;\n}\n\n.coupon-amount {\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n  height: 60rpx;\n  margin-bottom: 8rpx;\n}\n\n.rmb {\n  font-size: 28rpx;\n  color: #F57C1F;\n  font-weight: 500;\n  margin-right: 2rpx;\n  line-height: 1;\n}\n\n.amount-num {\n  font-size: 56rpx;\n  color: #F57C1F;\n  font-weight: 700;\n  line-height: 1;\n}\n\n.desc_b {\n  margin-bottom: 18rpx;\n}\n\n.desc_l {\n  margin-bottom: 16rpx;\n}\n\n.coupon-limit, .coupon-expire {\n  height: 24rpx;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 400;\n  font-size: 24rpx;\n  color: #6D7278;\n  line-height: 24rpx;\n  text-align: left;\n  font-style: normal;\n}\n\n.coupon-info {\n  width: 580rpx;\n  height: 180rpx;\n  margin: 10rpx 20rpx;\n  position: relative;\n  display: flex;\n  align-content: center;\n  justify-content: space-between;\n\n  .coupon-info-l {\n    width: 360rpx;\n    height: 100%;\n    position: relative;\n    left: 25rpx;\n\n    .coupon-info-l-title {\n      position: absolute;\n      top: 30rpx;\n      height: 32rpx;\n      font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n      font-weight: 500;\n      font-size: 32rpx;\n      color: #19191A;\n      line-height: 32rpx;\n      text-align: left;\n      font-style: normal;\n    }\n\n    .coupon-info-l-time {\n      position: absolute;\n      top: 70rpx;\n      height: 24rpx;\n      font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n      font-weight: 400;\n      font-size: 24rpx;\n      color: #19191A;\n      line-height: 24rpx;\n      text-align: left;\n      font-style: normal;\n    }\n\n    .coupon-info-l-tag {\n      position: absolute;\n      top: 104rpx;\n\n      .tag {\n        position: relative;\n        height: 32rpx;\n        border-radius: 4rpx;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 400;\n        font-size: 20rpx;\n        color: #EE781F;\n        text-align: left;\n        font-style: normal;\n        padding: 0 8rpx;\n        margin-right: 16rpx;\n        box-sizing: border-box;\n      }\n\n      .tag::before {\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 200%;\n        height: 200%;\n        border: 1px solid rgba(255, 183, 161, 0.5);\n        border-radius: 8rpx;\n        transform: scale(0.5);\n        transform-origin: 0 0;\n        pointer-events: none;\n        box-sizing: border-box;\n      }\n    }\n  }\n\n  .coupon-info-r {\n    width: 168rpx;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    .coupon-info-r-amount-box {\n      width: auto;\n      height: 68rpx;\n      display: flex;\n      align-items: baseline;\n      justify-content: center;\n\n      .coupon-info-r-amount {\n        height: 68rpx;\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 600;\n        font-size: 68rpx;\n        color: #FFFFFF;\n        text-align: center;\n        font-style: normal;\n        line-height: 1;\n      }\n\n      .coupon-info-r-unit {\n        font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n        font-weight: 500;\n        font-size: 28rpx;\n        color: #FFFFFF;\n        text-align: left;\n        font-style: normal;\n        line-height: 1; /* 避免多余间距 */\n        margin-left: 4rpx; /* 与数字略微分隔 */\n      }\n    }\n  }\n\n}\n\n.coupon-desc {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 32rpx;\n  color: #19191A;\n  line-height: 32rpx;\n  text-align: left;\n  font-style: normal;\n}\n\n.coupon-popup-actions {\n  display: none;\n}\n\n.coupon-popup-actions-new {\n  background: #F3F4F6;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border-radius: 0 0 32rpx 32rpx;\n}\n\n.no-coupon-row {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 38rpx 0;\n}\n\n.no-coupon-text {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 400;\n  font-size: 24rpx;\n  color: #19191A;\n  line-height: 24rpx;\n  text-align: left;\n  font-style: normal;\n}\n\n.coupon-btn-main {\n  width: calc(100% - 112rpx);\n  height: 92rpx;\n  background: #EE781F;\n  border-radius: 50rpx;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 32rpx;\n  color: #FFFFFF;\n  line-height: 92rpx;\n  text-align: center;\n  font-style: normal;\n  margin: 0 56rpx calc(env(safe-area-inset-bottom) + 32rpx);\n}\n\n.custom-radio {\n  width: 36rpx;\n  height: 36rpx;\n  margin-right: 12rpx;\n  vertical-align: middle;\n}\n\n.free-coupon {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n\n  &.disabled {\n    pointer-events: none;\n  }\n}\n\n.calendar-page {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 999;\n  background: #fff;\n  transform: translateY(100%);\n  transition: transform 0.3s ease-out;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n.calendar-page.show {\n  transform: translateY(0);\n}\n\n.fee-room-toggle {\n  cursor: pointer;\n\n  .fee-room-right {\n    display: flex;\n    align-items: center;\n\n    .price {\n      margin-right: 8rpx;\n    }\n\n    .arrow-icon {\n      width: 36rpx;\n      height: 22rpx;\n      transition: transform 0.2s;\n      margin-left: 4rpx;\n    }\n  }\n}\n\n.fee-detail-list {\n  background: #f8f8f8;\n  border-radius: 12rpx;\n  margin: 16rpx 0 8rpx 0;\n  padding: 12rpx 16rpx;\n\n  .fee-detail-item {\n    margin-bottom: 10rpx;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n\n    .fee-detail-date {\n      font-size: 24rpx;\n      color: #6D7278;\n      margin-bottom: 2rpx;\n    }\n\n    .fee-detail-info {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 18rpx;\n      font-size: 24rpx;\n      color: #19191A;\n    }\n  }\n}\n\n.fee-detail-list-simple {\n  margin: 8rpx 0 0 0;\n  padding: 0 0 0 0;\n  max-height: 400rpx;\n  overflow-y: auto;\n\n  .fee-detail-item-simple {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n    font-weight: 400;\n    font-size: 24rpx;\n    color: #6D7278;\n    line-height: 24rpx;\n    text-align: right;\n    font-style: normal;\n    margin-bottom: 18rpx;\n\n    &:last-child {\n      border-bottom: none;\n      margin-bottom: 40rpx;\n    }\n\n    .fee-detail-date-simple {\n      flex: 1;\n      text-align: left;\n    }\n\n    .fee-detail-count-simple {\n      flex: 0 0 60rpx;\n      text-align: center;\n    }\n\n    .fee-detail-amount-simple {\n      flex: 1;\n      font-weight: 500;\n      text-align: right;\n      white-space: nowrap;\n    }\n  }\n}\n\n.fee-detail-avg-row {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 400;\n  font-size: 24rpx;\n  color: #6D7278;\n  line-height: 24rpx;\n  text-align: right;\n  font-style: normal;\n  margin-bottom: 18rpx;\n}\n</style>","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=a06635b4&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=a06635b4&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1769665553550\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}