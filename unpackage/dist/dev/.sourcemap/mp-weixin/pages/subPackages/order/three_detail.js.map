{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/order/three_detail.vue?e21e","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/order/three_detail.vue?e74b","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/order/three_detail.vue?7832","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/order/three_detail.vue?e125","uni-app:///pages/subPackages/order/three_detail.vue","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/order/three_detail.vue?4320","webpack:////Users/zqs/workSpace/zxd/zxd_member/pages/subPackages/order/three_detail.vue?6853"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","UPopup","data","order","days","hours","minutes","seconds","timer","showStatusPopup","isCountdownEnded","timelineList","isPaying","orderUserInfo","hideToPay","onLoad","uni","url","redirectUrl","onShow","computed","orderStatusInfo","title","desc","showArrow","showCountdown","footerButtons","text","type","methods","showUserMismatchPopup","closeUserMismatchPopup","formatDateRange2","formatDate","fetchOrderDetail","catch","userInfo","goBack","onNav","icon","latitude","longitude","name","address","success","fail","console","onCall","phoneNumber","onFooterBtnClick","params","id","business","content","confirmText","cancelText","res","startCountdown","clearInterval","updateCountdown","beforeDestroy","onHide"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqI;AACrI;AACgE;AACL;AACqC;;;AAGhG;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,mGAAM;AACR,EAAE,4GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,kRAEN;AACP,KAAK;AACL;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpDA;AAAA;AAAA;AAAA;AAAy1B,CAAgB,0yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;AC+J72B;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAC;IAAAC;EAAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAC;QACAC;QACAC;MACA;IACA;MACA;IACA;EACA;EACAC,2BAEA;EACAC;IACAC;MACA;MACA;QACA;UACA;YACAC;YACAC;YACAC;YACAC;UACA;QACA;UACA;YACAH;YACAC;YACAC;UACA;QACA;UACA;YACAF;YACAC;YACAC;UACA;QACA;UACA;YACAF;YACAC;YACAC;UACA;QACA;UACA;MAAA;IAEA;IACAE;MACA;QACA;UACA,QACA;YAAAC;YAAAC;UAAA,EACA;QACA;UACA;MAAA;IAEA;EACA;EACAC;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;MACAf;QACAC;QACAC;MACA;MACA;IACA;IACAc;MACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA,uCACAC;kBACA;gBACA;cAAA;gBAHA;gBAIA;gBACA;kBACA;gBACA;gBACA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACAnB;kBAAAC;gBAAA;cAAA;gBAEAmB;gBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACAtB;UACAM;UACAiB;QACA;QACA;MACA;MACA;MACAvB;QACAwB;QACAC;QACAC;QACAC;QACAC,6BACA;QACAC;UACAC;UACA9B;YACAM;YACAiB;UACA;QACA;MACA;IACA;IACAQ;MACA/B;QAAAgC;MAAA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACArB;kBAAA;kBAAA;gBAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACAZ;kBACAC;kBACAC;kBACAgC;oBACAC;oBACAC;kBACA;gBACA;cAAA;gBAAA;gBAAA;cAAA;gBAEApC;kBACAM;kBACA+B;kBACAC;kBACAC;kBACAX;oBAAA;sBAAA;wBAAA;0BAAA;4BAAA;8BAAA,KACAY;gCAAA;gCAAA;8BAAA;8BAAA;8BAAA,OACAxC;gCACAC;8BACA;4BAAA;4BAAA;8BAAA;0BAAA;wBAAA;sBAAA;oBAAA,CAEA;oBAAA;sBAAA;oBAAA;oBAAA;kBAAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IACAwC;MAAA;MACA;MACA;QACAC;MACA;;MAEA;MACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;MAEA;MACA;MACA;;MAEA;MACA;QACAD;QACA;QACA;QACA;QACA;QACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MAEA;MACA;MACA;IACA;EACA;EACAE;IACA;EACA;EAEA;EACAC;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACrZA;AAAA;AAAA;AAAA;AAAouC,CAAgB,+nCAAG,EAAC,C;;;;;;;;;;;ACAxvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/subPackages/order/three_detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/subPackages/order/three_detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./three_detail.vue?vue&type=template&id=524ecd6e&scoped=true&\"\nvar renderjs\nimport script from \"./three_detail.vue?vue&type=script&lang=js&\"\nexport * from \"./three_detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./three_detail.vue?vue&type=style&index=0&id=524ecd6e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"524ecd6e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/subPackages/order/three_detail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./three_detail.vue?vue&type=template&id=524ecd6e&scoped=true&\"","var components\ntry {\n  components = {\n    uniNavBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar\" */ \"@/uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.formatDateRange2(_vm.order.effectiveTime, _vm.order.expireTime)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./three_detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./three_detail.vue?vue&type=script&lang=js&\"","<template>\n  <view>\n    <scroll-view :scroll-y=\"!showStatusPopup\" style=\"height: 100vh;\">\n      <view class=\"order-detail-page\">\n        <uni-nav-bar\n            backgroundColor=\"#EE781F\"\n            :shadow=\"false\"\n            :border=\"false\"\n            color=\"#FFF\"\n            left-icon=\"left\"\n            status-bar\n            @clickLeft=\"goBack\">\n          <template #default>\n            <text class=\"nav-title\">订单详情</text>\n          </template>\n        </uni-nav-bar>\n        <!-- 顶部栏 -->\n        <view class=\"header-bg\">\n          <view class=\"order-status-block\">\n            <view class=\"order-status-row\">\n              <view class=\"order-status\">{{ orderStatusInfo.title }}</view>\n              <view class=\"review-more-icon\" v-if=\"orderStatusInfo.showArrow\">\n                <uni-icons type=\"arrowright\" size=\"16\" color=\"#FFF\"></uni-icons>\n              </view>\n              <view v-if=\"orderStatusInfo.showCountdown\" class=\"countdown\">\n                <template v-if=\"days > 0\">\n                  <view class=\"countdown-item\">\n                    <view class=\"countdown-value\">{{ days }}</view>\n                    <text class=\"countdown-unit\">天</text>\n                  </view>\n                </template>\n                <view class=\"countdown-item\">\n                  <view class=\"countdown-value\">{{ hours }}</view>\n                  <text class=\"countdown-unit\">时</text>\n                </view>\n                <view class=\"countdown-item\">\n                  <view class=\"countdown-value\">{{ minutes }}</view>\n                  <text class=\"countdown-unit\">分</text>\n                </view>\n                <view class=\"countdown-item\">\n                  <view class=\"countdown-value\">{{ seconds }}</view>\n                  <text class=\"countdown-unit\">秒</text>\n                </view>\n              </view>\n            </view>\n            <view class=\"order-status-desc\">{{ orderStatusInfo.desc }}</view>\n          </view>\n        </view>\n\n        <!-- 酒店信息卡片 -->\n        <view class=\"card hotel-card\">\n          <view class=\"hotel-info-name\">\n            商品信息\n          </view>\n          <view class=\"hotel-img-wrap\">\n            <image class=\"hotel-img\" :src=\"order.mainPicture\" mode=\"aspectFill\"/>\n          </view>\n          <view class=\"hotel-info-base\" @click=\"goToHotelDetail\">\n            <view class=\"hotel-info\">\n              <view class=\"hotel-title\">{{ order.commodityName }}</view>\n              <view class=\"hotel-date\">{{ formatDateRange2(order.effectiveTime, order.expireTime) }}</view>\n            </view>\n          </view>\n        </view>\n\n        <!-- 预订信息 -->\n        <view class=\"card info-card\">\n          <view class=\"hotel-info-name\">\n            订单信息\n          </view>\n          <view class=\"info-row\">\n            <view class=\"info-label\">订单来源</view>\n            <view class=\"info-value\">{{ order.channel }}</view>\n          </view>\n          <view class=\"info-row\">\n            <view class=\"info-label\">订单编号</view>\n            <view class=\"info-value\">{{ order.orderNo }}</view>\n          </view>\n          <view class=\"info-row\">\n            <view class=\"info-label\">联系人</view>\n            <view class=\"info-value\">{{ order.consumerNickName || '' }}\n            </view>\n          </view>\n          <view class=\"info-row\">\n            <view class=\"info-label\">联系电话</view>\n            <view class=\"info-value\">{{ order.consumerPhone }}</view>\n          </view>\n          <view class=\"info-row last-row\">\n            <view class=\"info-label\">创建时间</view>\n            <view class=\"info-value\">{{ order.createTime }}</view>\n          </view>\n        </view>\n\n        <!-- 支付信息 -->\n        <view class=\"card info-card\">\n          <template v-if=\"order.orderStatus !== 1\">\n            <view class=\"hotel-info-name\">\n              支付信息\n            </view>\n            <view class=\"info-row\">\n              <view class=\"info-label\">支付时间</view>\n              <view class=\"info-value\">{{ order.payTime || '' }}</view>\n            </view>\n            <!--            <view class=\"line-fee\"></view>-->\n            <view class=\"line-fee-none\"></view>\n          </template>\n          <template v-else>\n            <view class=\"hotel-info-name-else\">\n            </view>\n          </template>\n          <!--          <view class=\"hotel-info-name-fee\">-->\n          <!--            费用明细-->\n          <!--          </view>-->\n          <!--          <view class=\"info-row\">-->\n          <!--            <view class=\"info-label\">原价</view>-->\n          <!--            <view class=\"info-value\">￥{{ order.commodityPrice||'' }}</view>-->\n          <!--          </view>-->\n          <!--          <view class=\"info-row\">-->\n          <!--            <view class=\"info-label\">优惠价格</view>-->\n          <!--            <view class=\"info-value\">-￥{{ order.commodityPrice && order.paymentAmount ? (order.commodityPrice - order.paymentAmount).toFixed(2) : '' }}</view>-->\n          <!--          </view>-->\n          <!--          <view class=\"line-fee-1\"></view>-->\n          <!--          <view class=\"info-row total-row\">-->\n          <!--            <view class=\"info-label\">实付总额</view>-->\n          <!--            <view class=\"info-value total\">-->\n          <!--              <text class=\"currency\">￥</text>-->\n          <!--              <text class=\"amount-v\">{{ order.paymentAmount||\"\" }}</text>-->\n          <!--            </view>-->\n          <!--          </view>-->\n        </view>\n        <view style=\"height: 66rpx;width: 100%\"></view>\n        <!-- 底部操作栏 -->\n        <view class=\"footer-bar\" v-if=\"!hideToPay\">\n          <view\n              v-for=\"btn in footerButtons\"\n              :key=\"btn.type\"\n              class=\"footer-btn primary\"\n              @click=\"onFooterBtnClick(btn.type)\"\n          >\n            {{ btn.text }}\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n\n    <!-- 用户不匹配提示弹窗 -->\n    <uni-popup ref=\"userMismatchPopup\" type=\"center\">\n      <view class=\"popup-content\">\n        <view class=\"popup-title\">提示</view>\n        <view class=\"popup-message\">订单不属于当前登录账号，无法使用</view>\n        <view class=\"popup-buttons\">\n          <button class=\"popup-button confirm\" @click=\"closeUserMismatchPopup\">切换登录</button>\n        </view>\n      </view>\n    </uni-popup>\n  </view>\n</template>\n\n<script>\nimport {getThirdOrderDetail} from '@/common/api.js';\nimport UPopup from \"../../../uni_modules/uview-ui/components/u-popup/u-popup.vue\";\nimport {pageBack} from \"../../../common/redirect\";\nimport {checkLogin, getUserInfo,clearUserInfo} from \"../../../store\";\n\nexport default {\n  components: {UPopup},\n  data() {\n    return {\n      order: {},\n      days: 0,\n      hours: 0,\n      minutes: 0,\n      seconds: 0,\n      timer: null,\n      showStatusPopup: false,\n      isCountdownEnded: false,\n      timelineList: [],\n      isPaying: false,\n      // 用户信息检查相关\n      orderUserInfo: null,\n      hideToPay: false\n    }\n  },\n  onLoad(options) {\n    if (!checkLogin()) {\n      uni.navigateTo({\n        url: '/pages/subPackages/user/login',\n        redirectUrl: `/pages/subPackages/order/three_detail?orderNo=${options.orderNo}`,\n      });\n    } else {\n      this.fetchOrderDetail(options.orderNo);\n    }\n  },\n  onShow() {\n\n  },\n  computed: {\n    orderStatusInfo() {\n      // 根据新的状态定义：1-未使用 2-已使用 3-已过期 4-已取消\n      switch (this.order.status) {\n        case 1:\n          return {\n            title: '未使用',\n            desc: '订单尚未使用',\n            showArrow: true,\n            showCountdown: true\n          }\n        case 2:\n          return {\n            title: '已使用',\n            desc: '订单已使用',\n            showArrow: true,\n          }\n        case 3:\n          return {\n            title: '已过期',\n            desc: '订单已过期',\n            showArrow: true,\n          };\n        case 4:\n          return {\n            title: '已取消',\n            desc: '订单已取消',\n            showArrow: true,\n          }\n        default:\n          return {}\n      }\n    },\n    footerButtons() {\n      switch (this.order.status) {\n        case 1:\n          return [\n            {text: '去使用', type: 'goToUse'}\n          ];\n        default:\n          return [];\n      }\n    }\n  },\n  methods: {\n    // 显示用户不匹配提示弹窗\n    showUserMismatchPopup() {\n      this.hideToPay = true;\n      this.$refs.userMismatchPopup.open();\n    },\n    // 关闭用户不匹配提示弹窗\n    closeUserMismatchPopup() {\n      // 需要跳转到 去登录页面\n      uni.navigateTo({\n        url: '/pages/subPackages/user/login',\n        redirectUrl: `/pages/subPackages/order/three_detail?orderNo=${this.order.orderNo}`,\n      });\n      this.$refs.userMismatchPopup.close();\n    },\n    formatDateRange2(effectiveTime, expireTime) {\n      if (!effectiveTime || !expireTime) return \"\";\n      const startDate = new Date(effectiveTime);\n      const endDate = new Date(expireTime);\n      const formatDate = (date) => {\n        const year = date.getFullYear();\n        const month = (date.getMonth() + 1).toString().padStart(2, '0');\n        const day = date.getDate().toString().padStart(2, '0');\n        return `${year}.${month}.${day}`;\n      };\n      return `有效期：${formatDate(startDate)}至${formatDate(endDate)}`;\n    },\n    formatDate(time) {\n      if (!time) return '';\n      const date = new Date(time);\n      const year = date.getFullYear();\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\n      const day = date.getDate().toString().padStart(2, '0');\n      const hour = date.getHours().toString().padStart(2, '0');\n      const minute = date.getMinutes().toString().padStart(2, '0');\n      return `${year}年${month}月${day}日 ${hour}:${minute}`;\n    },\n    async fetchOrderDetail(orderNo) {\n      this.order = await getThirdOrderDetail(orderNo)\n          .catch((error) => {\n            throw new Error(error.message || '加载失败');\n          });\n      // 对于状态1(未使用)的订单，启动倒计时\n      if (this.order.status === 1 && this.order.expireTime) {\n        this.startCountdown();\n      }\n      // 如果为空则返回到订单列表\n      if (!this.order) {\n        await uni.switchTab({url: '/pages/order/index'});\n      }\n      const userInfo = getUserInfo('userInfo')\n      if (userInfo && this.order.memberId !== userInfo.id) {\n        this.showUserMismatchPopup()\n      }\n    },\n    goBack() {\n      pageBack()\n    },\n    onNav() {\n      if (!this.order.hotel || !this.order.hotel.latitude || !this.order.hotel.longitude) {\n        uni.showToast({\n          title: '酒店位置信息不存在',\n          icon: 'none'\n        });\n        return;\n      }\n      // 打开地图导航\n      uni.openLocation({\n        latitude: Number(this.order.hotel.latitude),\n        longitude: Number(this.order.hotel.longitude),\n        name: this.order.hotelName,\n        address: this.order.hotel.address,\n        success: () => {\n        },\n        fail: (err) => {\n          console.error('打开地图失败：', err);\n          uni.showToast({\n            title: '打开地图失败',\n            icon: 'none'\n          });\n        }\n      });\n    },\n    onCall() {\n      uni.makePhoneCall({phoneNumber: this.order.hotel.contactPhone});\n    },\n    async onFooterBtnClick(type) {\n      if (type === 'goToUse') {\n        if (!checkLogin()) {\n          await uni.navigateTo({\n            url: '/pages/subPackages/user/login',\n            redirectUrl: '/pages/subPackages/home/search/jointSales',\n            params: {\n              id: this.order.id,\n              business: 'threeOrder'\n            }\n          });\n        } else {\n          uni.showModal({\n            title: '提示',\n            content: '由于此订单为探探糖订单，如需发票请联系探探糖平台进行开具。感谢您的理解与支持！',\n            confirmText: '继续使用',\n            cancelText: '取消',\n            success: async (res) => {\n              if (res.confirm) {\n                await uni.navigateTo({\n                  url: `/pages/subPackages/home/search/jointSales?id=${this.order.id}&business=threeOrder`,\n                });\n              }\n            }\n          });\n        }\n      }\n    },\n    startCountdown() {\n      // 清除可能已存在的计时器\n      if (this.timer) {\n        clearInterval(this.timer);\n      }\n\n      // 启动新的计时器\n      this.updateCountdown();\n      this.timer = setInterval(() => {\n        this.updateCountdown();\n      }, 1000);\n    },\n    updateCountdown() {\n      if (!this.order.expireTime) {\n        return;\n      }\n\n      const now = new Date().getTime();\n      const expireTime = new Date(this.order.expireTime).getTime();\n      const remainingTime = expireTime - now;\n\n      // 如果已过期，清除计时器\n      if (remainingTime <= 0) {\n        clearInterval(this.timer);\n        this.days = 0;\n        this.hours = '00';\n        this.minutes = '00';\n        this.seconds = '00';\n        return;\n      }\n\n      // 计算天、时、分、秒\n      const totalSeconds = Math.floor(remainingTime / 1000);\n      this.days = Math.floor(totalSeconds / (24 * 60 * 60));\n      const hoursLeft = Math.floor((totalSeconds % (24 * 60 * 60)) / (60 * 60));\n      const minutesLeft = Math.floor((totalSeconds % (60 * 60)) / 60);\n      const secondsLeft = totalSeconds % 60;\n\n      this.hours = hoursLeft < 10 ? '0' + hoursLeft : '' + hoursLeft;\n      this.minutes = minutesLeft < 10 ? '0' + minutesLeft : '' + minutesLeft;\n      this.seconds = secondsLeft < 10 ? '0' + secondsLeft : '' + secondsLeft;\n    },\n  },\n  beforeDestroy() {\n    if (this.timer) clearInterval(this.timer);\n  },\n\n  // 添加页面隐藏时也清除计时器\n  onHide() {\n    if (this.timer) clearInterval(this.timer);\n  }\n}\n</script>\n\n<style scoped>\n.order-detail-page {\n  background: #f6f7fa;\n  min-height: 100vh;\n  padding-bottom: 120rpx;\n}\n\n.header-bg {\n  background: #EE781F;\n  padding-bottom: 32rpx;\n}\n\n.nav-title {\n  width: 100%;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 32rpx;\n  color: #FFF;\n  text-align: center;\n  height: 88rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.order-status-block {\n  padding: 54rpx 0 130rpx 28rpx;\n}\n\n.order-status-row {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.review-more-icon {\n  margin-left: 20rpx;\n}\n\n.order-status {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 44rpx;\n  color: #FFFFFF;\n  text-align: left;\n  font-style: normal;\n}\n\n.order-status-desc {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 400;\n  font-size: 24rpx;\n  color: #FFFFFF;\n  line-height: 24rpx;\n  text-align: left;\n  font-style: normal;\n  margin-top: 16rpx;\n}\n\n.countdown {\n  display: flex;\n  align-items: center;\n  margin-left: 20rpx;\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 8rpx;\n  padding: 10rpx 15rpx;\n}\n\n.countdown-item {\n  display: flex;\n  align-items: baseline;\n}\n\n.countdown-item:not(:last-child)::after {\n  content: \"\";\n  width: 1rpx;\n  height: 20rpx;\n  background: rgba(255, 255, 255, 0.5);\n  margin: 0 10rpx;\n}\n\n.countdown-value {\n  font-size: 24rpx;\n  font-weight: 500;\n  color: #FFFFFF;\n  font-family: 'Helvetica Neue', Arial, sans-serif;\n  min-width: 20rpx;\n  text-align: center;\n}\n\n.countdown-unit {\n  font-size: 20rpx;\n  color: #FFFFFF;\n  margin: 0 5rpx 0 2rpx;\n  font-family: 'Helvetica Neue', Arial, sans-serif;\n}\n\n.countdown-unit:last-child {\n  margin-right: 0;\n}\n\n.card {\n  background: #FFFFFF;\n  border-radius: 28rpx;\n  margin: 28rpx;\n  padding: 0 28rpx;\n}\n\n.hotel-card {\n  margin-top: -98rpx;\n}\n\n.hotel-info-name {\n  height: 32rpx;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 32rpx;\n  color: #19191A;\n  line-height: 32rpx;\n  text-align: left;\n  font-style: normal;\n  padding: 40rpx 0 30rpx 0;\n}\n\n.hotel-info-name-else {\n  padding-bottom: 30rpx;\n}\n\n.hotel-info-name-fee {\n  height: 32rpx;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 32rpx;\n  color: #19191A;\n  line-height: 32rpx;\n  text-align: left;\n  font-style: normal;\n  padding-bottom: 30rpx;\n}\n\n.hotel-img-wrap {\n  width: 100%;\n  height: 340rpx;\n  display: flex;\n  justify-content: center;\n  border-radius: 28rpx;\n  margin-bottom: 40rpx;\n}\n\n.hotel-img {\n  width: 100%;\n  height: 100%;\n  border-radius: 12rpx;\n  object-fit: cover;\n}\n\n.hotel-info-base {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.line {\n  height: 1rpx;\n  background: #E8E9EB;\n  margin: 42rpx 0 24rpx 0;\n}\n\n.hotel-title {\n  font-size: 30rpx;\n  font-weight: 600;\n  color: #222;\n  margin-bottom: 8rpx;\n}\n\n.hotel-room, .hotel-date {\n  font-size: 24rpx;\n  color: #666;\n  margin-bottom: 4rpx;\n}\n\n.hotel-contact-row {\n  display: flex;\n  align-items: center;\n  padding-bottom: 58rpx;\n}\n\n.map-icon {\n  width: 36rpx;\n  height: 36rpx;\n  background: url('/static/base/map.png') no-repeat center;\n  background-size: 100% 100%;\n  margin-right: 12rpx;\n  flex-shrink: 0;\n}\n\n.hotel-desc {\n  flex: 1;\n  font-size: 28rpx;\n  color: #19191A;\n}\n\n.icon-btn {\n  background: #f8f8f8;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: 16rpx;\n  padding: 0;\n  width: 64rpx;\n  height: 64rpx;\n  border-radius: 64rpx;\n  overflow: hidden;\n  flex-shrink: 0;\n}\n\n.navigation-icon {\n  width: 100%;\n  height: 100%;\n  background: url('/static/base/navigation.png') no-repeat center;\n  background-size: 64rpx 64rpx;\n}\n\n.phone-icon {\n  width: 100%;\n  height: 100%;\n  background: url('/static/base/phone.png') no-repeat center;\n  background-size: 64rpx 64rpx;\n}\n\n.card-title {\n  font-size: 28rpx;\n  font-weight: 600;\n  color: #222;\n  margin-bottom: 18rpx;\n}\n\n.info-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 24rpx;\n  color: #444;\n  margin-bottom: 30rpx;\n}\n\n.info-label {\n  height: 28rpx;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 400;\n  font-size: 28rpx;\n  color: #19191A;\n  line-height: 28rpx;\n  text-align: left;\n  font-style: normal;\n}\n\n.info-value {\n  height: 28rpx;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 400;\n  font-size: 28rpx;\n  color: #19191A;\n  line-height: 28rpx;\n  text-align: right;\n  font-style: normal;\n}\n\n.last-row {\n  padding-bottom: 60rpx;\n}\n\n.line-fee {\n  height: 1rpx;\n  background: #E8E9EB;\n  margin: 38rpx 0 40rpx 0;\n}\n\n.line-fee-none {\n  height: 1rpx;\n  background: none;\n  margin: 38rpx 0 40rpx 0;\n}\n\n.line-fee-1 {\n  height: 1rpx;\n  background: #E8E9EB;\n  margin: 38rpx 0 40rpx 0;\n}\n\n.line-status {\n  height: 1rpx;\n  background: #E8E9EB;\n  margin: 38rpx 0 54rpx 0;\n}\n\n.total-row {\n  height: 40rpx;\n  padding-bottom: 56rpx;\n  display: flex;\n  align-items: center;\n}\n\n.total {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 600;\n  font-size: 40rpx;\n  color: #EE781F;\n  line-height: 40rpx;\n  text-align: right;\n  font-style: normal;\n  display: flex;\n  align-items: flex-end;\n}\n\n.currency {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 400;\n  font-size: 24rpx;\n  color: #EE781F;\n  line-height: 30rpx;\n  text-align: left;\n  font-style: normal;\n  display: inline-block;\n  vertical-align: bottom;\n}\n\n.amount-v {\n  display: inline-block;\n  vertical-align: bottom;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 600;\n  font-size: 40rpx;\n  color: #EE781F;\n  line-height: 40rpx;\n}\n\n.footer-bar {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #fff;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  padding: 24rpx 0 66rpx 0;\n  box-shadow: 0 -2rpx 8rpx rgba(0, 0, 0, 0.04);\n  z-index: 99;\n}\n\n.footer-btn {\n  flex: 1;\n  margin: 0 24rpx;\n  height: 80rpx;\n  line-height: 80rpx;\n  border-radius: 40rpx;\n  font-size: 30rpx;\n  font-weight: 500;\n  border: none;\n  text-align: center;\n  box-sizing: border-box;\n}\n\n.footer-btn.cancel {\n  background: #fff;\n  color: #19191A;\n  border: none;\n  position: relative;\n}\n\n.footer-btn.cancel::after {\n  content: \" \";\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 200%;\n  height: 200%;\n  transform: scale(0.5);\n  transform-origin: 0 0;\n  pointer-events: none;\n  box-sizing: border-box;\n  border: 1px solid #CBCBD5;\n  border-radius: 80rpx;\n}\n\n.footer-btn.primary {\n  background: #ee781f;\n  color: #fff;\n}\n\n.footer-btn.primary[disabled] {\n  background: #ccc;\n  color: #fff;\n  opacity: 0.6;\n}\n\n.status-popup {\n  width: 100%;\n  background: #fff;\n  border-radius: 32rpx 32rpx 0 0;\n}\n\n.bed-picker-header {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n}\n\n.popup-title {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 40rpx;\n  color: #19191A;\n  line-height: 40rpx;\n  text-align: center;\n  font-style: normal;\n  margin-top: 42rpx;\n}\n\n.close-icon {\n  width: 34rpx;\n  height: 32rpx;\n  position: absolute;\n  right: 34rpx;\n  bottom: 8rpx;\n  background-image: url('@/static/base/popup_icon_close.png');\n  background-size: cover;\n  background-position: center;\n}\n\n.status-timeline {\n  margin-left: 56rpx;\n}\n\n.timeline-item {\n  display: flex;\n  align-items: flex-start;\n  position: relative;\n  min-height: 80rpx;\n}\n\n.timeline-axis {\n  width: 40rpx;\n  height: 112rpx;\n  position: relative;\n  display: flex;\n  justify-content: center;\n}\n\n.axis-line {\n  position: absolute;\n  left: 50%;\n  width: 2rpx;\n  transform: translateX(-50%);\n  background: #CBCBD5;\n  z-index: 0;\n}\n\n.timeline-item:first-child .axis-line {\n  top: 40rpx;\n  height: calc(100% - 40rpx);\n}\n\n.timeline-item:not(:first-child):not(:last-child) .axis-line {\n  top: 0;\n  height: 100%;\n}\n\n.timeline-item:last-child .axis-line {\n  top: 0;\n  height: 20rpx;\n}\n\n.dot-outer {\n  width: 38rpx;\n  height: 38rpx;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(238, 120, 31, 0.2);\n  position: relative;\n  z-index: 2;\n}\n\n.dot-inner {\n  width: 16rpx;\n  height: 16rpx;\n  border-radius: 50%;\n  background: rgb(238, 103, 31);\n  position: absolute;\n  z-index: 3;\n}\n\n.dot {\n  width: 16rpx;\n  height: 16rpx;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #CBCBD5;\n}\n\n.dot::after {\n  width: 20rpx;\n  height: 20rpx;\n  border-radius: 50%;\n  background: #e0e0e8;\n  border: 2rpx solid #d3d3dd;\n  box-shadow: 0 2rpx 6rpx rgba(180, 180, 200, 0.10);\n}\n\n.content {\n  margin-left: 17rpx;\n}\n\n.timeline-item .content {\n  flex: 1;\n  padding-bottom: 32rpx;\n}\n\n.timeline-item .main {\n  height: 24rpx;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\n  font-weight: 500;\n  font-size: 24rpx;\n  line-height: 24rpx;\n  text-align: left;\n  font-style: normal;\n  color: #6D7278;\n  margin-top: 8rpx;\n}\n\n.timeline-item.current .main {\n  color: #ee781f;\n}\n\n.timeline-item.current .time {\n  color: #000;\n}\n\n\n.timeline-item .time {\n  color: #6D7278;\n  font-size: 24rpx;\n  margin-top: 8rpx;\n}\n\n.hotel-info {\n  margin-bottom: 28rpx;\n}\n\n\n/* 用户不匹配弹窗样式 */\n.popup-content {\n  width: 540rpx;\n  background: #fff;\n  border-radius: 20rpx;\n  padding: 40rpx;\n  text-align: center;\n}\n\n.popup-title {\n  font-size: 36rpx;\n  font-weight: bold;\n  margin-bottom: 20rpx;\n  color: #333;\n}\n\n.popup-message {\n  font-size: 28rpx;\n  color: #666;\n  margin-bottom: 40rpx;\n  line-height: 1.5;\n}\n\n.popup-buttons {\n  display: flex;\n  justify-content: center;\n}\n\n.popup-button {\n  width: 200rpx;\n  height: 70rpx;\n  line-height: 70rpx;\n  border-radius: 35rpx;\n  font-size: 28rpx;\n  border: none;\n}\n\n.popup-button.confirm {\n  background: #EE781F;\n  color: white;\n}\n</style>","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./three_detail.vue?vue&type=style&index=0&id=524ecd6e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./three_detail.vue?vue&type=style&index=0&id=524ecd6e&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1769665550897\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}