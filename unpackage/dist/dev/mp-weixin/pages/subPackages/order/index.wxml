<view class="{{['order-container','data-v-a06635b4',virtualHostClass]}}" style="{{virtualHostStyle}}"><uni-nav-bar vue-id="49d040a0-1" shadow="{{false}}" border="{{false}}" fixed="{{true}}" left-icon="left" status-bar="{{true}}" data-event-opts="{{[['^clickLeft',[['goBack']]]]}}" bind:clickLeft="__e" class="data-v-a06635b4" bind:__l="__l" virtualHostClass="data-v-a06635b4" vue-slots="{{['default']}}"><text class="{{['nav-title','data-v-a06635b4',virtualHostClass]}}" style="{{virtualHostStyle}}">填写订单</text></uni-nav-bar><block wx:if="{{loading}}"><view class="loading-container data-v-a06635b4"><view class="loading-content data-v-a06635b4"><view class="loading-spinner data-v-a06635b4"></view><text class="loading-text data-v-a06635b4">加载中...</text></view></view></block><block wx:else><view class="order-hotel-box data-v-a06635b4"><view class="hotel-title data-v-a06635b4">{{orderData.hotelName}}</view><view class="hotel-desc data-v-a06635b4"><view class="map-icon data-v-a06635b4"></view><text class="hotel-desc-text data-v-a06635b4">{{orderData.hotelAddress}}</text></view><view class="line data-v-a06635b4"></view><view data-event-opts="{{[['tap',[['onSelectDate',['$event']]]]]}}" class="order-date-row data-v-a06635b4" bindtap="__e"><view class="date-left data-v-a06635b4"><text class="date-main data-v-a06635b4">{{$root.m0}}</text><text class="date-week data-v-a06635b4">{{$root.m1}}</text></view><view class="nights-tag data-v-a06635b4">{{"共"+$root.m2+"晚"}}</view><view class="date-right data-v-a06635b4"><text class="date-main data-v-a06635b4">{{$root.m3}}</text><text class="date-week data-v-a06635b4">{{$root.m4}}</text></view></view><view class="order-room-row data-v-a06635b4"><text class="room-type data-v-a06635b4">{{orderData.roomTypeName}}</text><view class="room-divider data-v-a06635b4"></view><text class="bed-count data-v-a06635b4">{{(orderData.saleMode===1?'房间数':'床位数')+"："+orderData.roomCount}}</text></view></view></block><block wx:if="{{type_order==='1'}}"><view class="early-morning-tip data-v-a06635b4"><image class="early-morning-tip-icon data-v-a06635b4" src="https://www.zxd-hotel.xin/zxdhotel/icon/txicon@2x.png" mode="widthFix"></image><view class="early-morning-tip-text data-v-a06635b4"><text class="data-v-a06635b4">您预定的是连住套餐，不可提前取消，详情请咨询前台工作人员</text></view></view></block><block wx:if="{{!loading}}"><view class="form-title data-v-a06635b4">订房信息</view></block><block wx:if="{{!loading}}"><view class="order-form-box data-v-a06635b4"><view class="form-row data-v-a06635b4"><text class="form-label data-v-a06635b4">{{"所需"+(orderData.saleMode===1?'房间数':'床位数')+''}}<text class="required data-v-a06635b4">*</text></text><view class="bed-count-ctrl data-v-a06635b4"><view data-event-opts="{{[['tap',[['changeBed',[-1]]]]]}}" class="{{['data-v-a06635b4','bed-btn-img',orderData.roomCount<=1||type?'disabled':'']}}" bindtap="__e"></view><text class="bed-num data-v-a06635b4">{{orderData.roomCount}}</text><view data-event-opts="{{[['tap',[['changeBed',[1]]]]]}}" class="{{['data-v-a06635b4','bed-btn-img plus',orderData.roomCount>=20||type?'disabled':'']}}" bindtap="__e"></view></view></view><view class="order-row-line data-v-a06635b4"></view><block wx:for="{{orderData.guestList}}" wx:for-item="guest" wx:for-index="idx" wx:key="idx"><view class="{{['line-group','data-v-a06635b4',virtualHostClass]}}" style="{{virtualHostStyle}}"><view class="form-row data-v-a06635b4"><text class="form-label data-v-a06635b4">{{"入住人"+chineseNumbers[idx]+''}}<text class="required data-v-a06635b4">*</text></text><input class="form-input data-v-a06635b4" placeholder="请输入入住人姓名" data-event-opts="{{[['input',[['__set_model',['$0','guestName','$event',[]],['orderData.guestList.'+idx+'']]]]]}}" value="{{orderData.guestList[idx].guestName}}" bindinput="__e"/></view><view class="order-row-line data-v-a06635b4"></view></view></block><view class="form-row data-v-a06635b4"><text class="form-label data-v-a06635b4">手机号<text class="required data-v-a06635b4">*</text></text><input class="form-input data-v-a06635b4" placeholder="请输入手机号" type="number" maxlength="11" data-event-opts="{{[['blur',[['validatePhone',['$event']]]],['input',[['__set_model',['$0','contactPhone','$event',[]],['orderData']]]]]}}" value="{{orderData.contactPhone}}" bindblur="__e" bindinput="__e"/></view></view></block><block wx:if="{{!loading}}"><view class="form-title data-v-a06635b4">费用明细</view></block><block wx:if="{{!loading}}"><view class="order-fee-box data-v-a06635b4"><block wx:if="{{!type}}"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="fee-row fee-room-toggle data-v-a06635b4" bindtap="__e"><text class="data-v-a06635b4">{{"房费（"+$root.m5+"晚）"}}</text><view class="fee-room-right data-v-a06635b4"><text class="price data-v-a06635b4">{{"￥"+orderData.totalOriginalPrice}}</text><image class="arrow-icon data-v-a06635b4" style="{{'transform:'+(feeDetailExpand?'rotate(-90deg)':'rotate(90deg)')+';'}}" src="/static/base/right.png" mode="aspectFit" width="32rpx" height="32rpx"></image></view></view><block wx:if="{{$root.g0}}"><view class="fee-detail-list-simple data-v-a06635b4"><view class="fee-detail-avg-row data-v-a06635b4">{{'平均每晚￥'+orderData.avgNightPrice+''}}</view><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="__i0__" wx:key="date"><view class="{{['fee-detail-item-simple','data-v-a06635b4',virtualHostClass]}}" style="{{virtualHostStyle}}"><text class="fee-detail-date-simple data-v-a06635b4">{{item.$orig.date}}</text><block wx:if="{{item.$orig.count>1}}"><text class="fee-detail-count-simple data-v-a06635b4">{{"×"+item.$orig.count}}</text></block><text class="fee-detail-amount-simple data-v-a06635b4">{{'￥'+item.g1+''}}<block wx:if="{{item.$orig.discountSharing>0||item.$orig.originalPrice-item.$orig.discountPrice>0}}"><text class="data-v-a06635b4">{{'(￥'+item.g2+')'}}</text></block></text></view></block></view></block></block><block wx:else><view class="fee-row data-v-a06635b4"><text class="data-v-a06635b4">房费</text><text class="fee-discount data-v-a06635b4">{{"￥"+orderData.totalOriginalPrice}}</text></view></block><block wx:if="{{!type&&orderData.limitTimeDiscount>0}}"><view class="fee-row data-v-a06635b4"><text class="data-v-a06635b4">限时优惠</text><text class="fee-discount data-v-a06635b4">{{"减￥"+orderData.limitTimeDiscount}}</text></view></block><block wx:if="{{type}}"><view class="fee-row data-v-a06635b4"><text class="data-v-a06635b4">第三方抵扣</text><text class="fee-discount data-v-a06635b4">{{"减￥"+orderData.threePartyDeduction}}</text></view></block><block wx:if="{{!type}}"><view class="fee-row data-v-a06635b4"><view class="data-v-a06635b4">红包抵扣</view><block wx:if="{{$root.g3}}"><view data-event-opts="{{[['tap',[['onCouponClick',['$event']]]]]}}" class="free-coupon data-v-a06635b4" bindtap="__e"><text class="fee-discount data-v-a06635b4">{{"减￥"+orderData.redPacketDiscount}}</text><view class="hotel-info-l data-v-a06635b4"><uni-icons vue-id="49d040a0-2" type="arrowright" size="14" color="#A2A2A8" class="data-v-a06635b4" bind:__l="__l" virtualHostClass="data-v-a06635b4"></uni-icons></view></view></block><block wx:else><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="{{['free-coupon','data-v-a06635b4',($root.g4===0)?'disabled':'']}}" bindtap="__e"><block wx:if="{{$root.g5>0}}"><text class="fee-discount data-v-a06635b4">{{"减￥"+couponList[0].redPacket.amount}}</text></block><block wx:else><text class="fee-disable data-v-a06635b4">暂无可用红包</text></block><block wx:if="{{$root.g6>0}}"><view class="hotel-info-l data-v-a06635b4"><uni-icons vue-id="49d040a0-3" type="arrowright" size="14" color="#A2A2A8" class="data-v-a06635b4" bind:__l="__l" virtualHostClass="data-v-a06635b4"></uni-icons></view></block></view></block></view></block><view class="fee-row fee-total data-v-a06635b4"><text class="data-v-a06635b4">应付总额</text><text class="fee-total-num data-v-a06635b4"><text class="currency data-v-a06635b4">￥</text>{{''+orderData.totalAmount+''}}</text></view></view></block><block wx:if="{{!type&&!loading}}"><view class="pay-title data-v-a06635b4">选择支付方式</view><view class="pay-method-section data-v-a06635b4"><view data-event-opts="{{[['tap',[['selectPayMethod',[1]]]]]}}" class="pay-method data-v-a06635b4" bindtap="__e"><image class="icon data-v-a06635b4" src="/static/base/weixin.png" mode="aspectFill"></image><view class="text data-v-a06635b4">微信支付</view><image class="custom-radio data-v-a06635b4" src="{{orderData.paymentMethod===1?'/static/base/radio_checked_da.png':'/static/base/radio_unchecked_da.png'}}" mode="aspectFit" data-event-opts="{{[['tap',[['selectPayMethod',[1]]]]]}}" catchtap="__e"></image></view></view><view class="notice data-v-a06635b4">预订须知：<view class="_br data-v-a06635b4"></view>预订成功后，入住当日18点前可免费取消。18-21点取消需支付当天房费30%违约金，21点后不可取消，建议您提前做好出行规划。办理入住时需出示有效证件。</view></block><block wx:else><block wx:if="{{type&&!loading}}"><view class="notice data-v-a06635b4">预订须知：<view class="_br data-v-a06635b4"></view>为保障您的预订权益，第三方平台订单自入住当天 零点起即不可取消或调整，敬请谅解</view></block></block><block wx:if="{{!loading}}"><view class="order-bottom-fixed data-v-a06635b4"><view class="order-agree-bar data-v-a06635b4"><image class="custom-radio custom-radio-min data-v-a06635b4" src="{{agreeChecked?'/static/base/radio_checked.png':'/static/base/radio_unchecked.png'}}" mode="aspectFit" data-event-opts="{{[['tap',[['toggleAgree',['$event']]]]]}}" bindtap="__e"></image><view data-event-opts="{{[['tap',[['toggleAgree',['$event']]]]]}}" class="agree-text data-v-a06635b4" bindtap="__e">我已阅读并同意<text data-event-opts="{{[['tap',[['goToBookingNotice',['$event']]]]]}}" class="agree-link data-v-a06635b4" catchtap="__e">《预订须知》</text>和<text data-event-opts="{{[['tap',[['goToPaymentAgreement',['$event']]]]]}}" class="agree-link data-v-a06635b4" catchtap="__e">《支付服务协议》</text></view></view><view class="order-bottom-bar-new data-v-a06635b4"><view class="order-bottom-left data-v-a06635b4"><text class="bottom-label data-v-a06635b4">应付总额</text><view class="bottom-amount data-v-a06635b4"><text class="bottom-currency data-v-a06635b4">￥</text><text class="bottom-num data-v-a06635b4">{{$root.g7}}</text></view></view><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="{{['order-bottom-btn','data-v-a06635b4',(!agreeChecked)?'disabled':'']}}" bindtap="__e">{{"提交订单并支付"+orderData.totalAmount+'元'}}</view></view></view></block><block wx:if="{{showCouponPopup&&!loading}}"><view class="coupon-popup-mask data-v-a06635b4"><view class="coupon-popup data-v-a06635b4"><view class="bed-picker-header data-v-a06635b4"><text class="coupon-popup-title data-v-a06635b4">选择红包</text><text data-event-opts="{{[['tap',[['onCouponCancel',['$event']]]]]}}" class="close-icon data-v-a06635b4" bindtap="__e"></text></view><view class="coupon-list data-v-a06635b4"><block wx:for="{{$root.l1}}" wx:for-item="coupon" wx:for-index="__i1__" wx:key="id"><view class="{{['coupon-card','data-v-a06635b4',virtualHostClass]}}" style="{{virtualHostStyle}}"><view data-event-opts="{{[['tap',[['onCouponSelect',['$0'],[[['couponList','id',coupon.$orig.id,'id']]]]]]]}}" class="coupon-item data-v-a06635b4" catchtap="__e"><view class="coupon-info data-v-a06635b4"><view class="coupon-info-l data-v-a06635b4"><view class="coupon-info-l-title data-v-a06635b4">{{''+coupon.$orig.redPacket.name+''}}</view><view class="coupon-info-l-time data-v-a06635b4">{{'有效期'+coupon.m6+"-"+coupon.m7+''}}</view><view class="coupon-info-l-tag data-v-a06635b4"><block wx:if="{{coupon.$orig.redPacket.minSpend>0}}"><text class="tag data-v-a06635b4">{{"满"+coupon.$orig.redPacket.minSpend+'元可用'}}</text></block><block wx:else><text class="tag data-v-a06635b4">无门槛立减</text></block><block wx:if="{{coupon.$orig.redPacket.scopeType===1}}"><text class="tag data-v-a06635b4">适用于全部门店</text></block><block wx:else><text class="tag data-v-a06635b4">适用于指定门店</text></block><block wx:if="{{coupon.$orig.redPacketRule.stayDays>0}}"><text class="tag data-v-a06635b4">{{'适用于连续'+coupon.$orig.redPacketRule.stayDays+'晚及以上订单'}}</text></block></view></view><view class="coupon-info-r data-v-a06635b4"><view class="coupon-info-r-amount-box data-v-a06635b4"><view class="coupon-info-r-amount data-v-a06635b4">{{coupon.$orig.redPacket.amount}}</view><view class="coupon-info-r-unit data-v-a06635b4">元</view></view></view></view><block wx:if="{{coupon.$orig.soonExpire}}"><view class="coupon-tag-expired data-v-a06635b4"></view></block><block wx:if="{{coupon.$orig.soonExpire}}"><view class="coupon-tag-expired-text data-v-a06635b4">即将到期</view></block></view><view class="coupon-radio data-v-a06635b4"><image class="custom-radio data-v-a06635b4" src="{{selectedCouponId===coupon.$orig.id?'/static/base/radio_checked_da.png':'/static/base/radio_unchecked_da.png'}}" mode="aspectFit" data-event-opts="{{[['tap',[['onCouponSelect',['$0'],[[['couponList','id',coupon.$orig.id,'id']]]]]]]}}" catchtap="__e"></image></view></view></block></view><view class="coupon-popup-actions-new data-v-a06635b4"><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="no-coupon-row data-v-a06635b4" catchtap="__e"><radio style="transform:scale(0.8);margin-right:12rpx;" checked="{{selectedCouponId===null}}" color="#EE781F" data-event-opts="{{[['tap',[['onCouponSelect',[null]]]]]}}" catchtap="__e" class="data-v-a06635b4"></radio><text class="no-coupon-text data-v-a06635b4">不使用红包</text></view><view data-event-opts="{{[['tap',[['onCouponConfirm',['$event']]]]]}}" class="coupon-btn-main data-v-a06635b4" bindtap="__e">确定</view></view></view></view></block><block wx:if="{{showCalendar&&!loading}}"><hotel-calendar class="{{['data-v-a06635b4','calendar-page',showCalendar?'show':'']}}" vue-id="49d040a0-4" value="{{[orderData.checkInDate,orderData.checkOutDate]}}" isItOptionalToday="{{!type}}" cutoffTime="{{cutoffTime}}" data-event-opts="{{[['^change',[['onCalendarConfirm']]],['^close',[['e3']]]]}}" bind:change="__e" bind:close="__e" bind:__l="__l" virtualHostClass="{{['data-v-a06635b4','calendar-page',showCalendar?'show':'']}}"></hotel-calendar></block></view>